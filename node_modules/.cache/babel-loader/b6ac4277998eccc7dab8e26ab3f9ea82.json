{"ast":null,"code":"import GeomRoundRectangle from './geom/RoundRectangle.js';\nimport LineTo from '../utils/LineTo.js';\nimport ArcTo from '../utils/ArcTo.js';\nimport Earcut from '../../../utils/geom/polygon/Earcut.js';\nimport Render from './render/Render.js';\nconst GetValue = Phaser.Utils.Objects.GetValue;\n\nclass RoundRectangle extends Phaser.GameObjects.Shape {\n  constructor(scene, x, y, width, height, radiusConfig, fillColor, fillAlpha) {\n    if (x === undefined) {\n      x = 0;\n    }\n\n    if (y === undefined) {\n      y = 0;\n    }\n\n    var iteration = GetValue(radiusConfig, 'iteration', undefined);\n    radiusConfig = GetValue(radiusConfig, 'radius', radiusConfig);\n    var geom = new GeomRoundRectangle(0, 0, width, height, radiusConfig);\n    super(scene, 'RoundRectangle', geom);\n    this.setIteration(iteration);\n    this.setPosition(x, y); // this.setSize(this.geom.width, this.geom.height);\n\n    if (fillColor !== undefined) {\n      this.setFillStyle(fillColor, fillAlpha);\n    }\n\n    this.updateDisplayOrigin();\n    this.updateData();\n  }\n\n  updateData() {\n    var geom = this.geom;\n    var pathData = this.pathData;\n    pathData.length = 0;\n    var cornerRadius = geom.cornerRadius,\n        radius,\n        iteration = this.iteration + 1; // bottom-right\n\n    radius = cornerRadius.br;\n\n    if (isArcCorner(radius)) {\n      var centerX = geom.width - radius.x;\n      var centerY = geom.height - radius.y;\n      ArcTo(centerX, centerY, radius.x, radius.y, 0, 90, false, iteration, pathData);\n    } else {\n      LineTo(geom.width, geom.height, pathData);\n    } // bottom-left\n\n\n    radius = cornerRadius.bl;\n\n    if (isArcCorner(radius)) {\n      var centerX = radius.x;\n      var centerY = geom.height - radius.y;\n      ArcTo(centerX, centerY, radius.x, radius.y, 90, 180, false, iteration, pathData);\n    } else {\n      LineTo(0, geom.height, pathData);\n    } // top-left\n\n\n    radius = cornerRadius.tl;\n\n    if (isArcCorner(radius)) {\n      var centerX = radius.x;\n      var centerY = radius.y;\n      ArcTo(centerX, centerY, radius.x, radius.y, 180, 270, false, iteration, pathData);\n    } else {\n      LineTo(0, 0, pathData);\n    } // top-right\n\n\n    radius = cornerRadius.tr;\n\n    if (isArcCorner(radius)) {\n      var centerX = geom.width - radius.x;\n      var centerY = radius.y;\n      ArcTo(centerX, centerY, radius.x, radius.y, 270, 360, false, iteration, pathData);\n    } else {\n      LineTo(geom.width, 0, pathData);\n    }\n\n    pathData.push(pathData[0], pathData[1]); // Repeat first point to close curve\n\n    this.pathIndexes = Earcut(pathData);\n    return this;\n  }\n\n  get width() {\n    return this.geom.width;\n  }\n\n  set width(value) {\n    this.resize(value, this.height);\n  }\n\n  get height() {\n    return this.geom.height;\n  }\n\n  set height(value) {\n    this.resize(this.width, value);\n  }\n\n  resize(width, height) {\n    if (height === undefined) {\n      height = width;\n    }\n\n    if (this.geom.width === width && this.geom.height === height) {\n      return this;\n    }\n\n    this.geom.height = height;\n    this.geom.width = width;\n    this.updateDisplayOrigin();\n    this.updateData();\n    var input = this.input;\n\n    if (input && !input.customHitArea) {\n      input.hitArea.width = width;\n      input.hitArea.height = height;\n    }\n\n    return this;\n  }\n\n  get iteration() {\n    return this._iteration;\n  }\n\n  set iteration(value) {\n    // Set iteration first time\n    if (this._iteration === undefined) {\n      this._iteration = value;\n      return;\n    } // Change iteration value\n\n\n    if (this._iteration === value) {\n      return;\n    }\n\n    this._iteration = value;\n    this.updateData();\n  }\n\n  setIteration(iteration) {\n    if (iteration === undefined) {\n      iteration = 6;\n    }\n\n    this.iteration = iteration;\n    return this;\n  }\n\n  get radius() {\n    return this.geom.radius;\n  }\n\n  set radius(value) {\n    this.geom.setRadius(value);\n    this.updateDisplayOrigin();\n    this.updateData();\n  }\n\n  setRadius(value) {\n    if (value === undefined) {\n      value = 0;\n    }\n\n    this.radius = value;\n    return this;\n  }\n\n  get cornerRadius() {\n    return this.geom.cornerRadius;\n  }\n\n  set cornerRadius(value) {\n    this.radius = value;\n  }\n\n  setCornerRadius(value) {\n    return this.setRadius(value);\n  }\n\n}\n\nvar isArcCorner = function (radius) {\n  return radius.x !== 0 && radius.y !== 0;\n};\n\nObject.assign(RoundRectangle.prototype, Render);\nexport default RoundRectangle;","map":{"version":3,"sources":["/home/jon/code/Projects/Soulys/frontend/node_modules/phaser3-rex-plugins/plugins/gameobjects/shape/roundrectangle/RoundRectangle.js"],"names":["GeomRoundRectangle","LineTo","ArcTo","Earcut","Render","GetValue","Phaser","Utils","Objects","RoundRectangle","GameObjects","Shape","constructor","scene","x","y","width","height","radiusConfig","fillColor","fillAlpha","undefined","iteration","geom","setIteration","setPosition","setFillStyle","updateDisplayOrigin","updateData","pathData","length","cornerRadius","radius","br","isArcCorner","centerX","centerY","bl","tl","tr","push","pathIndexes","value","resize","input","customHitArea","hitArea","_iteration","setRadius","setCornerRadius","Object","assign","prototype"],"mappings":"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","sourcesContent":["import GeomRoundRectangle from './geom/RoundRectangle.js';\r\nimport LineTo from '../utils/LineTo.js';\r\nimport ArcTo from '../utils/ArcTo.js';\r\nimport Earcut from '../../../utils/geom/polygon/Earcut.js';\r\nimport Render from './render/Render.js';\r\n\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\n\r\nclass RoundRectangle extends Phaser.GameObjects.Shape {\r\n    constructor(scene, x, y, width, height, radiusConfig, fillColor, fillAlpha) {\r\n        if (x === undefined) {\r\n            x = 0;\r\n        }\r\n        if (y === undefined) {\r\n            y = 0;\r\n        }\r\n\r\n        var iteration = GetValue(radiusConfig, 'iteration', undefined);\r\n        radiusConfig = GetValue(radiusConfig, 'radius', radiusConfig);\r\n        var geom = new GeomRoundRectangle(0, 0, width, height, radiusConfig);\r\n        super(scene, 'RoundRectangle', geom);\r\n\r\n        this.setIteration(iteration);\r\n        this.setPosition(x, y);\r\n        // this.setSize(this.geom.width, this.geom.height);\r\n\r\n        if (fillColor !== undefined) {\r\n            this.setFillStyle(fillColor, fillAlpha);\r\n        }\r\n\r\n        this.updateDisplayOrigin();\r\n        this.updateData();\r\n    }\r\n\r\n    updateData() {\r\n        var geom = this.geom;\r\n        var pathData = this.pathData;\r\n\r\n        pathData.length = 0;\r\n\r\n        var cornerRadius = geom.cornerRadius,\r\n            radius,\r\n            iteration = this.iteration + 1;\r\n        // bottom-right\r\n        radius = cornerRadius.br;\r\n        if (isArcCorner(radius)) {\r\n            var centerX = geom.width - radius.x;\r\n            var centerY = geom.height - radius.y;\r\n            ArcTo(centerX, centerY, radius.x, radius.y, 0, 90, false, iteration, pathData);\r\n        } else {\r\n            LineTo(geom.width, geom.height, pathData);\r\n        }\r\n\r\n        // bottom-left\r\n        radius = cornerRadius.bl;\r\n        if (isArcCorner(radius)) {\r\n            var centerX = radius.x;\r\n            var centerY = geom.height - radius.y;\r\n            ArcTo(centerX, centerY, radius.x, radius.y, 90, 180, false, iteration, pathData);\r\n        } else {\r\n            LineTo(0, geom.height, pathData);\r\n        }\r\n\r\n        // top-left\r\n        radius = cornerRadius.tl;\r\n        if (isArcCorner(radius)) {\r\n            var centerX = radius.x;\r\n            var centerY = radius.y;\r\n            ArcTo(centerX, centerY, radius.x, radius.y, 180, 270, false, iteration, pathData);\r\n        } else {\r\n            LineTo(0, 0, pathData);\r\n        }\r\n\r\n        // top-right\r\n        radius = cornerRadius.tr;\r\n        if (isArcCorner(radius)) {\r\n            var centerX = geom.width - radius.x;\r\n            var centerY = radius.y;\r\n            ArcTo(centerX, centerY, radius.x, radius.y, 270, 360, false, iteration, pathData);\r\n        } else {\r\n            LineTo(geom.width, 0, pathData);\r\n        }\r\n\r\n        pathData.push(pathData[0], pathData[1]); // Repeat first point to close curve\r\n        this.pathIndexes = Earcut(pathData);\r\n        return this;\r\n    }\r\n\r\n    get width() {\r\n        return this.geom.width;\r\n    }\r\n    set width(value) {\r\n        this.resize(value, this.height);\r\n    }\r\n\r\n    get height() {\r\n        return this.geom.height;\r\n    }\r\n    set height(value) {\r\n        this.resize(this.width, value);\r\n    }\r\n\r\n    resize(width, height) {\r\n        if (height === undefined) {\r\n            height = width;\r\n        }\r\n        if ((this.geom.width === width) && (this.geom.height === height)) {\r\n            return this;\r\n        }\r\n        this.geom.height = height;\r\n        this.geom.width = width\r\n        this.updateDisplayOrigin();\r\n        this.updateData();\r\n\r\n        var input = this.input;\r\n        if (input && !input.customHitArea) {\r\n            input.hitArea.width = width;\r\n            input.hitArea.height = height;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    get iteration() {\r\n        return this._iteration;\r\n    }\r\n\r\n    set iteration(value) {\r\n        // Set iteration first time\r\n        if (this._iteration === undefined) {\r\n            this._iteration = value;\r\n            return;\r\n        }\r\n\r\n        // Change iteration value\r\n        if (this._iteration === value) {\r\n            return;\r\n        }\r\n\r\n        this._iteration = value;\r\n        this.updateData();\r\n    }\r\n\r\n    setIteration(iteration) {\r\n        if (iteration === undefined) {\r\n            iteration = 6;\r\n        }\r\n        this.iteration = iteration;\r\n        return this;\r\n    }\r\n\r\n    get radius() {\r\n        return this.geom.radius;\r\n    }\r\n\r\n    set radius(value) {\r\n        this.geom.setRadius(value);\r\n        this.updateDisplayOrigin();\r\n        this.updateData();\r\n    }\r\n\r\n    setRadius(value) {\r\n        if (value === undefined) {\r\n            value = 0;\r\n        }\r\n        this.radius = value;\r\n        return this;\r\n    }\r\n\r\n    get cornerRadius() {\r\n        return this.geom.cornerRadius;\r\n    }\r\n\r\n    set cornerRadius(value) {\r\n        this.radius = value;\r\n    }\r\n\r\n    setCornerRadius(value) {\r\n        return this.setRadius(value);\r\n    }\r\n}\r\n\r\nvar isArcCorner = function (radius) {\r\n    return ((radius.x !== 0) && (radius.y !== 0));\r\n}\r\n\r\n\r\nObject.assign(\r\n    RoundRectangle.prototype,\r\n    Render\r\n);\r\n\r\nexport default RoundRectangle;"]},"metadata":{},"sourceType":"module"}