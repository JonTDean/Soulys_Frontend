{"ast":null,"code":"import GetViewport from '../../utils/system/GetViewport.js';\n\nclass Anchor {\n  constructor(gameObject, config) {\n    this.gameObject = gameObject;\n    this.scene = gameObject.scene;\n    this.resetFromJSON(config);\n    this.boot();\n  }\n\n  resetFromJSON(o) {\n    var alignX, configX;\n\n    if (o.x !== undefined) {\n      alignX = null;\n      configX = o.x;\n    } else if (o.left !== undefined) {\n      alignX = 0;\n      configX = o.left;\n    } else if (o.right !== undefined) {\n      alignX = 1;\n      configX = o.right;\n    } else if (o.centerX !== undefined) {\n      alignX = 0.5;\n      configX = o.centerX;\n    }\n\n    var alignY, configY;\n\n    if (o.y !== undefined) {\n      alignY = null;\n      configY = o.y;\n    } else if (o.top !== undefined) {\n      alignY = 0;\n      configY = o.top;\n    } else if (o.bottom !== undefined) {\n      alignY = 1;\n      configY = o.bottom;\n    } else if (o.centerY !== undefined) {\n      alignY = 0.5;\n      configY = o.centerY;\n    }\n\n    var percentageX, offsetX;\n\n    if (configX !== undefined) {\n      configX = configX.replace('left', '0%').replace('right', '100%').replace('center', '50%').split('%');\n      percentageX = parseFloat(configX[0]) / 100;\n      offsetX = configX[1] === '' ? 0 : parseFloat(configX[1]);\n    }\n\n    var percentageY, offsetY;\n\n    if (configY !== undefined) {\n      configY = configY.replace('top', '0%').replace('bottom', '100%').replace('center', '50%').split('%');\n      percentageY = parseFloat(configY[0]) / 100;\n      offsetY = configY[1] === '' ? 0 : parseFloat(configY[1]);\n    }\n\n    this.setAlign(alignX, alignY);\n    this.setPercentage(percentageX, percentageY);\n    this.setOffset(offsetX, offsetY);\n    return this;\n  }\n\n  boot() {\n    this.scene.scale.on('resize', this.anchor, this);\n    this.gameObject.on('destroy', this.destroy, this);\n    this.anchor();\n  }\n\n  shutdown() {\n    this.scene.scale.off('resize', this.anchor, this);\n    this.gameObject = undefined;\n    this.scene = undefined;\n  }\n\n  destroy() {\n    this.shutdown();\n  }\n\n  setAlign(x, y) {\n    this.alignX = x;\n    this.alignY = y;\n    return this;\n  }\n\n  setPercentage(x, y) {\n    this.percentageX = x;\n    this.percentageY = y;\n    return this;\n  }\n\n  setOffset(x, y) {\n    this.offsetX = x;\n    this.offsetY = y;\n    return this;\n  }\n\n  anchor() {\n    this.viewport = GetViewport(this.scene, true);\n    this.updatePosition();\n    return this;\n  }\n\n  updatePosition() {\n    var gameObject = this.gameObject;\n\n    if (this.alignX === null) {\n      gameObject.x = this.anchorX;\n    } else if (this.alignX !== undefined) {\n      gameObject.x = this.anchorX + gameObject.displayWidth * (gameObject.originX - this.alignX);\n    }\n\n    if (this.alignY === null) {\n      this.gameObject.y = this.anchorY;\n    } else if (this.alignY !== undefined) {\n      gameObject.y = this.anchorY + gameObject.displayHeight * (gameObject.originY - this.alignY);\n    }\n\n    return this;\n  }\n\n  get anchorX() {\n    return this.viewport.x + this.viewport.width * this.percentageX + this.offsetX;\n  }\n\n  get anchorY() {\n    return this.viewport.y + this.viewport.height * this.percentageY + this.offsetY;\n  }\n\n}\n\nexport default Anchor;","map":{"version":3,"sources":["/home/jon/code/Projects/Soulys/frontend/node_modules/phaser3-rex-plugins/plugins/behaviors/anchor/Anchor.js"],"names":["GetViewport","Anchor","constructor","gameObject","config","scene","resetFromJSON","boot","o","alignX","configX","x","undefined","left","right","centerX","alignY","configY","y","top","bottom","centerY","percentageX","offsetX","replace","split","parseFloat","percentageY","offsetY","setAlign","setPercentage","setOffset","scale","on","anchor","destroy","shutdown","off","viewport","updatePosition","anchorX","displayWidth","originX","anchorY","displayHeight","originY","width","height"],"mappings":"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","sourcesContent":["import GetViewport from '../../utils/system/GetViewport.js';\r\n\r\nclass Anchor {\r\n    constructor(gameObject, config) {\r\n        this.gameObject = gameObject;\r\n        this.scene = gameObject.scene;\r\n        this.resetFromJSON(config);\r\n        this.boot();\r\n    }\r\n\r\n    resetFromJSON(o) {\r\n        var alignX, configX;\r\n        if (o.x !== undefined) {\r\n            alignX = null;\r\n            configX = o.x;\r\n        } else if (o.left !== undefined) {\r\n            alignX = 0;\r\n            configX = o.left;\r\n        } else if (o.right !== undefined) {\r\n            alignX = 1;\r\n            configX = o.right;\r\n        } else if (o.centerX !== undefined) {\r\n            alignX = 0.5;\r\n            configX = o.centerX;\r\n        }\r\n\r\n        var alignY, configY;\r\n        if (o.y !== undefined) {\r\n            alignY = null;\r\n            configY = o.y;\r\n        } else if (o.top !== undefined) {\r\n            alignY = 0;\r\n            configY = o.top;\r\n        } else if (o.bottom !== undefined) {\r\n            alignY = 1;\r\n            configY = o.bottom;\r\n        } else if (o.centerY !== undefined) {\r\n            alignY = 0.5;\r\n            configY = o.centerY;\r\n        }\r\n\r\n        var percentageX, offsetX;\r\n        if (configX !== undefined) {\r\n            configX = configX.replace('left', '0%').replace('right', '100%').replace('center', '50%').split('%');\r\n            percentageX = parseFloat(configX[0]) / 100;\r\n            offsetX = (configX[1] === '') ? 0 : parseFloat(configX[1]);\r\n        }\r\n        var percentageY, offsetY;\r\n        if (configY !== undefined) {\r\n            configY = configY.replace('top', '0%').replace('bottom', '100%').replace('center', '50%').split('%');\r\n            percentageY = parseFloat(configY[0]) / 100;\r\n            offsetY = (configY[1] === '') ? 0 : parseFloat(configY[1]);\r\n        }\r\n\r\n        this.setAlign(alignX, alignY);\r\n        this.setPercentage(percentageX, percentageY);\r\n        this.setOffset(offsetX, offsetY);\r\n        return this;\r\n    }\r\n\r\n    boot() {\r\n        this.scene.scale.on('resize', this.anchor, this);\r\n        this.gameObject.on('destroy', this.destroy, this);\r\n\r\n        this.anchor();\r\n    }\r\n\r\n    shutdown() {\r\n        this.scene.scale.off('resize', this.anchor, this);\r\n        this.gameObject = undefined;\r\n        this.scene = undefined;\r\n    }\r\n\r\n    destroy() {\r\n        this.shutdown();\r\n    }\r\n\r\n    setAlign(x, y) {\r\n        this.alignX = x;\r\n        this.alignY = y;\r\n        return this;\r\n    }\r\n\r\n    setPercentage(x, y) {\r\n        this.percentageX = x;\r\n        this.percentageY = y;\r\n        return this;\r\n    }\r\n\r\n    setOffset(x, y) {\r\n        this.offsetX = x;\r\n        this.offsetY = y;\r\n        return this;\r\n    }\r\n\r\n    anchor() {\r\n        this.viewport = GetViewport(this.scene, true);\r\n        this.updatePosition();\r\n        return this;\r\n    }\r\n\r\n    updatePosition() {\r\n        var gameObject = this.gameObject;\r\n\r\n        if (this.alignX === null) {\r\n            gameObject.x = this.anchorX;\r\n        } else if (this.alignX !== undefined) {\r\n            gameObject.x = this.anchorX + (gameObject.displayWidth * (gameObject.originX - this.alignX));\r\n        }\r\n\r\n        if (this.alignY === null) {\r\n            this.gameObject.y = this.anchorY;\r\n        } else if (this.alignY !== undefined) {\r\n            gameObject.y = this.anchorY + (gameObject.displayHeight * (gameObject.originY - this.alignY));\r\n        }\r\n        return this;\r\n    }\r\n\r\n    get anchorX() {\r\n        return this.viewport.x + (this.viewport.width * this.percentageX) + this.offsetX;\r\n    }\r\n\r\n    get anchorY() {\r\n        return this.viewport.y + (this.viewport.height * this.percentageY) + this.offsetY;\r\n    }\r\n}\r\n\r\nexport default Anchor;"]},"metadata":{},"sourceType":"module"}