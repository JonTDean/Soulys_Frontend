{"ast":null,"code":"import ALIGNMODE from '../utils/AlignConst.js';\nimport GlobZone from '../../../plugins/utils/actions/GlobZone.js';\nimport AlignIn from '../../../plugins/utils/align/align/in/QuickSet.js';\nconst GetValue = Phaser.Utils.Objects.GetValue;\nconst Group = Phaser.GameObjects.Group;\n\nvar DrawBounds = function (graphics, config) {\n  var scene = graphics.scene;\n  var color;\n  var createTextCallback, createTextCallbackScope, textAlign;\n\n  if (typeof config === 'number') {\n    color = config;\n  } else {\n    color = GetValue(config, 'color', 0xffffff);\n    var nameTextConfig = GetValue(config, 'name', false);\n\n    if (nameTextConfig) {\n      createTextCallback = GetValue(nameTextConfig, 'createTextCallback', DefaultCreateTextCallback);\n      createTextCallbackScope = GetValue(nameTextConfig, 'createTextCallbackScope', undefined);\n      textAlign = GetValue(nameTextConfig, 'align', 'left-top');\n\n      if (typeof textAlign === 'string') {\n        textAlign = ALIGNMODE[textAlign];\n      }\n    }\n  }\n\n  if (createTextCallback && !graphics.children) {\n    graphics.children = new Group(scene);\n    graphics.on('destroy', function () {\n      graphics.children.destroy(true);\n      graphics.children = undefined;\n    });\n    var graphicsClear = graphics.clear.bind(graphics);\n\n    graphics.clear = function () {\n      graphicsClear();\n      graphics.children.clear(false, true);\n    };\n  }\n\n  var children = this.getAllChildren([this]),\n      child;\n  var nameText;\n\n  for (var i = 0, cnt = children.length; i < cnt; i++) {\n    child = children[i];\n\n    if (!child.getBounds) {\n      continue;\n    }\n\n    if (color) {\n      graphics.lineStyle(1, color).strokeRectShape(child.getBounds(globRect));\n    }\n\n    if (child.name && createTextCallback) {\n      if (createTextCallbackScope) {\n        nameText = createTextCallback.call(createTextCallbackScope, scene);\n      } else {\n        nameText = createTextCallback(scene);\n      }\n\n      if (nameText) {\n        nameText.setText(child.name);\n        graphics.children.add(nameText);\n        GlobZone.setPosition(globRect.x, globRect.y).setSize(globRect.width, globRect.height);\n        AlignIn(nameText, GlobZone, textAlign);\n      }\n    }\n  }\n\n  return this;\n};\n\nvar DefaultCreateTextCallback = function (scene, child, childBoundsRect) {\n  return scene.add.text(0, 0, '');\n};\n\nvar globRect = new Phaser.Geom.Rectangle();\nexport default DrawBounds;","map":{"version":3,"sources":["/home/jon/code/Projects/Soulys/frontend/node_modules/phaser3-rex-plugins/templates/ui/basesizer/DrawBounds.js"],"names":["ALIGNMODE","GlobZone","AlignIn","GetValue","Phaser","Utils","Objects","Group","GameObjects","DrawBounds","graphics","config","scene","color","createTextCallback","createTextCallbackScope","textAlign","nameTextConfig","DefaultCreateTextCallback","undefined","children","on","destroy","graphicsClear","clear","bind","getAllChildren","child","nameText","i","cnt","length","getBounds","lineStyle","strokeRectShape","globRect","name","call","setText","add","setPosition","x","y","setSize","width","height","childBoundsRect","text","Geom","Rectangle"],"mappings":"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","sourcesContent":["import ALIGNMODE from '../utils/AlignConst.js';\r\nimport GlobZone from '../../../plugins/utils/actions/GlobZone.js';\r\nimport AlignIn from '../../../plugins/utils/align/align/in/QuickSet.js';\r\n\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\nconst Group = Phaser.GameObjects.Group;\r\n\r\nvar DrawBounds = function (graphics, config) {\r\n    var scene = graphics.scene;\r\n\r\n    var color;\r\n    var createTextCallback, createTextCallbackScope, textAlign;\r\n    if (typeof (config) === 'number') {\r\n        color = config;\r\n    } else {\r\n        color = GetValue(config, 'color', 0xffffff);\r\n        var nameTextConfig = GetValue(config, 'name', false);\r\n        if (nameTextConfig) {\r\n            createTextCallback = GetValue(nameTextConfig, 'createTextCallback', DefaultCreateTextCallback);\r\n            createTextCallbackScope = GetValue(nameTextConfig, 'createTextCallbackScope', undefined);\r\n            textAlign = GetValue(nameTextConfig, 'align', 'left-top');\r\n            if (typeof (textAlign) === 'string') {\r\n                textAlign = ALIGNMODE[textAlign];\r\n            }\r\n        }\r\n    }\r\n\r\n    if (createTextCallback && !graphics.children) {\r\n        graphics.children = new Group(scene);\r\n        graphics.on('destroy', function () {\r\n            graphics.children.destroy(true);\r\n            graphics.children = undefined;\r\n        })\r\n        var graphicsClear = graphics.clear.bind(graphics);\r\n        graphics.clear = function () {\r\n            graphicsClear();\r\n            graphics.children.clear(false, true);\r\n        }\r\n    }\r\n\r\n    var children = this.getAllChildren([this]), child;\r\n    var nameText;\r\n    for (var i = 0, cnt = children.length; i < cnt; i++) {\r\n        child = children[i];\r\n        if (!child.getBounds) {\r\n            continue;\r\n        }\r\n        if (color) {\r\n            graphics\r\n                .lineStyle(1, color)\r\n                .strokeRectShape(child.getBounds(globRect));\r\n        }\r\n\r\n        if (child.name && createTextCallback) {\r\n            if (createTextCallbackScope) {\r\n                nameText = createTextCallback.call(createTextCallbackScope, scene);\r\n            } else {\r\n                nameText = createTextCallback(scene);\r\n            }\r\n            if (nameText) {\r\n                nameText.setText(child.name);\r\n                graphics.children.add(nameText);\r\n\r\n                GlobZone.setPosition(globRect.x, globRect.y).setSize(globRect.width, globRect.height);\r\n                AlignIn(nameText, GlobZone, textAlign);\r\n            }\r\n        }\r\n    }\r\n    return this;\r\n}\r\n\r\nvar DefaultCreateTextCallback = function (scene, child, childBoundsRect) {\r\n    return scene.add.text(0, 0, '');\r\n}\r\n\r\nvar globRect = new Phaser.Geom.Rectangle();\r\n\r\nexport default DrawBounds;"]},"metadata":{},"sourceType":"module"}