{"ast":null,"code":"import _classCallCheck from\"/home/jon/code/Projects/Soulys/Original/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/jon/code/Projects/Soulys/Original/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import Spawner from'./Spawner';var WorldManager=/*#__PURE__*/function(){function WorldManager(scene,mapData){_classCallCheck(this,WorldManager);// mapData \nthis.scene=scene;this.mapData=mapData;// Spawners\nthis.spawners={};this.lootables={};// Spawner Locations\nthis.playerLocations=[];this.lootableLocations={};this.monsterLocations={};}_createClass(WorldManager,[{key:\"setup\",value:function setup(){this.parseMapData();this.setupEventListener();this.setupSpawners();this.spawnPlayer();}},{key:\"parseMapData\",value:function parseMapData(){var _this=this;// console.log(this.mapData)\nthis.mapData.forEach(function(layer){switch(layer.name){case'player_spawner':layer.objects.forEach(function(obj){_this.playerLocations.push([obj.x,obj.y]);// console.log(this.playerLocations)\n});break;case'lootable_locations':layer.objects.forEach(function(obj){switch(_this.lootableLocations[obj.properties.spawner]){case true:_this.lootableLocations[obj.properties.spawner].push([obj.x,obj.y]);break;case false:_this.lootableLocations[obj.properties.spawner]=[[obj.x,obj.y]];break;default:break;}});break;case'monster_spawner':layer.objects.forEach(function(obj){switch(_this.monsterLocations[obj.properties.spawner]){case true:_this.monsterLocations[obj.properties.spawner].push([obj.x,obj.y]);break;case false:_this.monsterLocations[obj.properties.spawner]=[[obj.x,obj.y]];break;default:break;}});break;default:console.log(\"Desolate Spawn\");break;}});}},{key:\"setupEventListener\",value:function setupEventListener(){}},{key:\"setupSpawners\",value:function setupSpawners(){var _this2=this;Object.keys(this.lootableLocations).forEach(function(key){var config={spawnInterval:3000,limit:3,spawnerType:'LOOTABLE',id:\"lootable-\".concat(key)};var spawner=new Spawner(config,_this2.lootableLocations[key],_this2.addLootable.bind(_this2),_this2.deleteLootable.bind(_this2));_this2.spawners[spawner.id]=spawner;});}},{key:\"spawnPlayer\",value:function spawnPlayer(){var location=this.playerLocations[Math.floor(Math.random()*this.playerLocations.length)];// console.log(`Location: ${location}`)\nthis.scene.events.emit('spawnPlayer',location);}},{key:\"addLootable\",value:function addLootable(){}}]);return WorldManager;}();export default WorldManager;","map":{"version":3,"sources":["/home/jon/code/Projects/Soulys/Original/frontend/src/components/Game/WorldManager/WorldManager.js"],"names":["Spawner","WorldManager","scene","mapData","spawners","lootables","playerLocations","lootableLocations","monsterLocations","parseMapData","setupEventListener","setupSpawners","spawnPlayer","forEach","layer","name","objects","obj","push","x","y","properties","spawner","console","log","Object","keys","key","config","spawnInterval","limit","spawnerType","id","addLootable","bind","deleteLootable","location","Math","floor","random","length","events","emit"],"mappings":"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","sourcesContent":["import Spawner from './Spawner';\n\nclass WorldManager{\n    constructor(scene, mapData){\n        // mapData \n        this.scene = scene;\n        this.mapData = mapData;\n\n        // Spawners\n        this.spawners = {};\n        this.lootables = {};\n\n        // Spawner Locations\n        this.playerLocations = [];\n        this.lootableLocations = {};\n        this.monsterLocations = {};\n    }\n\n    setup(){\n        this.parseMapData();\n        this.setupEventListener();\n        this.setupSpawners();\n        this.spawnPlayer();\n    }\n\n    parseMapData(){\n        // console.log(this.mapData)\n\n        this.mapData.forEach((layer) => {\n            switch(layer.name){\n                case 'player_spawner':\n                    layer.objects.forEach((obj) => {\n                        this.playerLocations.push([obj.x, obj.y]);\n                        // console.log(this.playerLocations)\n                    })\n                    break;\n                case 'lootable_locations':\n                    layer.objects.forEach((obj) => {\n                        switch(this.lootableLocations[obj.properties.spawner]){\n                            case true:\n                                this.lootableLocations[obj.properties.spawner].push([obj.x, obj.y]);\n                                break;\n                            case false:\n                                this.lootableLocations[obj.properties.spawner] = [[obj.x, obj.y]];\n                                break;\n                            default:\n                                break;\n                        }\n                    })\n                    break;\n                case 'monster_spawner':\n                    layer.objects.forEach((obj) => {\n                        switch(this.monsterLocations[obj.properties.spawner]){\n                            case true:\n                                this.monsterLocations[obj.properties.spawner].push([obj.x, obj.y]);\n                                break;\n                            case false:\n                                this.monsterLocations[obj.properties.spawner] = [[obj.x, obj.y]];\n                                break;\n                            default:\n                                break;\n                        }\n                    })\n                    break;\n                default:\n                    console.log(\"Desolate Spawn\")\n                    break;\n            }\n        })\n    }\n\n    setupEventListener(){\n\n    }\n\n    setupSpawners(){\n        Object.keys(this.lootableLocations).forEach((key) =>{\n            const config = {\n                spawnInterval: 3000,\n                limit: 3,\n                spawnerType: 'LOOTABLE',\n                id: `lootable-${key}`, \n            };\n\n            const spawner = new Spawner(\n                config, \n                this.lootableLocations[key], \n                this.addLootable.bind(this), \n                this.deleteLootable.bind(this) \n            );\n\n            this.spawners[spawner.id] = spawner;\n        })\n    }\n\n    spawnPlayer(){\n        const location = this.playerLocations[Math.floor(Math.random() * this.playerLocations.length)];\n        // console.log(`Location: ${location}`)\n        this.scene.events.emit('spawnPlayer', location);\n    }\n\n    addLootable(){\n\n    }\n\n\n}\n\nexport default WorldManager;"]},"metadata":{},"sourceType":"module"}