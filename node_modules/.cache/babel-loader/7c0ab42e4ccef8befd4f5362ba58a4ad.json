{"ast":null,"code":"/*!\r\n * phaser-input - version 2.0.5 \r\n * Adds input boxes to Phaser like CanvasInput, but also works for WebGL and Mobile, made for Phaser only.\r\n *\r\n * Azerion\r\n * Build at 18-03-2019\r\n * Released under MIT License \r\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar PhaserInput;\n\n(function (PhaserInput) {\n  var InputType;\n\n  (function (InputType) {\n    InputType[InputType[\"text\"] = 0] = \"text\";\n    InputType[InputType[\"password\"] = 1] = \"password\";\n    InputType[InputType[\"number\"] = 2] = \"number\";\n  })(InputType = PhaserInput.InputType || (PhaserInput.InputType = {}));\n\n  var InputElement = function () {\n    function InputElement(game, id, type, value, focusIn, focusOut) {\n      if (type === void 0) {\n        type = InputType.text;\n      }\n\n      if (value === void 0) {\n        value = '';\n      }\n\n      var _this = this;\n\n      this.id = id;\n      this.type = type;\n      this.game = game;\n      this.focusIn = focusIn;\n      this.focusOut = focusOut;\n      var canvasTopX = this.game.canvas.getBoundingClientRect().top + document.body.scrollTop;\n      this.element = document.createElement('input');\n      this.element.id = id;\n      this.element.style.position = 'absolute';\n      this.element.style.top = canvasTopX + 'px';\n      this.element.style.left = (-40).toString() + 'px';\n      this.element.style.width = 10 .toString() + 'px';\n      this.element.style.height = 10 .toString() + 'px';\n      this.element.style.border = '0px';\n      this.element.value = this.value;\n      this.element.type = InputType[type];\n      this.element.addEventListener('focusin', function () {\n        if (_this.focusIn instanceof Phaser.Signal) {\n          _this.focusIn.dispatch();\n        }\n      });\n      this.element.addEventListener('focusout', function () {\n        if (_this.focusOut instanceof Phaser.Signal) {\n          _this.focusOut.dispatch();\n        }\n      });\n      document.body.appendChild(this.element);\n    }\n\n    InputElement.prototype.addKeyUpListener = function (callback) {\n      this.keyUpCallback = callback;\n      document.addEventListener('keyup', this.keyUpCallback);\n      this.element.addEventListener('input', this.keyUpCallback);\n    };\n\n    InputElement.prototype.blockKeyDownEvents = function () {\n      document.addEventListener('keydown', this.preventKeyPropagation);\n    };\n\n    InputElement.prototype.preventKeyPropagation = function (evt) {\n      if (evt.stopPropagation) {\n        evt.stopPropagation();\n      } else {\n        event.cancelBubble = true;\n      }\n    };\n\n    InputElement.prototype.unblockKeyDownEvents = function () {\n      document.removeEventListener('keydown', this.preventKeyPropagation);\n    };\n\n    InputElement.prototype.removeEventListener = function () {\n      document.removeEventListener('keyup', this.keyUpCallback);\n      this.element.removeEventListener('input', this.keyUpCallback);\n    };\n\n    InputElement.prototype.destroy = function () {\n      document.body.removeChild(this.element);\n    };\n\n    InputElement.prototype.setMax = function (max, min) {\n      if (max === undefined) {\n        return;\n      }\n\n      if (this.type === InputType.text || this.type === InputType.password) {\n        this.element.maxLength = parseInt(max, 10);\n      } else if (this.type === InputType.number) {\n        this.element.max = max;\n\n        if (min === undefined) {\n          return;\n        }\n\n        this.element.min = min;\n      }\n    };\n\n    Object.defineProperty(InputElement.prototype, \"value\", {\n      get: function () {\n        return this.element.value;\n      },\n      set: function (value) {\n        this.element.value = value;\n      },\n      enumerable: true,\n      configurable: true\n    });\n\n    InputElement.prototype.focus = function () {\n      var _this = this;\n\n      this.element.focus();\n\n      if (!this.game.device.desktop && this.game.device.chrome) {\n        var originalWidth_1 = window.innerWidth,\n            originalHeight_1 = window.innerHeight;\n        var kbAppeared_1 = false;\n        var interval_1 = setInterval(function () {\n          if (originalWidth_1 > window.innerWidth || originalHeight_1 > window.innerHeight) {\n            kbAppeared_1 = true;\n          }\n\n          if (kbAppeared_1 && originalWidth_1 === window.innerWidth && originalHeight_1 === window.innerHeight) {\n            if (_this.focusOut instanceof Phaser.Signal) {\n              _this.focusOut.dispatch();\n            }\n\n            clearInterval(interval_1);\n          }\n        }, 50);\n      }\n    };\n\n    InputElement.prototype.blur = function () {\n      this.element.blur();\n    };\n\n    Object.defineProperty(InputElement.prototype, \"hasSelection\", {\n      get: function () {\n        if (this.type === InputType.number) {\n          return false;\n        }\n\n        return this.element.selectionStart !== this.element.selectionEnd;\n      },\n      enumerable: true,\n      configurable: true\n    });\n    Object.defineProperty(InputElement.prototype, \"caretStart\", {\n      get: function () {\n        return this.element.selectionEnd;\n      },\n      enumerable: true,\n      configurable: true\n    });\n    Object.defineProperty(InputElement.prototype, \"caretEnd\", {\n      get: function () {\n        return this.element.selectionStart;\n      },\n      enumerable: true,\n      configurable: true\n    });\n\n    InputElement.prototype.getCaretPosition = function () {\n      if (this.type === InputType.number) {\n        return -1;\n      }\n\n      return this.element.selectionStart;\n    };\n\n    InputElement.prototype.setCaretPosition = function (pos) {\n      if (this.type === InputType.number) {\n        return;\n      }\n\n      this.element.setSelectionRange(pos, pos);\n    };\n\n    return InputElement;\n  }();\n\n  PhaserInput.InputElement = InputElement;\n})(PhaserInput || (PhaserInput = {}));\n\nvar PhaserInput;\n\n(function (PhaserInput) {\n  var ForceCase;\n\n  (function (ForceCase) {\n    ForceCase[ForceCase[\"none\"] = 0] = \"none\";\n    ForceCase[ForceCase[\"lower\"] = 1] = \"lower\";\n    ForceCase[ForceCase[\"upper\"] = 2] = \"upper\";\n  })(ForceCase = PhaserInput.ForceCase || (PhaserInput.ForceCase = {}));\n\n  var InputField = function (_super) {\n    __extends(InputField, _super);\n\n    function InputField(game, x, y, inputOptions) {\n      if (inputOptions === void 0) {\n        inputOptions = {};\n      }\n\n      var _this = _super.call(this, game, x, y) || this;\n\n      _this.focusOutOnEnter = true;\n      _this.placeHolder = null;\n      _this.box = null;\n      _this.focus = false;\n      _this.value = '';\n      _this.windowScale = 1;\n      _this.blockInput = true;\n      _this.focusIn = new Phaser.Signal();\n      _this.focusOut = new Phaser.Signal();\n      _this.blink = true;\n      _this.cnt = 0;\n      _this.inputOptions = inputOptions;\n      _this.inputOptions.width = typeof inputOptions.width === 'number' ? inputOptions.width : 150;\n      _this.inputOptions.padding = typeof inputOptions.padding === 'number' ? inputOptions.padding : 0;\n      _this.inputOptions.textAlign = inputOptions.textAlign || 'left';\n      _this.inputOptions.type = inputOptions.type || PhaserInput.InputType.text;\n      _this.inputOptions.forceCase = inputOptions.forceCase ? inputOptions.forceCase : ForceCase.none;\n      _this.inputOptions.borderRadius = typeof inputOptions.borderRadius === 'number' ? inputOptions.borderRadius : 0;\n      _this.inputOptions.height = typeof inputOptions.height === 'number' ? inputOptions.height : 14;\n      _this.inputOptions.fillAlpha = inputOptions.fillAlpha === undefined ? 1 : inputOptions.fillAlpha;\n      _this.inputOptions.selectionColor = inputOptions.selectionColor || 'rgba(179, 212, 253, 0.8)';\n      _this.inputOptions.zoom = !game.device.desktop ? inputOptions.zoom || false : false;\n      _this.box = new PhaserInput.InputBox(_this.game, inputOptions);\n\n      _this.setTexture(_this.box.generateTexture());\n\n      _this.textMask = new PhaserInput.TextMask(_this.game, inputOptions);\n\n      _this.addChild(_this.textMask);\n\n      _this.domElement = new PhaserInput.InputElement(_this.game, 'phaser-input-' + (Math.random() * 10000 | 0).toString(), _this.inputOptions.type, _this.value, _this.focusIn, _this.focusOut);\n\n      _this.domElement.setMax(_this.inputOptions.max, _this.inputOptions.min);\n\n      _this.selection = new PhaserInput.SelectionHighlight(_this.game, _this.inputOptions);\n      _this.selection.mask = _this.textMask;\n\n      _this.addChild(_this.selection);\n\n      if (inputOptions.placeHolder && inputOptions.placeHolder.length > 0) {\n        _this.placeHolder = new Phaser.Text(game, _this.inputOptions.padding, _this.inputOptions.padding, inputOptions.placeHolder, {\n          font: inputOptions.font || '14px Arial',\n          fontWeight: inputOptions.fontWeight || 'normal',\n          fill: inputOptions.placeHolderColor || '#bfbebd'\n        });\n        _this.placeHolder.mask = _this.textMask;\n\n        _this.addChild(_this.placeHolder);\n      }\n\n      _this.cursor = new Phaser.Text(game, _this.inputOptions.padding, _this.inputOptions.padding - 2, '|', {\n        font: inputOptions.font || '14px Arial',\n        fontWeight: inputOptions.fontWeight || 'normal',\n        fill: inputOptions.cursorColor || '#000000'\n      });\n      _this.cursor.visible = false;\n\n      _this.addChild(_this.cursor);\n\n      _this.text = new Phaser.Text(game, _this.inputOptions.padding, _this.inputOptions.padding, '', {\n        font: inputOptions.font || '14px Arial',\n        fontWeight: inputOptions.fontWeight || 'normal',\n        fill: inputOptions.fill || '#000000'\n      });\n      _this.text.mask = _this.textMask;\n\n      _this.addChild(_this.text);\n\n      _this.offscreenText = new Phaser.Text(game, _this.inputOptions.padding, _this.inputOptions.padding, '', {\n        font: inputOptions.font || '14px Arial',\n        fontWeight: inputOptions.fontWeight || 'normal',\n        fill: inputOptions.fill || '#000000'\n      });\n\n      _this.updateTextAlignment();\n\n      _this.inputEnabled = true;\n      _this.input.useHandCursor = true;\n\n      _this.game.input.onDown.add(_this.checkDown, _this);\n\n      _this.focusOut.add(function () {\n        if (PhaserInput.KeyboardOpen) {\n          _this.endFocus();\n\n          if (_this.inputOptions.zoom) {\n            _this.zoomOut();\n          }\n        }\n      });\n\n      return _this;\n    }\n\n    Object.defineProperty(InputField.prototype, \"width\", {\n      get: function () {\n        return this.inputOptions.width;\n      },\n      set: function (width) {\n        this.inputOptions.width = width;\n        this.box.resize(width);\n        this.textMask.resize(width);\n        this.updateTextAlignment();\n      },\n      enumerable: true,\n      configurable: true\n    });\n\n    InputField.prototype.updateTextAlignment = function () {\n      switch (this.inputOptions.textAlign) {\n        case 'left':\n          this.text.anchor.set(0, 0);\n          this.text.x = this.inputOptions.padding;\n\n          if (null !== this.placeHolder) {\n            this.placeHolder.anchor.set(0, 0);\n          }\n\n          this.cursor.x = this.inputOptions.padding + this.getCaretPosition();\n          break;\n\n        case 'center':\n          this.text.anchor.set(0.5, 0);\n          this.text.x = this.inputOptions.padding + this.inputOptions.width / 2;\n\n          if (null !== this.placeHolder) {\n            this.placeHolder.anchor.set(0.5, 0);\n            this.placeHolder.x = this.inputOptions.padding + this.inputOptions.width / 2;\n          }\n\n          this.cursor.x = this.inputOptions.padding + this.inputOptions.width / 2 - this.text.width / 2 + this.getCaretPosition();\n          break;\n\n        case 'right':\n          this.text.anchor.set(1, 0);\n          this.text.x = this.inputOptions.padding + this.inputOptions.width;\n\n          if (null !== this.placeHolder) {\n            this.placeHolder.anchor.set(1, 0);\n            this.placeHolder.x = this.inputOptions.padding + this.inputOptions.width;\n          }\n\n          this.cursor.x = this.inputOptions.padding + this.inputOptions.width;\n          break;\n      }\n    };\n\n    InputField.prototype.checkDown = function (e) {\n      if (!this.value) {\n        this.resetText();\n      }\n\n      if (this.input.checkPointerOver(e)) {\n        if (this.focus) {\n          this.setCaretOnclick(e);\n          return;\n        }\n\n        if (this.inputOptions.zoom && !PhaserInput.Zoomed) {\n          this.zoomIn();\n        }\n\n        this.startFocus();\n      } else {\n        if (this.focus === true) {\n          this.endFocus();\n\n          if (this.inputOptions.zoom) {\n            this.zoomOut();\n          }\n        }\n      }\n    };\n\n    InputField.prototype.update = function () {\n      this.text.update();\n\n      if (this.placeHolder) {\n        this.placeHolder.update();\n      }\n\n      if (!this.focus) {\n        return;\n      }\n\n      if (this.cnt !== 30) {\n        return this.cnt++;\n      }\n\n      this.cursor.visible = this.blink;\n      this.blink = !this.blink;\n      this.cnt = 0;\n    };\n\n    InputField.prototype.endFocus = function () {\n      var _this = this;\n\n      if (!this.focus) {\n        return;\n      }\n\n      this.domElement.removeEventListener();\n\n      if (this.blockInput === true) {\n        this.domElement.unblockKeyDownEvents();\n      }\n\n      this.focus = false;\n\n      if (this.value.length === 0 && null !== this.placeHolder) {\n        this.placeHolder.visible = true;\n      }\n\n      this.cursor.visible = false;\n\n      if (this.game.device.desktop) {\n        setTimeout(function () {\n          _this.domElement.blur();\n        }, 0);\n      } else {\n        this.domElement.blur();\n      }\n\n      if (!this.game.device.desktop) {\n        PhaserInput.KeyboardOpen = false;\n        PhaserInput.onKeyboardClose.dispatch();\n      }\n    };\n\n    InputField.prototype.startFocus = function () {\n      var _this = this;\n\n      this.focus = true;\n\n      if (null !== this.placeHolder) {\n        this.placeHolder.visible = false;\n      }\n\n      if (this.game.device.desktop) {\n        setTimeout(function () {\n          _this.keyUpProcessor();\n        }, 0);\n      } else {\n        this.keyUpProcessor();\n      }\n\n      if (!this.game.device.desktop) {\n        PhaserInput.KeyboardOpen = true;\n        PhaserInput.onKeyboardOpen.dispatch();\n      }\n    };\n\n    InputField.prototype.keyUpProcessor = function () {\n      this.domElement.addKeyUpListener(this.keyListener.bind(this));\n      this.domElement.focus();\n\n      if (this.blockInput === true) {\n        this.domElement.blockKeyDownEvents();\n      }\n    };\n\n    InputField.prototype.updateText = function () {\n      var text = '';\n\n      if (this.inputOptions.type === PhaserInput.InputType.password) {\n        for (var i = 0; i < this.value.length; i++) {\n          text += '*';\n        }\n      } else if (this.inputOptions.type === PhaserInput.InputType.number) {\n        var val = parseInt(this.value);\n\n        if (val < parseInt(this.inputOptions.min)) {\n          text = this.value = this.domElement.value = this.inputOptions.min;\n        } else if (val > parseInt(this.inputOptions.max)) {\n          text = this.value = this.domElement.value = this.inputOptions.max;\n        } else {\n          text = this.value;\n        }\n      } else {\n        text = this.value;\n      }\n\n      this.text.setText(text);\n\n      if (this.text.width > this.inputOptions.width) {\n        this.text.anchor.x = 1;\n        this.text.x = this.inputOptions.padding + this.inputOptions.width;\n      } else {\n        switch (this.inputOptions.textAlign) {\n          case 'left':\n            this.text.anchor.set(0, 0);\n            this.text.x = this.inputOptions.padding;\n            break;\n\n          case 'center':\n            this.text.anchor.set(0.5, 0);\n            this.text.x = this.inputOptions.padding + this.inputOptions.width / 2;\n            break;\n\n          case 'right':\n            this.text.anchor.set(1, 0);\n            this.text.x = this.inputOptions.padding + this.inputOptions.width;\n            break;\n        }\n      }\n    };\n\n    InputField.prototype.updateCursor = function () {\n      if (this.text.width > this.inputOptions.width || this.inputOptions.textAlign === 'right') {\n        this.cursor.x = this.inputOptions.padding + this.inputOptions.width;\n      } else {\n        switch (this.inputOptions.textAlign) {\n          case 'left':\n            this.cursor.x = this.inputOptions.padding + this.getCaretPosition();\n            break;\n\n          case 'center':\n            this.cursor.x = this.inputOptions.padding + this.inputOptions.width / 2 - this.text.width / 2 + this.getCaretPosition();\n            break;\n        }\n      }\n    };\n\n    InputField.prototype.getCaretPosition = function () {\n      var caretPosition = this.domElement.getCaretPosition();\n\n      if (-1 === caretPosition) {\n        return this.text.width;\n      }\n\n      var text = this.value;\n\n      if (this.inputOptions.type === PhaserInput.InputType.password) {\n        text = '';\n\n        for (var i = 0; i < this.value.length; i++) {\n          text += '*';\n        }\n      }\n\n      this.offscreenText.setText(text.slice(0, caretPosition));\n      return this.offscreenText.width;\n    };\n\n    InputField.prototype.setCaretOnclick = function (e) {\n      var localX = this.text.toLocal(new PIXI.Point(e.x, e.y), this.game.world).x;\n\n      if (this.inputOptions.textAlign && this.inputOptions.textAlign === 'center') {\n        localX += this.text.width / 2;\n      }\n\n      var characterWidth = this.text.width / this.value.length;\n      var index = 0;\n\n      for (var i = 0; i < this.value.length; i++) {\n        if (localX >= i * characterWidth && localX <= (i + 1) * characterWidth) {\n          index = i;\n          break;\n        }\n      }\n\n      if (localX > (this.value.length - 1) * characterWidth) {\n        index = this.value.length;\n      }\n\n      this.startFocus();\n      this.domElement.setCaretPosition(index);\n      this.updateCursor();\n    };\n\n    InputField.prototype.updateSelection = function () {\n      if (this.domElement.hasSelection) {\n        var text = this.value;\n\n        if (this.inputOptions.type === PhaserInput.InputType.password) {\n          text = '';\n\n          for (var i = 0; i < this.value.length; i++) {\n            text += '*';\n          }\n        }\n\n        text = text.substring(this.domElement.caretStart, this.domElement.caretEnd);\n        this.offscreenText.setText(text);\n        this.selection.updateSelection(this.offscreenText.getBounds());\n\n        switch (this.inputOptions.textAlign) {\n          case 'left':\n            this.selection.x = this.inputOptions.padding;\n            break;\n\n          case 'center':\n            this.selection.x = this.inputOptions.padding + this.inputOptions.width / 2 - this.text.width / 2;\n            break;\n        }\n      } else {\n        this.selection.clear();\n      }\n    };\n\n    InputField.prototype.zoomIn = function () {\n      if (PhaserInput.Zoomed) {\n        return;\n      }\n\n      var bounds = this.getBounds();\n\n      if (window.innerHeight > window.innerWidth) {\n        this.windowScale = this.game.width / (bounds.width * 1.5);\n      } else {\n        this.windowScale = this.game.width / 2 / (bounds.width * 1.5);\n      }\n\n      var offsetX = (this.game.width - bounds.width * 1.5) / 2 / this.windowScale;\n      this.game.world.scale.set(this.game.world.scale.x * this.windowScale, this.game.world.scale.y * this.windowScale);\n      this.game.world.pivot.set(bounds.x - offsetX, bounds.y - this.inputOptions.padding * 2);\n      PhaserInput.Zoomed = true;\n    };\n\n    InputField.prototype.zoomOut = function () {\n      if (!PhaserInput.Zoomed) {\n        return;\n      }\n\n      this.game.world.scale.set(this.game.world.scale.x / this.windowScale, this.game.world.scale.y / this.windowScale);\n      this.game.world.pivot.set(0, 0);\n      PhaserInput.Zoomed = false;\n    };\n\n    InputField.prototype.keyListener = function (evt) {\n      this.value = this.getFormattedText(this.domElement.value);\n\n      if (evt.keyCode === 13) {\n        if (this.focusOutOnEnter) {\n          this.endFocus();\n        }\n\n        return;\n      }\n\n      this.updateText();\n      this.updateCursor();\n      this.updateSelection();\n      evt.preventDefault();\n    };\n\n    InputField.prototype.destroy = function (destroyChildren) {\n      this.game.input.onDown.remove(this.checkDown, this);\n      this.focusIn.removeAll();\n      this.focusOut.removeAll();\n      this.domElement.destroy();\n\n      _super.prototype.destroy.call(this, destroyChildren);\n    };\n\n    InputField.prototype.resetText = function () {\n      this.setText();\n    };\n\n    InputField.prototype.setText = function (text) {\n      if (text === void 0) {\n        text = '';\n      }\n\n      if (null !== this.placeHolder) {\n        if (text.length > 0) {\n          this.placeHolder.visible = false;\n        } else {\n          this.placeHolder.visible = true;\n        }\n      }\n\n      this.value = this.getFormattedText(text);\n      this.domElement.value = this.value;\n      this.updateText();\n      this.updateCursor();\n      this.endFocus();\n    };\n\n    InputField.prototype.getFormattedText = function (text) {\n      switch (this.inputOptions.forceCase) {\n        default:\n        case ForceCase.none:\n          return text;\n\n        case ForceCase.lower:\n          return text.toLowerCase();\n\n        case ForceCase.upper:\n          return text.toUpperCase();\n      }\n    };\n\n    return InputField;\n  }(Phaser.Sprite);\n\n  PhaserInput.InputField = InputField;\n})(PhaserInput || (PhaserInput = {}));\n\nvar PhaserInput;\n\n(function (PhaserInput) {\n  var InputBox = function (_super) {\n    __extends(InputBox, _super);\n\n    function InputBox(game, inputOptions) {\n      var _this = _super.call(this, game, 0, 0) || this;\n\n      _this.bgColor = inputOptions.backgroundColor ? parseInt(inputOptions.backgroundColor.slice(1), 16) : 0xffffff;\n      _this.borderRadius = inputOptions.borderRadius = typeof inputOptions.borderRadius === 'number' ? inputOptions.borderRadius : 0;\n      _this.borderWidth = inputOptions.borderWidth = typeof inputOptions.borderWidth === 'number' ? inputOptions.borderWidth : 1;\n      _this.borderColor = inputOptions.borderColor ? parseInt(inputOptions.borderColor.slice(1), 16) : 0x959595;\n      _this.boxAlpha = inputOptions.fillAlpha;\n      _this.padding = inputOptions.padding;\n      var height = inputOptions.height;\n      var width = inputOptions.width;\n      var height;\n\n      if (inputOptions.font) {\n        height = Math.max(parseInt(inputOptions.font.substr(0, inputOptions.font.indexOf('px')), 10), height);\n      }\n\n      _this.boxHeight = _this.padding * 2 + height;\n      var width = inputOptions.width;\n      _this.boxWidth = _this.padding * 2 + width;\n\n      _this.drawBox();\n\n      return _this;\n    }\n\n    InputBox.prototype.resize = function (newWidth) {\n      this.boxWidth = this.padding * 2 + newWidth;\n      this.drawBox();\n    };\n\n    InputBox.prototype.drawBox = function () {\n      this.clear().beginFill(this.bgColor, this.boxAlpha).lineStyle(this.borderWidth, this.borderColor, this.boxAlpha);\n\n      if (this.borderRadius > 0) {\n        this.drawRoundedRect(0, 0, this.boxWidth, this.boxHeight, this.borderRadius);\n      } else {\n        this.drawRect(0, 0, this.boxWidth, this.boxHeight);\n      }\n    };\n\n    return InputBox;\n  }(Phaser.Graphics);\n\n  PhaserInput.InputBox = InputBox;\n})(PhaserInput || (PhaserInput = {}));\n\nvar PhaserInput;\n\n(function (PhaserInput) {\n  var SelectionHighlight = function (_super) {\n    __extends(SelectionHighlight, _super);\n\n    function SelectionHighlight(game, inputOptions) {\n      var _this = _super.call(this, game, inputOptions.padding, inputOptions.padding) || this;\n\n      _this.inputOptions = inputOptions;\n      return _this;\n    }\n\n    SelectionHighlight.prototype.updateSelection = function (rect) {\n      var color = Phaser.Color.webToColor(this.inputOptions.selectionColor);\n      this.clear();\n      this.beginFill(SelectionHighlight.rgb2hex(color), color.a);\n      this.drawRect(rect.x, rect.y, rect.width, rect.height - this.inputOptions.padding);\n    };\n\n    SelectionHighlight.rgb2hex = function (color) {\n      return parseInt((\"0\" + color.r.toString(16)).slice(-2) + (\"0\" + color.g.toString(16)).slice(-2) + (\"0\" + color.b.toString(16)).slice(-2), 16);\n    };\n\n    return SelectionHighlight;\n  }(Phaser.Graphics);\n\n  PhaserInput.SelectionHighlight = SelectionHighlight;\n})(PhaserInput || (PhaserInput = {}));\n\nvar PhaserInput;\n\n(function (PhaserInput) {\n  var TextMask = function (_super) {\n    __extends(TextMask, _super);\n\n    function TextMask(game, inputOptions) {\n      var _this = _super.call(this, game, inputOptions.padding, inputOptions.padding) || this;\n\n      var height = inputOptions.height;\n\n      if (inputOptions.font) {\n        height = Math.max(parseInt(inputOptions.font.substr(0, inputOptions.font.indexOf('px')), 10), height);\n      }\n\n      _this.maskWidth = inputOptions.width;\n      _this.maskHeight = height * 1.3;\n\n      _this.drawMask();\n\n      return _this;\n    }\n\n    TextMask.prototype.resize = function (newWidth) {\n      this.maskWidth = newWidth;\n      this.drawMask();\n    };\n\n    TextMask.prototype.drawMask = function () {\n      this.clear().beginFill(0x000000).drawRect(0, 0, this.maskWidth, this.maskHeight).endFill();\n    };\n\n    return TextMask;\n  }(Phaser.Graphics);\n\n  PhaserInput.TextMask = TextMask;\n})(PhaserInput || (PhaserInput = {}));\n\nvar PhaserInput;\n\n(function (PhaserInput) {\n  PhaserInput.Zoomed = false;\n  PhaserInput.KeyboardOpen = false;\n  PhaserInput.onKeyboardOpen = new Phaser.Signal();\n  PhaserInput.onKeyboardClose = new Phaser.Signal();\n\n  var Plugin = function (_super) {\n    __extends(Plugin, _super);\n\n    function Plugin(game, parent) {\n      var _this = _super.call(this, game, parent) || this;\n\n      _this.addInputFieldFactory();\n\n      return _this;\n    }\n\n    Plugin.prototype.addInputFieldFactory = function () {\n      Phaser.GameObjectFactory.prototype.inputField = function (x, y, inputOptions, group) {\n        if (group === undefined) {\n          group = this.world;\n        }\n\n        var nineSliceObject = new PhaserInput.InputField(this.game, x, y, inputOptions);\n        return group.add(nineSliceObject);\n      };\n\n      Phaser.GameObjectCreator.prototype.inputField = function (x, y, inputOptions) {\n        return new PhaserInput.InputField(this.game, x, y, inputOptions);\n      };\n    };\n\n    return Plugin;\n  }(Phaser.Plugin);\n\n  Plugin.Zoomed = false;\n  Plugin.KeyboardOpen = false;\n  Plugin.onKeyboardOpen = new Phaser.Signal();\n  Plugin.onKeyboardClose = new Phaser.Signal();\n  PhaserInput.Plugin = Plugin;\n})(PhaserInput || (PhaserInput = {}));","map":{"version":3,"sources":["../ts/InputElement.ts","../ts/InputField.ts","../ts/Objects/InputBox.ts","../ts/Objects/SelectionHighlight.ts","../ts/Objects/TextMask.ts","../ts/Plugin.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*!\r\n * phaser-input - version 2.0.5 \r\n * Adds input boxes to Phaser like CanvasInput, but also works for WebGL and Mobile, made for Phaser only.\r\n *\r\n * Azerion\r\n * Build at 18-03-2019\r\n * Released under MIT License \r\n */\r\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar PhaserInput;\r\n(function (PhaserInput) {\r\n    var InputType;\r\n    (function (InputType) {\r\n        InputType[InputType[\"text\"] = 0] = \"text\";\r\n        InputType[InputType[\"password\"] = 1] = \"password\";\r\n        InputType[InputType[\"number\"] = 2] = \"number\";\r\n    })(InputType = PhaserInput.InputType || (PhaserInput.InputType = {}));\r\n    var InputElement = (function () {\r\n        function InputElement(game, id, type, value, focusIn, focusOut) {\r\n            if (type === void 0) { type = InputType.text; }\r\n            if (value === void 0) { value = ''; }\r\n            var _this = this;\r\n            this.id = id;\r\n            this.type = type;\r\n            this.game = game;\r\n            this.focusIn = focusIn;\r\n            this.focusOut = focusOut;\r\n            var canvasTopX = this.game.canvas.getBoundingClientRect().top + document.body.scrollTop;\r\n            this.element = document.createElement('input');\r\n            this.element.id = id;\r\n            this.element.style.position = 'absolute';\r\n            this.element.style.top = canvasTopX + 'px';\r\n            this.element.style.left = (-40).toString() + 'px';\r\n            this.element.style.width = (10).toString() + 'px';\r\n            this.element.style.height = (10).toString() + 'px';\r\n            this.element.style.border = '0px';\r\n            this.element.value = this.value;\r\n            this.element.type = InputType[type];\r\n            this.element.addEventListener('focusin', function () {\r\n                if (_this.focusIn instanceof Phaser.Signal) {\r\n                    _this.focusIn.dispatch();\r\n                }\r\n            });\r\n            this.element.addEventListener('focusout', function () {\r\n                if (_this.focusOut instanceof Phaser.Signal) {\r\n                    _this.focusOut.dispatch();\r\n                }\r\n            });\r\n            document.body.appendChild(this.element);\r\n        }\r\n        InputElement.prototype.addKeyUpListener = function (callback) {\r\n            this.keyUpCallback = callback;\r\n            document.addEventListener('keyup', this.keyUpCallback);\r\n            this.element.addEventListener('input', this.keyUpCallback);\r\n        };\r\n        InputElement.prototype.blockKeyDownEvents = function () {\r\n            document.addEventListener('keydown', this.preventKeyPropagation);\r\n        };\r\n        InputElement.prototype.preventKeyPropagation = function (evt) {\r\n            if (evt.stopPropagation) {\r\n                evt.stopPropagation();\r\n            }\r\n            else {\r\n                event.cancelBubble = true;\r\n            }\r\n        };\r\n        InputElement.prototype.unblockKeyDownEvents = function () {\r\n            document.removeEventListener('keydown', this.preventKeyPropagation);\r\n        };\r\n        InputElement.prototype.removeEventListener = function () {\r\n            document.removeEventListener('keyup', this.keyUpCallback);\r\n            this.element.removeEventListener('input', this.keyUpCallback);\r\n        };\r\n        InputElement.prototype.destroy = function () {\r\n            document.body.removeChild(this.element);\r\n        };\r\n        InputElement.prototype.setMax = function (max, min) {\r\n            if (max === undefined) {\r\n                return;\r\n            }\r\n            if (this.type === InputType.text || this.type === InputType.password) {\r\n                this.element.maxLength = parseInt(max, 10);\r\n            }\r\n            else if (this.type === InputType.number) {\r\n                this.element.max = max;\r\n                if (min === undefined) {\r\n                    return;\r\n                }\r\n                this.element.min = min;\r\n            }\r\n        };\r\n        Object.defineProperty(InputElement.prototype, \"value\", {\r\n            get: function () {\r\n                return this.element.value;\r\n            },\r\n            set: function (value) {\r\n                this.element.value = value;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        InputElement.prototype.focus = function () {\r\n            var _this = this;\r\n            this.element.focus();\r\n            if (!this.game.device.desktop && this.game.device.chrome) {\r\n                var originalWidth_1 = window.innerWidth, originalHeight_1 = window.innerHeight;\r\n                var kbAppeared_1 = false;\r\n                var interval_1 = setInterval(function () {\r\n                    if (originalWidth_1 > window.innerWidth || originalHeight_1 > window.innerHeight) {\r\n                        kbAppeared_1 = true;\r\n                    }\r\n                    if (kbAppeared_1 && originalWidth_1 === window.innerWidth && originalHeight_1 === window.innerHeight) {\r\n                        if (_this.focusOut instanceof Phaser.Signal) {\r\n                            _this.focusOut.dispatch();\r\n                        }\r\n                        clearInterval(interval_1);\r\n                    }\r\n                }, 50);\r\n            }\r\n        };\r\n        InputElement.prototype.blur = function () {\r\n            this.element.blur();\r\n        };\r\n        Object.defineProperty(InputElement.prototype, \"hasSelection\", {\r\n            get: function () {\r\n                if (this.type === InputType.number) {\r\n                    return false;\r\n                }\r\n                return this.element.selectionStart !== this.element.selectionEnd;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(InputElement.prototype, \"caretStart\", {\r\n            get: function () {\r\n                return this.element.selectionEnd;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(InputElement.prototype, \"caretEnd\", {\r\n            get: function () {\r\n                return this.element.selectionStart;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        InputElement.prototype.getCaretPosition = function () {\r\n            if (this.type === InputType.number) {\r\n                return -1;\r\n            }\r\n            return this.element.selectionStart;\r\n        };\r\n        InputElement.prototype.setCaretPosition = function (pos) {\r\n            if (this.type === InputType.number) {\r\n                return;\r\n            }\r\n            this.element.setSelectionRange(pos, pos);\r\n        };\r\n        return InputElement;\r\n    }());\r\n    PhaserInput.InputElement = InputElement;\r\n})(PhaserInput || (PhaserInput = {}));\r\nvar PhaserInput;\r\n(function (PhaserInput) {\r\n    var ForceCase;\r\n    (function (ForceCase) {\r\n        ForceCase[ForceCase[\"none\"] = 0] = \"none\";\r\n        ForceCase[ForceCase[\"lower\"] = 1] = \"lower\";\r\n        ForceCase[ForceCase[\"upper\"] = 2] = \"upper\";\r\n    })(ForceCase = PhaserInput.ForceCase || (PhaserInput.ForceCase = {}));\r\n    var InputField = (function (_super) {\r\n        __extends(InputField, _super);\r\n        function InputField(game, x, y, inputOptions) {\r\n            if (inputOptions === void 0) { inputOptions = {}; }\r\n            var _this = _super.call(this, game, x, y) || this;\r\n            _this.focusOutOnEnter = true;\r\n            _this.placeHolder = null;\r\n            _this.box = null;\r\n            _this.focus = false;\r\n            _this.value = '';\r\n            _this.windowScale = 1;\r\n            _this.blockInput = true;\r\n            _this.focusIn = new Phaser.Signal();\r\n            _this.focusOut = new Phaser.Signal();\r\n            _this.blink = true;\r\n            _this.cnt = 0;\r\n            _this.inputOptions = inputOptions;\r\n            _this.inputOptions.width = (typeof inputOptions.width === 'number') ? inputOptions.width : 150;\r\n            _this.inputOptions.padding = (typeof inputOptions.padding === 'number') ? inputOptions.padding : 0;\r\n            _this.inputOptions.textAlign = inputOptions.textAlign || 'left';\r\n            _this.inputOptions.type = inputOptions.type || PhaserInput.InputType.text;\r\n            _this.inputOptions.forceCase = (inputOptions.forceCase) ? inputOptions.forceCase : ForceCase.none;\r\n            _this.inputOptions.borderRadius = (typeof inputOptions.borderRadius === 'number') ? inputOptions.borderRadius : 0;\r\n            _this.inputOptions.height = (typeof inputOptions.height === 'number') ? inputOptions.height : 14;\r\n            _this.inputOptions.fillAlpha = (inputOptions.fillAlpha === undefined) ? 1 : inputOptions.fillAlpha;\r\n            _this.inputOptions.selectionColor = inputOptions.selectionColor || 'rgba(179, 212, 253, 0.8)';\r\n            _this.inputOptions.zoom = (!game.device.desktop) ? inputOptions.zoom || false : false;\r\n            _this.box = new PhaserInput.InputBox(_this.game, inputOptions);\r\n            _this.setTexture(_this.box.generateTexture());\r\n            _this.textMask = new PhaserInput.TextMask(_this.game, inputOptions);\r\n            _this.addChild(_this.textMask);\r\n            _this.domElement = new PhaserInput.InputElement(_this.game, 'phaser-input-' + (Math.random() * 10000 | 0).toString(), _this.inputOptions.type, _this.value, _this.focusIn, _this.focusOut);\r\n            _this.domElement.setMax(_this.inputOptions.max, _this.inputOptions.min);\r\n            _this.selection = new PhaserInput.SelectionHighlight(_this.game, _this.inputOptions);\r\n            _this.selection.mask = _this.textMask;\r\n            _this.addChild(_this.selection);\r\n            if (inputOptions.placeHolder && inputOptions.placeHolder.length > 0) {\r\n                _this.placeHolder = new Phaser.Text(game, _this.inputOptions.padding, _this.inputOptions.padding, inputOptions.placeHolder, {\r\n                    font: inputOptions.font || '14px Arial',\r\n                    fontWeight: inputOptions.fontWeight || 'normal',\r\n                    fill: inputOptions.placeHolderColor || '#bfbebd'\r\n                });\r\n                _this.placeHolder.mask = _this.textMask;\r\n                _this.addChild(_this.placeHolder);\r\n            }\r\n            _this.cursor = new Phaser.Text(game, _this.inputOptions.padding, _this.inputOptions.padding - 2, '|', {\r\n                font: inputOptions.font || '14px Arial',\r\n                fontWeight: inputOptions.fontWeight || 'normal',\r\n                fill: inputOptions.cursorColor || '#000000'\r\n            });\r\n            _this.cursor.visible = false;\r\n            _this.addChild(_this.cursor);\r\n            _this.text = new Phaser.Text(game, _this.inputOptions.padding, _this.inputOptions.padding, '', {\r\n                font: inputOptions.font || '14px Arial',\r\n                fontWeight: inputOptions.fontWeight || 'normal',\r\n                fill: inputOptions.fill || '#000000'\r\n            });\r\n            _this.text.mask = _this.textMask;\r\n            _this.addChild(_this.text);\r\n            _this.offscreenText = new Phaser.Text(game, _this.inputOptions.padding, _this.inputOptions.padding, '', {\r\n                font: inputOptions.font || '14px Arial',\r\n                fontWeight: inputOptions.fontWeight || 'normal',\r\n                fill: inputOptions.fill || '#000000'\r\n            });\r\n            _this.updateTextAlignment();\r\n            _this.inputEnabled = true;\r\n            _this.input.useHandCursor = true;\r\n            _this.game.input.onDown.add(_this.checkDown, _this);\r\n            _this.focusOut.add(function () {\r\n                if (PhaserInput.KeyboardOpen) {\r\n                    _this.endFocus();\r\n                    if (_this.inputOptions.zoom) {\r\n                        _this.zoomOut();\r\n                    }\r\n                }\r\n            });\r\n            return _this;\r\n        }\r\n        Object.defineProperty(InputField.prototype, \"width\", {\r\n            get: function () {\r\n                return this.inputOptions.width;\r\n            },\r\n            set: function (width) {\r\n                this.inputOptions.width = width;\r\n                this.box.resize(width);\r\n                this.textMask.resize(width);\r\n                this.updateTextAlignment();\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        InputField.prototype.updateTextAlignment = function () {\r\n            switch (this.inputOptions.textAlign) {\r\n                case 'left':\r\n                    this.text.anchor.set(0, 0);\r\n                    this.text.x = this.inputOptions.padding;\r\n                    if (null !== this.placeHolder) {\r\n                        this.placeHolder.anchor.set(0, 0);\r\n                    }\r\n                    this.cursor.x = this.inputOptions.padding + this.getCaretPosition();\r\n                    break;\r\n                case 'center':\r\n                    this.text.anchor.set(0.5, 0);\r\n                    this.text.x = this.inputOptions.padding + this.inputOptions.width / 2;\r\n                    if (null !== this.placeHolder) {\r\n                        this.placeHolder.anchor.set(0.5, 0);\r\n                        this.placeHolder.x = this.inputOptions.padding + this.inputOptions.width / 2;\r\n                    }\r\n                    this.cursor.x = this.inputOptions.padding + this.inputOptions.width / 2 - this.text.width / 2 + this.getCaretPosition();\r\n                    break;\r\n                case 'right':\r\n                    this.text.anchor.set(1, 0);\r\n                    this.text.x = this.inputOptions.padding + this.inputOptions.width;\r\n                    if (null !== this.placeHolder) {\r\n                        this.placeHolder.anchor.set(1, 0);\r\n                        this.placeHolder.x = this.inputOptions.padding + this.inputOptions.width;\r\n                    }\r\n                    this.cursor.x = this.inputOptions.padding + this.inputOptions.width;\r\n                    break;\r\n            }\r\n        };\r\n        InputField.prototype.checkDown = function (e) {\r\n            if (!this.value) {\r\n                this.resetText();\r\n            }\r\n            if (this.input.checkPointerOver(e)) {\r\n                if (this.focus) {\r\n                    this.setCaretOnclick(e);\r\n                    return;\r\n                }\r\n                if (this.inputOptions.zoom && !PhaserInput.Zoomed) {\r\n                    this.zoomIn();\r\n                }\r\n                this.startFocus();\r\n            }\r\n            else {\r\n                if (this.focus === true) {\r\n                    this.endFocus();\r\n                    if (this.inputOptions.zoom) {\r\n                        this.zoomOut();\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        InputField.prototype.update = function () {\r\n            this.text.update();\r\n            if (this.placeHolder) {\r\n                this.placeHolder.update();\r\n            }\r\n            if (!this.focus) {\r\n                return;\r\n            }\r\n            if (this.cnt !== 30) {\r\n                return this.cnt++;\r\n            }\r\n            this.cursor.visible = this.blink;\r\n            this.blink = !this.blink;\r\n            this.cnt = 0;\r\n        };\r\n        InputField.prototype.endFocus = function () {\r\n            var _this = this;\r\n            if (!this.focus) {\r\n                return;\r\n            }\r\n            this.domElement.removeEventListener();\r\n            if (this.blockInput === true) {\r\n                this.domElement.unblockKeyDownEvents();\r\n            }\r\n            this.focus = false;\r\n            if (this.value.length === 0 && null !== this.placeHolder) {\r\n                this.placeHolder.visible = true;\r\n            }\r\n            this.cursor.visible = false;\r\n            if (this.game.device.desktop) {\r\n                setTimeout(function () {\r\n                    _this.domElement.blur();\r\n                }, 0);\r\n            }\r\n            else {\r\n                this.domElement.blur();\r\n            }\r\n            if (!this.game.device.desktop) {\r\n                PhaserInput.KeyboardOpen = false;\r\n                PhaserInput.onKeyboardClose.dispatch();\r\n            }\r\n        };\r\n        InputField.prototype.startFocus = function () {\r\n            var _this = this;\r\n            this.focus = true;\r\n            if (null !== this.placeHolder) {\r\n                this.placeHolder.visible = false;\r\n            }\r\n            if (this.game.device.desktop) {\r\n                setTimeout(function () {\r\n                    _this.keyUpProcessor();\r\n                }, 0);\r\n            }\r\n            else {\r\n                this.keyUpProcessor();\r\n            }\r\n            if (!this.game.device.desktop) {\r\n                PhaserInput.KeyboardOpen = true;\r\n                PhaserInput.onKeyboardOpen.dispatch();\r\n            }\r\n        };\r\n        InputField.prototype.keyUpProcessor = function () {\r\n            this.domElement.addKeyUpListener(this.keyListener.bind(this));\r\n            this.domElement.focus();\r\n            if (this.blockInput === true) {\r\n                this.domElement.blockKeyDownEvents();\r\n            }\r\n        };\r\n        InputField.prototype.updateText = function () {\r\n            var text = '';\r\n            if (this.inputOptions.type === PhaserInput.InputType.password) {\r\n                for (var i = 0; i < this.value.length; i++) {\r\n                    text += '*';\r\n                }\r\n            }\r\n            else if (this.inputOptions.type === PhaserInput.InputType.number) {\r\n                var val = parseInt(this.value);\r\n                if (val < parseInt(this.inputOptions.min)) {\r\n                    text = this.value = this.domElement.value = this.inputOptions.min;\r\n                }\r\n                else if (val > parseInt(this.inputOptions.max)) {\r\n                    text = this.value = this.domElement.value = this.inputOptions.max;\r\n                }\r\n                else {\r\n                    text = this.value;\r\n                }\r\n            }\r\n            else {\r\n                text = this.value;\r\n            }\r\n            this.text.setText(text);\r\n            if (this.text.width > this.inputOptions.width) {\r\n                this.text.anchor.x = 1;\r\n                this.text.x = this.inputOptions.padding + this.inputOptions.width;\r\n            }\r\n            else {\r\n                switch (this.inputOptions.textAlign) {\r\n                    case 'left':\r\n                        this.text.anchor.set(0, 0);\r\n                        this.text.x = this.inputOptions.padding;\r\n                        break;\r\n                    case 'center':\r\n                        this.text.anchor.set(0.5, 0);\r\n                        this.text.x = this.inputOptions.padding + this.inputOptions.width / 2;\r\n                        break;\r\n                    case 'right':\r\n                        this.text.anchor.set(1, 0);\r\n                        this.text.x = this.inputOptions.padding + this.inputOptions.width;\r\n                        break;\r\n                }\r\n            }\r\n        };\r\n        InputField.prototype.updateCursor = function () {\r\n            if (this.text.width > this.inputOptions.width || this.inputOptions.textAlign === 'right') {\r\n                this.cursor.x = this.inputOptions.padding + this.inputOptions.width;\r\n            }\r\n            else {\r\n                switch (this.inputOptions.textAlign) {\r\n                    case 'left':\r\n                        this.cursor.x = this.inputOptions.padding + this.getCaretPosition();\r\n                        break;\r\n                    case 'center':\r\n                        this.cursor.x = this.inputOptions.padding + this.inputOptions.width / 2 - this.text.width / 2 + this.getCaretPosition();\r\n                        break;\r\n                }\r\n            }\r\n        };\r\n        InputField.prototype.getCaretPosition = function () {\r\n            var caretPosition = this.domElement.getCaretPosition();\r\n            if (-1 === caretPosition) {\r\n                return this.text.width;\r\n            }\r\n            var text = this.value;\r\n            if (this.inputOptions.type === PhaserInput.InputType.password) {\r\n                text = '';\r\n                for (var i = 0; i < this.value.length; i++) {\r\n                    text += '*';\r\n                }\r\n            }\r\n            this.offscreenText.setText(text.slice(0, caretPosition));\r\n            return this.offscreenText.width;\r\n        };\r\n        InputField.prototype.setCaretOnclick = function (e) {\r\n            var localX = (this.text.toLocal(new PIXI.Point(e.x, e.y), this.game.world)).x;\r\n            if (this.inputOptions.textAlign && this.inputOptions.textAlign === 'center') {\r\n                localX += this.text.width / 2;\r\n            }\r\n            var characterWidth = this.text.width / this.value.length;\r\n            var index = 0;\r\n            for (var i = 0; i < this.value.length; i++) {\r\n                if (localX >= i * characterWidth && localX <= (i + 1) * characterWidth) {\r\n                    index = i;\r\n                    break;\r\n                }\r\n            }\r\n            if (localX > (this.value.length - 1) * characterWidth) {\r\n                index = this.value.length;\r\n            }\r\n            this.startFocus();\r\n            this.domElement.setCaretPosition(index);\r\n            this.updateCursor();\r\n        };\r\n        InputField.prototype.updateSelection = function () {\r\n            if (this.domElement.hasSelection) {\r\n                var text = this.value;\r\n                if (this.inputOptions.type === PhaserInput.InputType.password) {\r\n                    text = '';\r\n                    for (var i = 0; i < this.value.length; i++) {\r\n                        text += '*';\r\n                    }\r\n                }\r\n                text = text.substring(this.domElement.caretStart, this.domElement.caretEnd);\r\n                this.offscreenText.setText(text);\r\n                this.selection.updateSelection(this.offscreenText.getBounds());\r\n                switch (this.inputOptions.textAlign) {\r\n                    case 'left':\r\n                        this.selection.x = this.inputOptions.padding;\r\n                        break;\r\n                    case 'center':\r\n                        this.selection.x = this.inputOptions.padding + this.inputOptions.width / 2 - this.text.width / 2;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                this.selection.clear();\r\n            }\r\n        };\r\n        InputField.prototype.zoomIn = function () {\r\n            if (PhaserInput.Zoomed) {\r\n                return;\r\n            }\r\n            var bounds = this.getBounds();\r\n            if (window.innerHeight > window.innerWidth) {\r\n                this.windowScale = this.game.width / (bounds.width * 1.5);\r\n            }\r\n            else {\r\n                this.windowScale = (this.game.width / 2) / (bounds.width * 1.5);\r\n            }\r\n            var offsetX = ((this.game.width - bounds.width * 1.5) / 2) / this.windowScale;\r\n            this.game.world.scale.set(this.game.world.scale.x * this.windowScale, this.game.world.scale.y * this.windowScale);\r\n            this.game.world.pivot.set(bounds.x - offsetX, bounds.y - this.inputOptions.padding * 2);\r\n            PhaserInput.Zoomed = true;\r\n        };\r\n        InputField.prototype.zoomOut = function () {\r\n            if (!PhaserInput.Zoomed) {\r\n                return;\r\n            }\r\n            this.game.world.scale.set(this.game.world.scale.x / this.windowScale, this.game.world.scale.y / this.windowScale);\r\n            this.game.world.pivot.set(0, 0);\r\n            PhaserInput.Zoomed = false;\r\n        };\r\n        InputField.prototype.keyListener = function (evt) {\r\n            this.value = this.getFormattedText(this.domElement.value);\r\n            if (evt.keyCode === 13) {\r\n                if (this.focusOutOnEnter) {\r\n                    this.endFocus();\r\n                }\r\n                return;\r\n            }\r\n            this.updateText();\r\n            this.updateCursor();\r\n            this.updateSelection();\r\n            evt.preventDefault();\r\n        };\r\n        InputField.prototype.destroy = function (destroyChildren) {\r\n            this.game.input.onDown.remove(this.checkDown, this);\r\n            this.focusIn.removeAll();\r\n            this.focusOut.removeAll();\r\n            this.domElement.destroy();\r\n            _super.prototype.destroy.call(this, destroyChildren);\r\n        };\r\n        InputField.prototype.resetText = function () {\r\n            this.setText();\r\n        };\r\n        InputField.prototype.setText = function (text) {\r\n            if (text === void 0) { text = ''; }\r\n            if (null !== this.placeHolder) {\r\n                if (text.length > 0) {\r\n                    this.placeHolder.visible = false;\r\n                }\r\n                else {\r\n                    this.placeHolder.visible = true;\r\n                }\r\n            }\r\n            this.value = this.getFormattedText(text);\r\n            this.domElement.value = this.value;\r\n            this.updateText();\r\n            this.updateCursor();\r\n            this.endFocus();\r\n        };\r\n        InputField.prototype.getFormattedText = function (text) {\r\n            switch (this.inputOptions.forceCase) {\r\n                default:\r\n                case ForceCase.none:\r\n                    return text;\r\n                case ForceCase.lower:\r\n                    return text.toLowerCase();\r\n                case ForceCase.upper:\r\n                    return text.toUpperCase();\r\n            }\r\n        };\r\n        return InputField;\r\n    }(Phaser.Sprite));\r\n    PhaserInput.InputField = InputField;\r\n})(PhaserInput || (PhaserInput = {}));\r\nvar PhaserInput;\r\n(function (PhaserInput) {\r\n    var InputBox = (function (_super) {\r\n        __extends(InputBox, _super);\r\n        function InputBox(game, inputOptions) {\r\n            var _this = _super.call(this, game, 0, 0) || this;\r\n            _this.bgColor = (inputOptions.backgroundColor) ? parseInt(inputOptions.backgroundColor.slice(1), 16) : 0xffffff;\r\n            _this.borderRadius = inputOptions.borderRadius = (typeof inputOptions.borderRadius === 'number') ? inputOptions.borderRadius : 0;\r\n            _this.borderWidth = inputOptions.borderWidth = (typeof inputOptions.borderWidth === 'number') ? inputOptions.borderWidth : 1;\r\n            _this.borderColor = (inputOptions.borderColor) ? parseInt(inputOptions.borderColor.slice(1), 16) : 0x959595;\r\n            _this.boxAlpha = inputOptions.fillAlpha;\r\n            _this.padding = inputOptions.padding;\r\n            var height = inputOptions.height;\r\n            var width = inputOptions.width;\r\n            var height;\r\n            if (inputOptions.font) {\r\n                height = Math.max(parseInt(inputOptions.font.substr(0, inputOptions.font.indexOf('px')), 10), height);\r\n            }\r\n            _this.boxHeight = _this.padding * 2 + height;\r\n            var width = inputOptions.width;\r\n            _this.boxWidth = _this.padding * 2 + width;\r\n            _this.drawBox();\r\n            return _this;\r\n        }\r\n        InputBox.prototype.resize = function (newWidth) {\r\n            this.boxWidth = this.padding * 2 + newWidth;\r\n            this.drawBox();\r\n        };\r\n        InputBox.prototype.drawBox = function () {\r\n            this.clear()\r\n                .beginFill(this.bgColor, this.boxAlpha)\r\n                .lineStyle(this.borderWidth, this.borderColor, this.boxAlpha);\r\n            if (this.borderRadius > 0) {\r\n                this.drawRoundedRect(0, 0, this.boxWidth, this.boxHeight, this.borderRadius);\r\n            }\r\n            else {\r\n                this.drawRect(0, 0, this.boxWidth, this.boxHeight);\r\n            }\r\n        };\r\n        return InputBox;\r\n    }(Phaser.Graphics));\r\n    PhaserInput.InputBox = InputBox;\r\n})(PhaserInput || (PhaserInput = {}));\r\nvar PhaserInput;\r\n(function (PhaserInput) {\r\n    var SelectionHighlight = (function (_super) {\r\n        __extends(SelectionHighlight, _super);\r\n        function SelectionHighlight(game, inputOptions) {\r\n            var _this = _super.call(this, game, inputOptions.padding, inputOptions.padding) || this;\r\n            _this.inputOptions = inputOptions;\r\n            return _this;\r\n        }\r\n        SelectionHighlight.prototype.updateSelection = function (rect) {\r\n            var color = Phaser.Color.webToColor(this.inputOptions.selectionColor);\r\n            this.clear();\r\n            this.beginFill(SelectionHighlight.rgb2hex(color), color.a);\r\n            this.drawRect(rect.x, rect.y, rect.width, rect.height - this.inputOptions.padding);\r\n        };\r\n        SelectionHighlight.rgb2hex = function (color) {\r\n            return parseInt((\"0\" + color.r.toString(16)).slice(-2) +\r\n                (\"0\" + color.g.toString(16)).slice(-2) +\r\n                (\"0\" + color.b.toString(16)).slice(-2), 16);\r\n        };\r\n        return SelectionHighlight;\r\n    }(Phaser.Graphics));\r\n    PhaserInput.SelectionHighlight = SelectionHighlight;\r\n})(PhaserInput || (PhaserInput = {}));\r\nvar PhaserInput;\r\n(function (PhaserInput) {\r\n    var TextMask = (function (_super) {\r\n        __extends(TextMask, _super);\r\n        function TextMask(game, inputOptions) {\r\n            var _this = _super.call(this, game, inputOptions.padding, inputOptions.padding) || this;\r\n            var height = inputOptions.height;\r\n            if (inputOptions.font) {\r\n                height = Math.max(parseInt(inputOptions.font.substr(0, inputOptions.font.indexOf('px')), 10), height);\r\n            }\r\n            _this.maskWidth = inputOptions.width;\r\n            _this.maskHeight = height * 1.3;\r\n            _this.drawMask();\r\n            return _this;\r\n        }\r\n        TextMask.prototype.resize = function (newWidth) {\r\n            this.maskWidth = newWidth;\r\n            this.drawMask();\r\n        };\r\n        TextMask.prototype.drawMask = function () {\r\n            this.clear()\r\n                .beginFill(0x000000)\r\n                .drawRect(0, 0, this.maskWidth, this.maskHeight)\r\n                .endFill();\r\n        };\r\n        return TextMask;\r\n    }(Phaser.Graphics));\r\n    PhaserInput.TextMask = TextMask;\r\n})(PhaserInput || (PhaserInput = {}));\r\nvar PhaserInput;\r\n(function (PhaserInput) {\r\n    PhaserInput.Zoomed = false;\r\n    PhaserInput.KeyboardOpen = false;\r\n    PhaserInput.onKeyboardOpen = new Phaser.Signal();\r\n    PhaserInput.onKeyboardClose = new Phaser.Signal();\r\n    var Plugin = (function (_super) {\r\n        __extends(Plugin, _super);\r\n        function Plugin(game, parent) {\r\n            var _this = _super.call(this, game, parent) || this;\r\n            _this.addInputFieldFactory();\r\n            return _this;\r\n        }\r\n        Plugin.prototype.addInputFieldFactory = function () {\r\n            Phaser.GameObjectFactory.prototype.inputField = function (x, y, inputOptions, group) {\r\n                if (group === undefined) {\r\n                    group = this.world;\r\n                }\r\n                var nineSliceObject = new PhaserInput.InputField(this.game, x, y, inputOptions);\r\n                return group.add(nineSliceObject);\r\n            };\r\n            Phaser.GameObjectCreator.prototype.inputField = function (x, y, inputOptions) {\r\n                return new PhaserInput.InputField(this.game, x, y, inputOptions);\r\n            };\r\n        };\r\n        return Plugin;\r\n    }(Phaser.Plugin));\r\n    Plugin.Zoomed = false;\r\n    Plugin.KeyboardOpen = false;\r\n    Plugin.onKeyboardOpen = new Phaser.Signal();\r\n    Plugin.onKeyboardClose = new Phaser.Signal();\r\n    PhaserInput.Plugin = Plugin;\r\n})(PhaserInput || (PhaserInput = {}));\r\n//# sourceMappingURL=phaser-input.js.map"]},"metadata":{},"sourceType":"script"}