{"ast":null,"code":"import TextStyle from '../textbase/textstyle/TextStyle.js';\nvar GETPROP_RESULT = {\n  plainText: null,\n  prevProp: null\n};\nvar STYLE_RESULT = new TextStyle();\nvar EMPTYPROP = {};\nvar parser = {\n  splitText: function (text, mode) {\n    var result = [];\n    var arr,\n        m,\n        charIdx = 0,\n        totalLen = text.length,\n        matchStart = totalLen;\n\n    while (true) {\n      arr = RE_SPLITTEXT.exec(text);\n\n      if (!arr) {\n        break;\n      }\n\n      m = arr[0];\n      matchStart = RE_SPLITTEXT.lastIndex - m.length;\n\n      if (charIdx < matchStart) {\n        result.push(text.substring(charIdx, matchStart));\n      }\n\n      if (mode === undefined) {\n        result.push(m);\n      }\n\n      charIdx = RE_SPLITTEXT.lastIndex;\n    }\n\n    if (charIdx < totalLen) {\n      result.push(text.substring(charIdx, totalLen));\n    }\n\n    return result; // [text,...]\n  },\n  tagTextToProp: function (text, prevProp) {\n    var plainText, innerMatch;\n\n    if (prevProp == null) {\n      prevProp = {};\n    } // close image tag\n\n\n    if (prevProp.img) {\n      updateProp(prevProp, PROP_REMOVE, 'img');\n    } // Check if current fragment is a class tag\n\n\n    if (RE_BLOD_OPEN.test(text)) {\n      updateProp(prevProp, PROP_ADD, 'b', true);\n      plainText = '';\n    } else if (RE_BLOD_CLOSE.test(text)) {\n      updateProp(prevProp, PROP_REMOVE, 'b');\n      plainText = '';\n    } else if (RE_ITALICS_OPEN.test(text)) {\n      updateProp(prevProp, PROP_ADD, 'i', true);\n      plainText = '';\n    } else if (RE_ITALICS_CLOSE.test(text)) {\n      updateProp(prevProp, PROP_REMOVE, 'i');\n      plainText = '';\n    } else if (RE_SIZE_OPEN.test(text)) {\n      innerMatch = text.match(RE_SIZE_OPEN);\n      updateProp(prevProp, PROP_ADD, 'size', innerMatch[1] + 'px');\n      plainText = '';\n    } else if (RE_SIZE_CLOSE.test(text)) {\n      updateProp(prevProp, PROP_REMOVE, 'size');\n      plainText = '';\n    } else if (RE_COLOR_OPEN.test(text)) {\n      innerMatch = text.match(RE_COLOR_OPEN);\n      updateProp(prevProp, PROP_ADD, 'color', innerMatch[1]);\n      plainText = '';\n    } else if (RE_COLOR_CLOSE.test(text)) {\n      updateProp(prevProp, PROP_REMOVE, 'color');\n      plainText = '';\n    } else if (RE_UNDERLINE_OPEN.test(text)) {\n      innerMatch = text.match(RE_UNDERLINE_OPEN);\n      updateProp(prevProp, PROP_ADD, 'u', true);\n      plainText = '';\n    } else if (RE_UNDERLINE_OPENC.test(text)) {\n      innerMatch = text.match(RE_UNDERLINE_OPENC);\n      updateProp(prevProp, PROP_ADD, 'u', innerMatch[1]);\n      plainText = '';\n    } else if (RE_UNDERLINE_CLOSE.test(text)) {\n      updateProp(prevProp, PROP_REMOVE, 'u');\n      plainText = '';\n    } else if (RE_SHADOW_OPEN.test(text)) {\n      updateProp(prevProp, PROP_ADD, 'shadow', true);\n      plainText = '';\n    } else if (RE_SHADOW_CLOSE.test(text)) {\n      updateProp(prevProp, PROP_REMOVE, 'shadow');\n      plainText = '';\n    } else if (RE_STROKE_OPEN.test(text)) {\n      updateProp(prevProp, PROP_ADD, 'stroke', true);\n      plainText = '';\n    } else if (RE_STROKE_OPENC.test(text)) {\n      innerMatch = text.match(RE_STROKE_OPENC);\n      updateProp(prevProp, PROP_ADD, 'stroke', innerMatch[1]);\n      plainText = '';\n    } else if (RE_STROKE_CLOSE.test(text)) {\n      updateProp(prevProp, PROP_REMOVE, 'stroke');\n      plainText = '';\n    } else if (RE_IMAGE_OPEN.test(text)) {\n      innerMatch = text.match(RE_IMAGE_OPEN);\n      updateProp(prevProp, PROP_ADD, 'img', innerMatch[1]);\n      plainText = '';\n    } else if (RE_IMAGE_CLOSE.test(text)) {\n      updateProp(prevProp, PROP_REMOVE, 'img');\n      plainText = '';\n    } else if (RE_AREA_OPEN.test(text)) {\n      innerMatch = text.match(RE_AREA_OPEN);\n      updateProp(prevProp, PROP_ADD, 'area', innerMatch[1]);\n      plainText = '';\n    } else if (RE_AREA_CLOSE.test(text)) {\n      updateProp(prevProp, PROP_REMOVE, 'area');\n      plainText = '';\n    } else {\n      plainText = text;\n    }\n\n    var result = GETPROP_RESULT;\n    result.plainText = plainText;\n    result.prop = prevProp;\n    return result;\n  },\n  propToContextStyle: function (defaultStyle, prop) {\n    var result = STYLE_RESULT;\n\n    if (!prop.hasOwnProperty('img')) {\n      result.image = null;\n\n      if (prop.hasOwnProperty('family')) {\n        result.fontFamily = prop.family;\n      } else {\n        result.fontFamily = defaultStyle.fontFamily;\n      }\n\n      if (prop.hasOwnProperty('size')) {\n        var size = prop.size;\n\n        if (typeof size === 'number') {\n          size = size.toString() + 'px';\n        }\n\n        result.fontSize = size;\n      } else {\n        result.fontSize = defaultStyle.fontSize;\n      }\n\n      result.fontStyle = getFontStyle(prop.b, prop.i);\n\n      if (prop.hasOwnProperty('color')) {\n        result.color = prop.color;\n      } else {\n        result.color = defaultStyle.color;\n      }\n\n      if (prop.hasOwnProperty('stroke')) {\n        if (prop.stroke === true) {\n          result.stroke = defaultStyle.stroke;\n          result.strokeThickness = defaultStyle.strokeThickness;\n        } else {\n          result.stroke = prop.stroke;\n          result.strokeThickness = defaultStyle.strokeThickness;\n        }\n      } else {\n        result.stroke = defaultStyle.stroke;\n        result.strokeThickness = 0;\n      }\n    } else {\n      result.image = prop.img;\n    }\n\n    if (prop.hasOwnProperty('shadow')) {\n      if (prop.shadow === true) {\n        result.shadowColor = defaultStyle.shadowColor;\n        result.shadowOffsetX = defaultStyle.shadowOffsetX;\n        result.shadowOffsetY = defaultStyle.shadowOffsetY;\n        result.shadowBlur = defaultStyle.shadowBlur;\n        result.shadowStroke = true;\n        result.shadowFill = true;\n      } else {\n        result.shadowColor = prop.shadow;\n        result.shadowOffsetX = defaultStyle.shadowOffsetX;\n        result.shadowOffsetY = defaultStyle.shadowOffsetY;\n        result.shadowBlur = defaultStyle.shadowBlur;\n        result.shadowStroke = true;\n        result.shadowFill = true;\n      }\n    } else {\n      result.shadowColor = '#000';\n      result.shadowOffsetX = 0;\n      result.shadowOffsetY = 0;\n      result.shadowBlur = 0;\n      result.shadowStroke = false;\n      result.shadowFill = false;\n    }\n\n    if (prop.hasOwnProperty('u')) {\n      if (prop.u === true) {\n        result.underlineColor = defaultStyle.underlineColor;\n        result.underlineThickness = defaultStyle.underlineThickness;\n        result.underlineOffset = defaultStyle.underlineOffset;\n      } else {\n        result.underlineColor = prop.u;\n        result.underlineThickness = defaultStyle.underlineThickness;\n        result.underlineOffset = defaultStyle.underlineOffset;\n      }\n    } else {\n      result.underlineColor = '#000';\n      result.underlineThickness = 0;\n      result.underlineOffset = 0;\n    }\n\n    return result;\n  },\n  propToTagText: function (text, prop, prevProp) {\n    if (prevProp == null) {\n      prevProp = EMPTYPROP;\n    }\n\n    for (var k in prevProp) {\n      if (prop.hasOwnProperty(k)) {\n        continue;\n      }\n\n      text = '[/' + k + ']' + text;\n    }\n\n    var header = '';\n\n    for (var k in prop) {\n      if (prevProp[k] === prop[k]) {\n        continue;\n      }\n\n      if (k === 'size') {\n        header += '[size=' + prop[k].replace('px', '') + ']';\n      } else if (k === 'color' || k === 'stroke' || k === 'img') {\n        header += '[' + k + '=' + prop[k] + ']';\n      } else if (k === 'u') {\n        if (prop[k] === true) {\n          header += '[u]';\n        } else {\n          header += '[u=' + prop[k] + ']';\n        }\n      } else {\n        header += '[' + k + ']';\n      }\n    }\n\n    text = header + text;\n    return text;\n  }\n};\n\nvar updateProp = function (prop, op, key, value) {\n  if (op === PROP_ADD) {\n    // PROP_ADD     \n    prop[key] = value;\n  } else {\n    // PROP_REMOVE        \n    if (prop.hasOwnProperty(key)) {\n      delete prop[key];\n    }\n  }\n\n  return prop;\n};\n\nvar getFontStyle = function (isBold, isItalic) {\n  if (isBold && isItalic) {\n    return 'bold italic';\n  } else if (isBold) {\n    return 'bold';\n  } else if (isItalic) {\n    return 'italic';\n  } else {\n    return '';\n  }\n};\n\nvar RE_SPLITTEXT = /\\[b\\]|\\[\\/b\\]|\\[i\\]|\\[\\/i\\]|\\[size=(\\d+)\\]|\\[\\/size\\]|\\[color=([a-z]+|#[0-9abcdef]+)\\]|\\[\\/color\\]|\\[u\\]|\\[u=([a-z]+|#[0-9abcdef]+)\\]|\\[\\/u\\]|\\[shadow\\]|\\[\\/shadow\\]|\\[stroke\\]|\\[stroke=([a-z]+|#[0-9abcdef]+)\\]|\\[\\/stroke\\]|\\[img=([^\\]]+)\\]|\\[\\/img\\]|\\[area=([^\\]]+)\\]|\\[\\/area\\]/ig;\nvar RE_BLOD_OPEN = /\\[b\\]/i;\nvar RE_BLOD_CLOSE = /\\[\\/b\\]/i;\nvar RE_ITALICS_OPEN = /\\[i\\]/i;\nvar RE_ITALICS_CLOSE = /\\[\\/i\\]/i;\nvar RE_SIZE_OPEN = /\\[size=(\\d+)\\]/i;\nvar RE_SIZE_CLOSE = /\\[\\/size\\]/i;\nvar RE_COLOR_OPEN = /\\[color=([a-z]+|#[0-9abcdef]+)\\]/i;\nvar RE_COLOR_CLOSE = /\\[\\/color\\]/i;\nvar RE_UNDERLINE_OPEN = /\\[u\\]/i;\nvar RE_UNDERLINE_OPENC = /\\[u=([a-z]+|#[0-9abcdef]+)\\]/i;\nvar RE_UNDERLINE_CLOSE = /\\[\\/u\\]/i;\nvar RE_SHADOW_OPEN = /\\[shadow\\]/i;\nvar RE_SHADOW_CLOSE = /\\[\\/shadow\\]/i;\nvar RE_STROKE_OPEN = /\\[stroke\\]/i;\nvar RE_STROKE_OPENC = /\\[stroke=([a-z]+|#[0-9abcdef]+)\\]/i;\nvar RE_STROKE_CLOSE = /\\[\\/stroke\\]/i;\nvar RE_IMAGE_OPEN = /\\[img=([^\\]]+)\\]/i;\nvar RE_IMAGE_CLOSE = /\\[\\/img\\]/i;\nvar RE_AREA_OPEN = /\\[area=([^\\]]+)\\]/i;\nvar RE_AREA_CLOSE = /\\[\\/area\\]/i;\nconst PROP_REMOVE = false;\nconst PROP_ADD = true;\nexport default parser;","map":{"version":3,"sources":["/home/jon/code/Projects/Soulys/frontend/node_modules/phaser3-rex-plugins/plugins/gameobjects/text/bbocdetext/Parser.js"],"names":["TextStyle","GETPROP_RESULT","plainText","prevProp","STYLE_RESULT","EMPTYPROP","parser","splitText","text","mode","result","arr","m","charIdx","totalLen","length","matchStart","RE_SPLITTEXT","exec","lastIndex","push","substring","undefined","tagTextToProp","innerMatch","img","updateProp","PROP_REMOVE","RE_BLOD_OPEN","test","PROP_ADD","RE_BLOD_CLOSE","RE_ITALICS_OPEN","RE_ITALICS_CLOSE","RE_SIZE_OPEN","match","RE_SIZE_CLOSE","RE_COLOR_OPEN","RE_COLOR_CLOSE","RE_UNDERLINE_OPEN","RE_UNDERLINE_OPENC","RE_UNDERLINE_CLOSE","RE_SHADOW_OPEN","RE_SHADOW_CLOSE","RE_STROKE_OPEN","RE_STROKE_OPENC","RE_STROKE_CLOSE","RE_IMAGE_OPEN","RE_IMAGE_CLOSE","RE_AREA_OPEN","RE_AREA_CLOSE","prop","propToContextStyle","defaultStyle","hasOwnProperty","image","fontFamily","family","size","toString","fontSize","fontStyle","getFontStyle","b","i","color","stroke","strokeThickness","shadow","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","shadowStroke","shadowFill","u","underlineColor","underlineThickness","underlineOffset","propToTagText","k","header","replace","op","key","value","isBold","isItalic"],"mappings":"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","sourcesContent":["import TextStyle from '../textbase/textstyle/TextStyle.js';\r\n\r\nvar GETPROP_RESULT = {\r\n    plainText: null,\r\n    prevProp: null\r\n};\r\n\r\nvar STYLE_RESULT = new TextStyle();\r\nvar EMPTYPROP = {};\r\n\r\nvar parser = {\r\n    splitText: function (text, mode) {\r\n        var result = [];\r\n        var arr, m, charIdx = 0,\r\n            totalLen = text.length,\r\n            matchStart = totalLen;\r\n\r\n        while (true) {\r\n            arr = RE_SPLITTEXT.exec(text);\r\n            if (!arr) {\r\n                break;\r\n            }\r\n\r\n            m = arr[0];\r\n            matchStart = RE_SPLITTEXT.lastIndex - m.length;\r\n\r\n            if (charIdx < matchStart) {\r\n                result.push(text.substring(charIdx, matchStart));\r\n            }\r\n\r\n            if (mode === undefined) {\r\n                result.push(m);\r\n            }\r\n\r\n            charIdx = RE_SPLITTEXT.lastIndex;\r\n        }\r\n\r\n        if (charIdx < totalLen) {\r\n            result.push(text.substring(charIdx, totalLen));\r\n        }\r\n        return result; // [text,...]\r\n    },\r\n\r\n    tagTextToProp: function (text, prevProp) {\r\n        var plainText, innerMatch;\r\n\r\n        if (prevProp == null) {\r\n            prevProp = {};\r\n        }\r\n\r\n        // close image tag\r\n        if (prevProp.img) {\r\n            updateProp(prevProp, PROP_REMOVE, 'img');\r\n        }\r\n        // Check if current fragment is a class tag\r\n        if (RE_BLOD_OPEN.test(text)) {\r\n            updateProp(prevProp, PROP_ADD, 'b', true);\r\n            plainText = '';\r\n        } else if (RE_BLOD_CLOSE.test(text)) {\r\n            updateProp(prevProp, PROP_REMOVE, 'b');\r\n            plainText = '';\r\n        } else if (RE_ITALICS_OPEN.test(text)) {\r\n            updateProp(prevProp, PROP_ADD, 'i', true);\r\n            plainText = '';\r\n        } else if (RE_ITALICS_CLOSE.test(text)) {\r\n            updateProp(prevProp, PROP_REMOVE, 'i');\r\n            plainText = '';\r\n        } else if (RE_SIZE_OPEN.test(text)) {\r\n            innerMatch = text.match(RE_SIZE_OPEN);\r\n            updateProp(prevProp, PROP_ADD, 'size', innerMatch[1] + 'px');\r\n            plainText = '';\r\n        } else if (RE_SIZE_CLOSE.test(text)) {\r\n            updateProp(prevProp, PROP_REMOVE, 'size');\r\n            plainText = '';\r\n        } else if (RE_COLOR_OPEN.test(text)) {\r\n            innerMatch = text.match(RE_COLOR_OPEN);\r\n            updateProp(prevProp, PROP_ADD, 'color', innerMatch[1]);\r\n            plainText = '';\r\n        } else if (RE_COLOR_CLOSE.test(text)) {\r\n            updateProp(prevProp, PROP_REMOVE, 'color');\r\n            plainText = '';\r\n        } else if (RE_UNDERLINE_OPEN.test(text)) {\r\n            innerMatch = text.match(RE_UNDERLINE_OPEN);\r\n            updateProp(prevProp, PROP_ADD, 'u', true);\r\n            plainText = '';\r\n        } else if (RE_UNDERLINE_OPENC.test(text)) {\r\n            innerMatch = text.match(RE_UNDERLINE_OPENC);\r\n            updateProp(prevProp, PROP_ADD, 'u', innerMatch[1]);\r\n            plainText = '';\r\n        } else if (RE_UNDERLINE_CLOSE.test(text)) {\r\n            updateProp(prevProp, PROP_REMOVE, 'u');\r\n            plainText = '';\r\n        } else if (RE_SHADOW_OPEN.test(text)) {\r\n            updateProp(prevProp, PROP_ADD, 'shadow', true);\r\n            plainText = '';\r\n        } else if (RE_SHADOW_CLOSE.test(text)) {\r\n            updateProp(prevProp, PROP_REMOVE, 'shadow');\r\n            plainText = '';\r\n        } else if (RE_STROKE_OPEN.test(text)) {\r\n            updateProp(prevProp, PROP_ADD, 'stroke', true);\r\n            plainText = '';\r\n        } else if (RE_STROKE_OPENC.test(text)) {\r\n            innerMatch = text.match(RE_STROKE_OPENC);\r\n            updateProp(prevProp, PROP_ADD, 'stroke', innerMatch[1]);\r\n            plainText = '';\r\n        } else if (RE_STROKE_CLOSE.test(text)) {\r\n            updateProp(prevProp, PROP_REMOVE, 'stroke');\r\n            plainText = '';\r\n        } else if (RE_IMAGE_OPEN.test(text)) {\r\n            innerMatch = text.match(RE_IMAGE_OPEN);\r\n            updateProp(prevProp, PROP_ADD, 'img', innerMatch[1]);\r\n            plainText = '';\r\n        } else if (RE_IMAGE_CLOSE.test(text)) {\r\n            updateProp(prevProp, PROP_REMOVE, 'img');\r\n            plainText = '';\r\n        } else if (RE_AREA_OPEN.test(text)) {\r\n            innerMatch = text.match(RE_AREA_OPEN);\r\n            updateProp(prevProp, PROP_ADD, 'area', innerMatch[1]);\r\n            plainText = '';\r\n        } else if (RE_AREA_CLOSE.test(text)) {\r\n            updateProp(prevProp, PROP_REMOVE, 'area');\r\n            plainText = '';            \r\n        } else {\r\n            plainText = text\r\n        }\r\n\r\n        var result = GETPROP_RESULT;\r\n        result.plainText = plainText;\r\n        result.prop = prevProp;\r\n        return result;\r\n    },\r\n\r\n    propToContextStyle: function (defaultStyle, prop) {\r\n        var result = STYLE_RESULT;\r\n        if (!prop.hasOwnProperty('img')) {\r\n            result.image = null;\r\n\r\n            if (prop.hasOwnProperty('family')) {\r\n                result.fontFamily = prop.family;\r\n            } else {\r\n                result.fontFamily = defaultStyle.fontFamily;\r\n            }\r\n\r\n            if (prop.hasOwnProperty('size')) {\r\n                var size = prop.size;\r\n                if (typeof (size) === 'number') {\r\n                    size = size.toString() + 'px';\r\n                }\r\n                result.fontSize = size;\r\n            } else {\r\n                result.fontSize = defaultStyle.fontSize;\r\n            }\r\n            result.fontStyle = getFontStyle(prop.b, prop.i);\r\n\r\n            if (prop.hasOwnProperty('color')) {\r\n                result.color = prop.color;\r\n            } else {\r\n                result.color = defaultStyle.color;\r\n            }\r\n\r\n            if (prop.hasOwnProperty('stroke')) {\r\n                if (prop.stroke === true) {\r\n                    result.stroke = defaultStyle.stroke;\r\n                    result.strokeThickness = defaultStyle.strokeThickness;\r\n                } else {\r\n                    result.stroke = prop.stroke;\r\n                    result.strokeThickness = defaultStyle.strokeThickness;\r\n                }\r\n            } else {\r\n                result.stroke = defaultStyle.stroke;\r\n                result.strokeThickness = 0;\r\n            }\r\n        } else {\r\n            result.image = prop.img;\r\n        }\r\n\r\n        if (prop.hasOwnProperty('shadow')) {\r\n            if (prop.shadow === true) {\r\n                result.shadowColor = defaultStyle.shadowColor;\r\n                result.shadowOffsetX = defaultStyle.shadowOffsetX;\r\n                result.shadowOffsetY = defaultStyle.shadowOffsetY;\r\n                result.shadowBlur = defaultStyle.shadowBlur;\r\n                result.shadowStroke = true;\r\n                result.shadowFill = true;\r\n            } else {\r\n                result.shadowColor = prop.shadow;\r\n                result.shadowOffsetX = defaultStyle.shadowOffsetX;\r\n                result.shadowOffsetY = defaultStyle.shadowOffsetY;\r\n                result.shadowBlur = defaultStyle.shadowBlur;\r\n                result.shadowStroke = true;\r\n                result.shadowFill = true;\r\n            }\r\n        } else {\r\n            result.shadowColor = '#000';\r\n            result.shadowOffsetX = 0;\r\n            result.shadowOffsetY = 0;\r\n            result.shadowBlur = 0;\r\n            result.shadowStroke = false;\r\n            result.shadowFill = false;\r\n        }\r\n\r\n        if (prop.hasOwnProperty('u')) {\r\n            if (prop.u === true) {\r\n                result.underlineColor = defaultStyle.underlineColor;\r\n                result.underlineThickness = defaultStyle.underlineThickness;\r\n                result.underlineOffset = defaultStyle.underlineOffset;\r\n            } else {\r\n                result.underlineColor = prop.u;\r\n                result.underlineThickness = defaultStyle.underlineThickness;\r\n                result.underlineOffset = defaultStyle.underlineOffset;\r\n            }\r\n        } else {\r\n            result.underlineColor = '#000';\r\n            result.underlineThickness = 0;\r\n            result.underlineOffset = 0;\r\n        }\r\n\r\n        return result;\r\n    },\r\n\r\n    propToTagText: function (text, prop, prevProp) {\r\n        if (prevProp == null) {\r\n            prevProp = EMPTYPROP;\r\n        }\r\n\r\n        for (var k in prevProp) {\r\n            if (prop.hasOwnProperty(k)) {\r\n                continue;\r\n            }\r\n\r\n            text = '[/' + k + ']' + text;\r\n        }\r\n\r\n        var header = '';\r\n        for (var k in prop) {\r\n            if (prevProp[k] === prop[k]) {\r\n                continue;\r\n            }\r\n\r\n            if (k === 'size') {\r\n                header += ('[size=' + prop[k].replace('px', '') + ']');\r\n            } else if ((k === 'color') || (k === 'stroke') || (k === 'img')) {\r\n                header += ('[' + k + '=' + prop[k] + ']');\r\n            } else if (k === 'u') {\r\n                if (prop[k] === true) {\r\n                    header += '[u]';\r\n                } else {\r\n                    header += ('[u=' + prop[k] + ']');\r\n                }\r\n            } else {\r\n                header += ('[' + k + ']');\r\n            }\r\n        }\r\n        text = header + text;\r\n\r\n        return text;\r\n    }\r\n};\r\n\r\nvar updateProp = function (prop, op, key, value) {\r\n    if (op === PROP_ADD) {\r\n        // PROP_ADD     \r\n        prop[key] = value;\r\n    } else {\r\n        // PROP_REMOVE        \r\n        if (prop.hasOwnProperty(key)) {\r\n            delete prop[key];\r\n        }\r\n    }\r\n\r\n    return prop;\r\n};\r\n\r\nvar getFontStyle = function (isBold, isItalic) {\r\n    if (isBold && isItalic) {\r\n        return 'bold italic';\r\n    } else if (isBold) {\r\n        return 'bold';\r\n    } else if (isItalic) {\r\n        return 'italic';\r\n    } else {\r\n        return '';\r\n    }\r\n};\r\n\r\nvar RE_SPLITTEXT = /\\[b\\]|\\[\\/b\\]|\\[i\\]|\\[\\/i\\]|\\[size=(\\d+)\\]|\\[\\/size\\]|\\[color=([a-z]+|#[0-9abcdef]+)\\]|\\[\\/color\\]|\\[u\\]|\\[u=([a-z]+|#[0-9abcdef]+)\\]|\\[\\/u\\]|\\[shadow\\]|\\[\\/shadow\\]|\\[stroke\\]|\\[stroke=([a-z]+|#[0-9abcdef]+)\\]|\\[\\/stroke\\]|\\[img=([^\\]]+)\\]|\\[\\/img\\]|\\[area=([^\\]]+)\\]|\\[\\/area\\]/ig;\r\n\r\nvar RE_BLOD_OPEN = /\\[b\\]/i;\r\nvar RE_BLOD_CLOSE = /\\[\\/b\\]/i;\r\nvar RE_ITALICS_OPEN = /\\[i\\]/i;\r\nvar RE_ITALICS_CLOSE = /\\[\\/i\\]/i;\r\nvar RE_SIZE_OPEN = /\\[size=(\\d+)\\]/i;\r\nvar RE_SIZE_CLOSE = /\\[\\/size\\]/i;\r\nvar RE_COLOR_OPEN = /\\[color=([a-z]+|#[0-9abcdef]+)\\]/i;\r\nvar RE_COLOR_CLOSE = /\\[\\/color\\]/i;\r\nvar RE_UNDERLINE_OPEN = /\\[u\\]/i;\r\nvar RE_UNDERLINE_OPENC = /\\[u=([a-z]+|#[0-9abcdef]+)\\]/i;\r\nvar RE_UNDERLINE_CLOSE = /\\[\\/u\\]/i;\r\nvar RE_SHADOW_OPEN = /\\[shadow\\]/i;\r\nvar RE_SHADOW_CLOSE = /\\[\\/shadow\\]/i;\r\nvar RE_STROKE_OPEN = /\\[stroke\\]/i;\r\nvar RE_STROKE_OPENC = /\\[stroke=([a-z]+|#[0-9abcdef]+)\\]/i;\r\nvar RE_STROKE_CLOSE = /\\[\\/stroke\\]/i;\r\nvar RE_IMAGE_OPEN = /\\[img=([^\\]]+)\\]/i;\r\nvar RE_IMAGE_CLOSE = /\\[\\/img\\]/i;\r\nvar RE_AREA_OPEN = /\\[area=([^\\]]+)\\]/i;\r\nvar RE_AREA_CLOSE = /\\[\\/area\\]/i;\r\nconst PROP_REMOVE = false;\r\nconst PROP_ADD = true;\r\n\r\nexport default parser;"]},"metadata":{},"sourceType":"module"}