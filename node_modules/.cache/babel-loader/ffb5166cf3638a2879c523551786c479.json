{"ast":null,"code":"import Label from '../label/Label.js';\nimport Const from './Const.js';\nimport DefaultTransitCallbacks from './DefaultTransitCallbacks.js';\nimport Player from '../../../plugins/logic/runcommands/tcrp/Player.js';\nimport NOOP from '../../../plugins/utils/object/NOOP.js';\nconst GetValue = Phaser.Utils.Objects.GetValue;\n\nclass Toast extends Label {\n  constructor(scene, config) {\n    if (config === undefined) {\n      config = {\n        text: createDefaultTextObject(scene)\n      };\n    }\n\n    super(scene, config);\n    this.type = 'rexToast';\n    this.setTransitInTime(GetValue(config, 'duration.in', 200));\n    this.setDisplayTime(GetValue(config, 'duration.hold', 1200));\n    this.setTransitOutTime(GetValue(config, 'duration.out', 200));\n    this.setTransitInCallback(GetValue(config, 'transitIn', Const.popUp));\n    this.setTransitOutCallback(GetValue(config, 'transitOut', Const.scaleDown));\n    this.player = new Player(this, {\n      dtMode: 1\n    });\n    this.messages = [];\n    this.setVisible(false);\n  }\n\n  destroy(fromScene) {\n    //  This Game Object has already been destroyed\n    if (!this.scene) {\n      return;\n    }\n\n    this.player.destroy();\n    this.player = undefined;\n    this.messages = undefined;\n    super.destroy(fromScene);\n  }\n\n  setDisplayTime(time) {\n    this.displayTime = time;\n    return this;\n  }\n\n  setTransitOutTime(time) {\n    this.transitOutTime = time;\n    return this;\n  }\n\n  setTransitInTime(time) {\n    this.transitInTime = time;\n    return this;\n  }\n\n  setTransitInCallback(callback) {\n    if (typeof callback === 'string') {\n      callback = Const[callback];\n    }\n\n    switch (callback) {\n      case Const.popUp:\n        callback = DefaultTransitCallbacks.popUp;\n        break;\n\n      case Const.fadeIn:\n        callback = DefaultTransitCallbacks.fadeIn;\n        break;\n    }\n\n    this.transitInCallback = callback; // callback = function(gameObject, duration) {}\n\n    return this;\n  }\n\n  setTransitOutCallback(callback) {\n    if (typeof callback === 'string') {\n      callback = Const[callback];\n    }\n\n    switch (callback) {\n      case Const.scaleDown:\n        callback = DefaultTransitCallbacks.scaleDown;\n        break;\n\n      case Const.fadeOut:\n        callback = DefaultTransitCallbacks.fadeOut;\n        break;\n    }\n\n    this.transitOutCallback = callback; // callback = function(gameObject, duration) {}\n\n    return this;\n  }\n\n  show(callback) {\n    if (callback === undefined) {\n      // Try pop up a pendding message\n      if (this.messages.length === 0) {\n        return this;\n      }\n\n      callback = this.messages.shift();\n    }\n\n    if (this.player.isPlaying) {\n      // Pend message\n      this.messages.push(callback);\n      return this;\n    } // Recover to initial state\n\n\n    this.setScale(1, 1).setVisible(true);\n\n    if (typeof callback === 'string') {\n      this.setText(callback);\n    } else {\n      callback(this);\n    }\n\n    this.layout();\n    var commands = [[// Transit-in\n    0, // time\n    [this.transitInCallback, this, this.transitInTime] // [callback, param, ...]\n    ], [// Hold\n    this.transitInTime, [NOOP]], [// Transit-out\n    this.displayTime, [this.transitOutCallback, this, this.transitOutTime]], [// End\n    this.transitOutTime, [this.setVisible, false]], [// Complete - show next message\n    30, // Add a small delay before complete\n    [NOOP]]];\n    this.player.load(commands, this).once('complete', function () {\n      this.show();\n    }, this).start();\n    return this;\n  }\n\n}\n\nexport default Toast;","map":{"version":3,"sources":["/home/jon/code/Projects/Soulys/frontend/node_modules/phaser3-rex-plugins/templates/ui/toast/Toast.js"],"names":["Label","Const","DefaultTransitCallbacks","Player","NOOP","GetValue","Phaser","Utils","Objects","Toast","constructor","scene","config","undefined","text","createDefaultTextObject","type","setTransitInTime","setDisplayTime","setTransitOutTime","setTransitInCallback","popUp","setTransitOutCallback","scaleDown","player","dtMode","messages","setVisible","destroy","fromScene","time","displayTime","transitOutTime","transitInTime","callback","fadeIn","transitInCallback","fadeOut","transitOutCallback","show","length","shift","isPlaying","push","setScale","setText","layout","commands","load","once","start"],"mappings":"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","sourcesContent":["import Label from '../label/Label.js';\r\nimport Const from './Const.js';\r\nimport DefaultTransitCallbacks from './DefaultTransitCallbacks.js';\r\nimport Player from '../../../plugins/logic/runcommands/tcrp/Player.js';\r\nimport NOOP from '../../../plugins/utils/object/NOOP.js';\r\n\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\n\r\nclass Toast extends Label {\r\n    constructor(scene, config) {\r\n        if (config === undefined) {\r\n            config = {\r\n                text: createDefaultTextObject(scene)\r\n            }\r\n        }\r\n\r\n        super(scene, config);\r\n        this.type = 'rexToast';\r\n\r\n        this.setTransitInTime(GetValue(config, 'duration.in', 200));\r\n        this.setDisplayTime(GetValue(config, 'duration.hold', 1200));\r\n        this.setTransitOutTime(GetValue(config, 'duration.out', 200));\r\n        this.setTransitInCallback(GetValue(config, 'transitIn', Const.popUp));\r\n        this.setTransitOutCallback(GetValue(config, 'transitOut', Const.scaleDown));\r\n\r\n        this.player = new Player(this, { dtMode: 1 });\r\n        this.messages = [];\r\n\r\n        this.setVisible(false);\r\n    }\r\n\r\n    destroy(fromScene) {\r\n        //  This Game Object has already been destroyed\r\n        if (!this.scene) {\r\n            return;\r\n        }\r\n\r\n        this.player.destroy();\r\n        this.player = undefined;\r\n        this.messages = undefined;\r\n        super.destroy(fromScene);\r\n    }\r\n\r\n    setDisplayTime(time) {\r\n        this.displayTime = time;\r\n        return this;\r\n    }\r\n\r\n    setTransitOutTime(time) {\r\n        this.transitOutTime = time;\r\n        return this;\r\n    }\r\n\r\n    setTransitInTime(time) {\r\n        this.transitInTime = time;\r\n        return this;\r\n    }\r\n\r\n    setTransitInCallback(callback) {\r\n        if (typeof (callback) === 'string') {\r\n            callback = Const[callback];\r\n        }\r\n\r\n        switch (callback) {\r\n            case Const.popUp:\r\n                callback = DefaultTransitCallbacks.popUp;\r\n                break;\r\n            case Const.fadeIn:\r\n                callback = DefaultTransitCallbacks.fadeIn;\r\n                break;\r\n        }\r\n\r\n        this.transitInCallback = callback;\r\n        // callback = function(gameObject, duration) {}\r\n        return this;\r\n    }\r\n\r\n    setTransitOutCallback(callback) {\r\n        if (typeof (callback) === 'string') {\r\n            callback = Const[callback];\r\n        }\r\n\r\n        switch (callback) {\r\n            case Const.scaleDown:\r\n                callback = DefaultTransitCallbacks.scaleDown;\r\n                break;\r\n            case Const.fadeOut:\r\n                callback = DefaultTransitCallbacks.fadeOut;\r\n                break;\r\n        }\r\n\r\n        this.transitOutCallback = callback;\r\n        // callback = function(gameObject, duration) {}\r\n        return this;\r\n    }\r\n\r\n    show(callback) {\r\n        if (callback === undefined) {\r\n            // Try pop up a pendding message\r\n            if (this.messages.length === 0) {\r\n                return this;\r\n            }\r\n            callback = this.messages.shift();\r\n        }\r\n\r\n        if (this.player.isPlaying) {\r\n            // Pend message\r\n            this.messages.push(callback);\r\n            return this;\r\n        }\r\n\r\n        // Recover to initial state\r\n        this\r\n            .setScale(1, 1)\r\n            .setVisible(true);\r\n        if (typeof (callback) === 'string') {\r\n            this.setText(callback);\r\n        } else {\r\n            callback(this);\r\n        }\r\n        this.layout();\r\n\r\n        var commands = [\r\n            [ // Transit-in\r\n                0, // time\r\n                [this.transitInCallback, this, this.transitInTime] // [callback, param, ...]\r\n            ],\r\n            [ // Hold\r\n                this.transitInTime,\r\n                [NOOP]\r\n            ],\r\n            [ // Transit-out\r\n                this.displayTime,\r\n                [this.transitOutCallback, this, this.transitOutTime]\r\n            ],\r\n            [ // End\r\n                this.transitOutTime,\r\n                [this.setVisible, false]\r\n            ],\r\n            [ // Complete - show next message\r\n                30, // Add a small delay before complete\r\n                [NOOP]\r\n            ]\r\n        ]\r\n        this.player\r\n            .load(commands, this)\r\n            .once('complete', function () {\r\n                this.show();\r\n            }, this)\r\n            .start();\r\n\r\n        return this;\r\n    }\r\n}\r\n\r\nexport default Toast;"]},"metadata":{},"sourceType":"module"}