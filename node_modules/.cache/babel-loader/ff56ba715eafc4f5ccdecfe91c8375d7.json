{"ast":null,"code":"import IsArray from '../../../utils/object/IsArray.js';\n\nvar SetTexture = function (key, baseFrameName, columns, rows) {\n  if (IsArray(baseFrameName)) {\n    rows = columns;\n    columns = baseFrameName;\n    baseFrameName = undefined;\n  }\n\n  if (baseFrameName === undefined) {\n    baseFrameName = '__BASE';\n  }\n\n  this.textureKey = key;\n  this.baseFrameName = baseFrameName;\n  this.columns.data = columns;\n  this.columns.count = columns ? columns.length : 0;\n  this.columns.stretch = 0;\n  this.columns.minWidth = 0;\n  this.rows.data = rows;\n  this.rows.count = rows ? rows.length : 0;\n  this.rows.stretch = 0;\n  this.rows.minHeight = 0;\n  var texture = this.scene.textures.get(key);\n\n  if (!texture) {\n    this.clear();\n    return this;\n  }\n\n  if (!columns || !rows) {\n    this.clear();\n    return this;\n  } // Get remainder width/height for unknown width/height\n\n\n  var baseFrame = texture.frames[baseFrameName];\n  var remainderTextureWidth = baseFrame.width;\n  var unknownColumnWidthCount = 0;\n\n  for (var i = 0, cnt = columns.length; i < cnt; i++) {\n    if (columns[i] === undefined) {\n      unknownColumnWidthCount++;\n    } else if (typeof columns[i] === 'number') {\n      remainderTextureWidth -= columns[i];\n    } else {\n      remainderTextureWidth -= columns[i].width;\n    }\n  }\n\n  var unknownColumnWidth = remainderTextureWidth / unknownColumnWidthCount;\n  var remainderTextureHeight = baseFrame.height;\n  var unknownRowHeightCount = 0;\n\n  for (var i = 0, cnt = rows.length; i < cnt; i++) {\n    if (rows[i] === undefined) {\n      unknownRowHeightCount++;\n    } else if (typeof rows[i] === 'number') {\n      remainderTextureHeight -= rows[i];\n    } else {\n      remainderTextureHeight -= rows[i].width;\n    }\n  }\n\n  var unknownRowHeight = remainderTextureHeight / unknownRowHeightCount;\n  var row, col, rowHeight, colWidth, frameName;\n  var offsetX = 0,\n      offsetY = 0;\n\n  for (var j = 0, jcnt = rows.length; j < jcnt; j++) {\n    // Unknown height\n    if (rows[j] === undefined) {\n      rows[j] = unknownRowHeight;\n    }\n\n    if (typeof rows[j] === 'number') {\n      rows[j] = {\n        height: rows[j],\n        stretch: j % 2\n      };\n    }\n\n    row = rows[j];\n    rowHeight = row.height;\n    this.rows.stretch += row.stretch | 0;\n    this.rows.minHeight += row.stretch > 0 ? 0 : rowHeight;\n    offsetX = 0;\n\n    for (var i = 0, icnt = columns.length; i < icnt; i++) {\n      // Unknown width\n      if (columns[i] === undefined) {\n        columns[i] = unknownColumnWidth;\n      }\n\n      if (typeof columns[i] === 'number') {\n        columns[i] = {\n          width: columns[i],\n          stretch: i % 2\n        };\n      }\n\n      col = columns[i];\n      colWidth = col.width;\n\n      if (j === 0) {\n        this.columns.stretch += col.stretch | 0;\n        this.columns.minWidth += col.stretch > 0 ? 0 : colWidth;\n      }\n\n      if (colWidth >= 1 && rowHeight >= 1) {\n        frameName = this.getFrameNameCallback(i, j, baseFrameName);\n\n        if (frameName) {\n          texture.add(frameName, 0, offsetX + baseFrame.cutX, offsetY + baseFrame.cutY, colWidth, rowHeight); // Do nothing if frameName is existed\n        }\n      } else {\n        console.warn(`Size of Grid(${i},${j}) = ${colWidth}x${rowHeight}, which is invalid`);\n      }\n\n      offsetX += colWidth;\n    }\n\n    offsetY += rowHeight;\n  }\n\n  this.updateTexture();\n  return this;\n};\n\nexport default SetTexture;","map":{"version":3,"sources":["/home/jon/code/Projects/Soulys/frontend/node_modules/phaser3-rex-plugins/plugins/gameobjects/ninepatch/texture/SetTexture.js"],"names":["IsArray","SetTexture","key","baseFrameName","columns","rows","undefined","textureKey","data","count","length","stretch","minWidth","minHeight","texture","scene","textures","get","clear","baseFrame","frames","remainderTextureWidth","width","unknownColumnWidthCount","i","cnt","unknownColumnWidth","remainderTextureHeight","height","unknownRowHeightCount","unknownRowHeight","row","col","rowHeight","colWidth","frameName","offsetX","offsetY","j","jcnt","icnt","getFrameNameCallback","add","cutX","cutY","console","warn","updateTexture"],"mappings":"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","sourcesContent":["import IsArray from '../../../utils/object/IsArray.js';\r\n\r\nvar SetTexture = function (key, baseFrameName, columns, rows) {\r\n    if (IsArray(baseFrameName)) {\r\n        rows = columns;\r\n        columns = baseFrameName;\r\n        baseFrameName = undefined;\r\n    }\r\n\r\n    if (baseFrameName === undefined) {\r\n        baseFrameName = '__BASE';\r\n    }\r\n\r\n    this.textureKey = key;\r\n    this.baseFrameName = baseFrameName;\r\n    this.columns.data = columns;\r\n    this.columns.count = (columns) ? columns.length : 0;\r\n    this.columns.stretch = 0;\r\n    this.columns.minWidth = 0;\r\n    this.rows.data = rows;\r\n    this.rows.count = (rows) ? rows.length : 0;\r\n    this.rows.stretch = 0;\r\n    this.rows.minHeight = 0;\r\n\r\n    var texture = this.scene.textures.get(key);\r\n    if (!texture) {\r\n        this.clear();\r\n        return this;\r\n    }\r\n    if (!columns || !rows) {\r\n        this.clear();\r\n        return this;\r\n    }\r\n\r\n    // Get remainder width/height for unknown width/height\r\n    var baseFrame = texture.frames[baseFrameName];\r\n    var remainderTextureWidth = baseFrame.width;\r\n    var unknownColumnWidthCount = 0;\r\n    for (var i = 0, cnt = columns.length; i < cnt; i++) {\r\n        if (columns[i] === undefined) {\r\n            unknownColumnWidthCount++;\r\n        } else if (typeof (columns[i]) === 'number') {\r\n            remainderTextureWidth -= columns[i];\r\n        } else {\r\n            remainderTextureWidth -= columns[i].width;\r\n        }\r\n    }\r\n    var unknownColumnWidth = remainderTextureWidth / unknownColumnWidthCount;\r\n\r\n    var remainderTextureHeight = baseFrame.height;\r\n    var unknownRowHeightCount = 0;\r\n    for (var i = 0, cnt = rows.length; i < cnt; i++) {\r\n        if (rows[i] === undefined) {\r\n            unknownRowHeightCount++;\r\n        } else if (typeof (rows[i]) === 'number') {\r\n            remainderTextureHeight -= rows[i];\r\n        } else {\r\n            remainderTextureHeight -= rows[i].width;\r\n        }\r\n    }\r\n    var unknownRowHeight = remainderTextureHeight / unknownRowHeightCount;\r\n\r\n    var row, col, rowHeight, colWidth, frameName;\r\n    var offsetX = 0, offsetY = 0;\r\n    for (var j = 0, jcnt = rows.length; j < jcnt; j++) {\r\n        // Unknown height\r\n        if (rows[j] === undefined) {\r\n            rows[j] = unknownRowHeight;\r\n        }\r\n\r\n        if (typeof (rows[j]) === 'number') {\r\n            rows[j] = {\r\n                height: rows[j],\r\n                stretch: (j % 2),\r\n            }\r\n        }\r\n\r\n        row = rows[j];\r\n        rowHeight = row.height;\r\n\r\n        this.rows.stretch += (row.stretch | 0);\r\n        this.rows.minHeight += (row.stretch > 0) ? 0 : rowHeight;\r\n\r\n        offsetX = 0;\r\n        for (var i = 0, icnt = columns.length; i < icnt; i++) {\r\n            // Unknown width\r\n            if (columns[i] === undefined) {\r\n                columns[i] = unknownColumnWidth;\r\n            }\r\n\r\n            if (typeof (columns[i]) === 'number') {\r\n                columns[i] = {\r\n                    width: columns[i],\r\n                    stretch: (i % 2),\r\n                }\r\n            }\r\n\r\n            col = columns[i];\r\n            colWidth = col.width;\r\n\r\n            if (j === 0) {\r\n                this.columns.stretch += (col.stretch | 0);\r\n                this.columns.minWidth += (col.stretch > 0) ? 0 : colWidth;\r\n            }\r\n\r\n            if ((colWidth >= 1) && (rowHeight >= 1)) {\r\n                frameName = this.getFrameNameCallback(i, j, baseFrameName);\r\n                if (frameName) {\r\n                    texture.add(\r\n                        frameName, 0,\r\n                        (offsetX + baseFrame.cutX), (offsetY + baseFrame.cutY),\r\n                        colWidth, rowHeight\r\n                    );\r\n                    // Do nothing if frameName is existed\r\n                }\r\n            } else {\r\n                console.warn(`Size of Grid(${i},${j}) = ${colWidth}x${rowHeight}, which is invalid`);\r\n            }\r\n            offsetX += colWidth;\r\n        }\r\n        offsetY += rowHeight;\r\n    }\r\n\r\n    this.updateTexture();\r\n    return this;\r\n}\r\n\r\nexport default SetTexture;"]},"metadata":{},"sourceType":"module"}