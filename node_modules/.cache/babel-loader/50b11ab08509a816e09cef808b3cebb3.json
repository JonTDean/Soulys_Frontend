{"ast":null,"code":"import Label from '../label/Label.js';\nimport TextPage from '../../../plugins/textpage.js';\nimport TextTyping from '../../../plugins/texttyping.js';\nconst GetValue = Phaser.Utils.Objects.GetValue;\n\nclass TextBox extends Label {\n  constructor(scene, config) {\n    if (config === undefined) {\n      config = {\n        text: createDefaultTextObject(scene)\n      };\n    }\n\n    super(scene, config);\n    this.type = 'rexTextBox';\n    var text = this.childrenMap.text;\n    this.page = new TextPage(text, GetValue(config, 'page', undefined));\n    this.typing = new TextTyping(text, GetValue(config, 'type', undefined));\n    this.typing.on('complete', this.onPageEnd, this).on('type', this.onType, this);\n    this.textWidth = text.width;\n    this.textHeight = text.height;\n  }\n\n  start(text, speed) {\n    this.page.setText(text);\n\n    if (speed !== undefined) {\n      this.typing.setTypeSpeed(speed);\n    }\n\n    this.typeNextPage();\n    return this;\n  }\n\n  typeNextPage() {\n    if (!this.page.isLastPage) {\n      var txt = this.page.getNextPage();\n      this.typing.start(txt);\n    } else {\n      this.emit('complete');\n    }\n\n    return this;\n  }\n\n  pause() {\n    this.typing.pause();\n    return this;\n  }\n\n  resume() {\n    this.typing.resume();\n    return this;\n  }\n\n  stop(showAllText) {\n    this.typing.stop(showAllText);\n    return this;\n  }\n\n  get isTyping() {\n    return this.typing.isTyping;\n  }\n\n  get isLastPage() {\n    return this.page.isLastPage;\n  }\n\n  get isFirstPage() {\n    return this.page.isFirstPage;\n  }\n\n  get pageCount() {\n    return this.page.pageCount;\n  }\n\n  get pageIndex() {\n    return this.page.pageIndex;\n  }\n\n  onType() {\n    var text = this.childrenMap.text;\n\n    if (this.textWidth !== text.width || this.textHeight !== text.height) {\n      this.textWidth = text.width;\n      this.textHeight = text.height;\n      this.getTopmostSizer().layout();\n    }\n\n    this.emit('type');\n  }\n\n  onPageEnd() {\n    this.emit('pageend');\n  }\n\n}\n\nvar createDefaultTextObject = function (scene) {\n  return scene.add.text(0, 0, '', {\n    wordWrap: {\n      width: 200\n    },\n    maxLines: 5\n  });\n};\n\nexport default TextBox;","map":{"version":3,"sources":["/home/jon/code/Projects/Soulys/frontend/node_modules/phaser3-rex-plugins/templates/ui/textbox/TextBox.js"],"names":["Label","TextPage","TextTyping","GetValue","Phaser","Utils","Objects","TextBox","constructor","scene","config","undefined","text","createDefaultTextObject","type","childrenMap","page","typing","on","onPageEnd","onType","textWidth","width","textHeight","height","start","speed","setText","setTypeSpeed","typeNextPage","isLastPage","txt","getNextPage","emit","pause","resume","stop","showAllText","isTyping","isFirstPage","pageCount","pageIndex","getTopmostSizer","layout","add","wordWrap","maxLines"],"mappings":"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","sourcesContent":["import Label from '../label/Label.js';\r\nimport TextPage from '../../../plugins/textpage.js';\r\nimport TextTyping from '../../../plugins/texttyping.js';\r\n\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\n\r\nclass TextBox extends Label {\r\n    constructor(scene, config) {\r\n        if (config === undefined) {\r\n            config = {\r\n                text: createDefaultTextObject(scene)\r\n            }\r\n        }\r\n\r\n        super(scene, config);\r\n        this.type = 'rexTextBox';\r\n\r\n        var text = this.childrenMap.text;\r\n        this.page = new TextPage(text, GetValue(config, 'page', undefined));\r\n        this.typing = new TextTyping(text, GetValue(config, 'type', undefined));\r\n        this.typing\r\n            .on('complete', this.onPageEnd, this)\r\n            .on('type', this.onType, this);\r\n\r\n        this.textWidth = text.width;\r\n        this.textHeight = text.height;\r\n    }\r\n\r\n    start(text, speed) {\r\n        this.page.setText(text);\r\n        if (speed !== undefined) {\r\n            this.typing.setTypeSpeed(speed);\r\n        }\r\n        this.typeNextPage();\r\n        return this;\r\n    }\r\n\r\n    typeNextPage() {\r\n        if (!this.page.isLastPage) {\r\n            var txt = this.page.getNextPage();\r\n            this.typing.start(txt);\r\n        } else {\r\n            this.emit('complete');\r\n        }\r\n        return this;\r\n    }\r\n\r\n    pause() {\r\n        this.typing.pause();\r\n        return this;\r\n    }\r\n\r\n    resume() {\r\n        this.typing.resume();\r\n        return this;\r\n    }\r\n\r\n    stop(showAllText) {\r\n        this.typing.stop(showAllText);\r\n        return this;\r\n    }\r\n\r\n    get isTyping() {\r\n        return this.typing.isTyping;\r\n    }\r\n\r\n    get isLastPage() {\r\n        return this.page.isLastPage;\r\n    }\r\n\r\n    get isFirstPage() {\r\n        return this.page.isFirstPage;\r\n    }\r\n\r\n    get pageCount() {\r\n        return this.page.pageCount;\r\n    }\r\n\r\n    get pageIndex() {\r\n        return this.page.pageIndex;\r\n    }\r\n\r\n    onType() {\r\n        var text = this.childrenMap.text;\r\n        if ((this.textWidth !== text.width) || (this.textHeight !== text.height)) {\r\n            this.textWidth = text.width;\r\n            this.textHeight = text.height;\r\n            this.getTopmostSizer().layout();\r\n        }\r\n        this.emit('type');\r\n    }\r\n\r\n    onPageEnd() {\r\n        this.emit('pageend');\r\n    }\r\n\r\n}\r\n\r\nvar createDefaultTextObject = function (scene) {\r\n    return scene.add.text(0, 0, '', {\r\n        wordWrap: {\r\n            width: 200,\r\n        },\r\n        maxLines: 5\r\n    });\r\n};\r\n\r\nexport default TextBox;"]},"metadata":{},"sourceType":"module"}