{"ast":null,"code":"import Spawner from './Spawner';\n\nclass WorldManager {\n  constructor(scene, mapData) {\n    // mapData \n    this.scene = scene;\n    this.mapData = mapData; // Spawners\n\n    this.spawners = {};\n    this.lootables = {};\n    this.playerLocations = [];\n    this.lootableLocations = {};\n    this.monsterLocations = {};\n  }\n\n  setup() {\n    this.parseMapData();\n    this.setupEventListener();\n    this.setupSpawners();\n    this.spawnPlayer();\n  }\n\n  parseMapData() {\n    // console.log(this.mapData)\n    this.mapData.forEach(layer => {\n      switch (layer.name) {\n        case 'player_spawner':\n          layer.objects.forEach(obj => {\n            this.playerLocations.push([obj.x, obj.y]); // console.log(this.playerLocations)\n          });\n          break;\n\n        case 'lootable_locations':\n          layer.objects.forEach(obj => {\n            switch (this.lootableLocations[obj.properties.spawner]) {\n              case true:\n                this.lootableLocations[obj.properties.spawner].push([obj.x, obj.y]);\n                break;\n\n              case false:\n                this.lootableLocations[obj.properties.spawner] = [[obj.x, obj.y]];\n                break;\n\n              default:\n                break;\n            }\n          });\n          break;\n\n        case 'monster_spawner':\n          layer.objects.forEach(obj => {\n            switch (this.monsterLocations[obj.properties.spawner]) {\n              case true:\n                this.monsterLocations[obj.properties.spawner].push([obj.x, obj.y]);\n                break;\n\n              case false:\n                this.monsterLocations[obj.properties.spawner] = [[obj.x, obj.y]];\n                break;\n\n              default:\n                break;\n            }\n          });\n          break;\n\n        default:\n          console.log(\"Desolate Spawn\");\n          break;\n      }\n    });\n  }\n\n  setupEventListener() {}\n\n  setupSpawners() {\n    Object.keys(this.lootableLocations).forEach(key => {\n      const config = {\n        spawnInterval: 3000,\n        limit: 3,\n        spawnerType: 'LOOTABLE',\n        id: `lootable-${key}`\n      };\n      const spawner = new Spawner(config, this.lootableLocations[key], this.addLootable.bind(this), this.deleteLootable.bind(this));\n      this.spawners[spawner.id] = spawner;\n    });\n  }\n\n  spawnPlayer() {\n    const location = this.playerLocations[Math.floor(Math.random() * this.playerLocations.length)]; // console.log(`Location: ${location}`)\n\n    this.scene.events.emit('spawnPlayer', location);\n  }\n\n  addLootable() {}\n\n}\n\nexport default WorldManager;","map":{"version":3,"sources":["/home/jon/code/Projects/Soulys/frontend/src/components/Game/WorldManager/WorldManager.js"],"names":["Spawner","WorldManager","constructor","scene","mapData","spawners","lootables","playerLocations","lootableLocations","monsterLocations","setup","parseMapData","setupEventListener","setupSpawners","spawnPlayer","forEach","layer","name","objects","obj","push","x","y","properties","spawner","console","log","Object","keys","key","config","spawnInterval","limit","spawnerType","id","addLootable","bind","deleteLootable","location","Math","floor","random","length","events","emit"],"mappings":"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","sourcesContent":["import Spawner from './Spawner';\n\nclass WorldManager{\n    constructor(scene, mapData){\n        // mapData \n        this.scene = scene;\n        this.mapData = mapData;\n\n        // Spawners\n        this.spawners = {};\n        this.lootables = {};\n\n        this.playerLocations = [];\n        this.lootableLocations = {};\n        this.monsterLocations = {};\n    }\n\n    setup(){\n        this.parseMapData();\n        this.setupEventListener();\n        this.setupSpawners();\n        this.spawnPlayer();\n    }\n\n    parseMapData(){\n        // console.log(this.mapData)\n\n        this.mapData.forEach((layer) => {\n            switch(layer.name){\n                case 'player_spawner':\n                    layer.objects.forEach((obj) => {\n                        this.playerLocations.push([obj.x, obj.y]);\n                        // console.log(this.playerLocations)\n                    })\n                    break;\n                case 'lootable_locations':\n                    layer.objects.forEach((obj) => {\n                        switch(this.lootableLocations[obj.properties.spawner]){\n                            case true:\n                                this.lootableLocations[obj.properties.spawner].push([obj.x, obj.y]);\n                                break;\n                            case false:\n                                this.lootableLocations[obj.properties.spawner] = [[obj.x, obj.y]];\n                                break;\n                            default:\n                                break;\n                        }\n                    })\n                    break;\n                case 'monster_spawner':\n                    layer.objects.forEach((obj) => {\n                        switch(this.monsterLocations[obj.properties.spawner]){\n                            case true:\n                                this.monsterLocations[obj.properties.spawner].push([obj.x, obj.y]);\n                                break;\n                            case false:\n                                this.monsterLocations[obj.properties.spawner] = [[obj.x, obj.y]];\n                                break;\n                            default:\n                                break;\n                        }\n                    })\n                    break;\n                default:\n                    console.log(\"Desolate Spawn\")\n                    break;\n            }\n        })\n    }\n\n    setupEventListener(){\n\n    }\n\n    setupSpawners(){\n        Object.keys(this.lootableLocations).forEach((key) =>{\n            const config = {\n                spawnInterval: 3000,\n                limit: 3,\n                spawnerType: 'LOOTABLE',\n                id: `lootable-${key}`, \n            };\n\n            const spawner = new Spawner(\n                config, \n                this.lootableLocations[key], \n                this.addLootable.bind(this), \n                this.deleteLootable.bind(this) \n            );\n\n            this.spawners[spawner.id] = spawner;\n        })\n    }\n\n    spawnPlayer(){\n        const location = this.playerLocations[Math.floor(Math.random() * this.playerLocations.length)];\n        // console.log(`Location: ${location}`)\n        this.scene.events.emit('spawnPlayer', location);\n    }\n\n    addLootable(){\n\n    }\n\n\n}\n\nexport default WorldManager;"]},"metadata":{},"sourceType":"module"}