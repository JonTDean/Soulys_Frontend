{"ast":null,"code":"import BaseSizer from '../basesizer/BaseSizer.js';\nimport Methods from './Methods.js';\nimport SCROLLMODE from '../utils/ScrollModeConst.js';\nimport { GetDisplayWidth, GetDisplayHeight } from '../../../plugins/utils/size/GetDisplaySize.js';\nconst IsPlainObject = Phaser.Utils.Objects.IsPlainObject;\nconst GetValue = Phaser.Utils.Objects.GetValue;\n\nclass ScrollableBlock extends BaseSizer {\n  constructor(scene, x, y, minWidth, minHeight, config) {\n    if (IsPlainObject(x)) {\n      config = x;\n      x = GetValue(config, 'x', 0);\n      y = GetValue(config, 'y', 0);\n      minWidth = GetValue(config, 'width', undefined);\n      minHeight = GetValue(config, 'height', undefined);\n    } else if (IsPlainObject(minWidth)) {\n      config = minWidth;\n      minWidth = GetValue(config, 'width', undefined);\n      minHeight = GetValue(config, 'height', undefined);\n    }\n\n    super(scene, x, y, minWidth, minHeight, config);\n    this.type = 'rexScrollableBlock';\n    this.child = undefined;\n    this.childrenMask = undefined;\n    this._childOY = 0;\n    this.execeedTopState = false;\n    this.execeedBottomState = false;\n    this.setScrollMode(GetValue(config, 'scrollMode', true));\n    this.setClampMode(GetValue(config, 'clamplChildOY', true)); // Add elements\n    // No background object, and child does not have padding\n\n    var child = GetValue(config, 'child', undefined);\n    var expand = GetValue(config, 'expand', true);\n    var childrenMask = GetValue(config, 'mask', undefined);\n    this.setChild(child, expand, childrenMask);\n  }\n\n  destroy(fromScene) {\n    //  This Game Object has already been destroyed\n    if (!this.scene) {\n      return;\n    }\n\n    if (this.maskUpdateMode === 1) {\n      this.scene.game.events.off('poststep', this.maskChildren, this);\n    }\n\n    this.child = undefined;\n\n    if (this.childrenMask) {\n      this.childrenMask.destroy();\n      this.childrenMask = undefined;\n    }\n\n    super.destroy(fromScene);\n  }\n\n  setScrollMode(mode) {\n    if (typeof mode === 'string') {\n      mode = SCROLLMODE[mode.toLowerCase()];\n    }\n\n    this.scrollMode = mode;\n    return this;\n  }\n\n  setClampMode(mode) {\n    this.clampChildOYMode = mode;\n    return this;\n  }\n\n  get instHeight() {\n    return this.scrollMode === 0 ? this.height : this.width;\n  }\n\n  get instWidth() {\n    return this.scrollMode === 0 ? this.width : this.height;\n  }\n\n  get childHeight() {\n    return this.scrollMode === 0 ? GetDisplayHeight(this.child) : GetDisplayWidth(this.child);\n  }\n\n  get childWidth() {\n    return this.scrollMode === 0 ? GetDisplayWidth(this.child) : GetDisplayHeight(this.child);\n  }\n\n  get topChildOY() {\n    return 0;\n  }\n\n  get bottomChildOY() {\n    return -this.visibleHeight;\n  }\n\n  get visibleHeight() {\n    var h;\n    var childHeight = this.childHeight;\n    var instHeight = this.instHeight;\n\n    if (childHeight > instHeight) {\n      h = childHeight - instHeight;\n    } else {\n      h = 0;\n    }\n\n    return h;\n  }\n\n  childOYExceedTop(oy) {\n    if (oy === undefined) {\n      oy = this.childOY;\n    }\n\n    return oy > this.topChildOY;\n  }\n\n  childOYExeceedBottom(oy) {\n    if (oy === undefined) {\n      oy = this.childOY;\n    }\n\n    return oy < this.bottomChildOY;\n  }\n\n  get childOY() {\n    return this._childOY;\n  }\n\n  set childOY(oy) {\n    var topChildOY = this.topChildOY;\n    var bottomChildOY = this.bottomChildOY;\n    var childOYExceedTop = this.childOYExceedTop(oy);\n    var childOYExeceedBottom = this.childOYExeceedBottom(oy);\n\n    if (this.clampChildOYMode) {\n      if (this.instHeight > this.childHeight) {\n        oy = 0;\n      } else if (childOYExceedTop) {\n        oy = topChildOY;\n      } else if (childOYExeceedBottom) {\n        oy = bottomChildOY;\n      }\n    }\n\n    if (this._childOY !== oy) {\n      this._childOY = oy;\n      this.resetChildPosition();\n    }\n\n    if (childOYExceedTop) {\n      if (!this.execeedTopState) {\n        this.emit('execeedtop', this, oy, topChildOY);\n      }\n    }\n\n    this.execeedTopState = childOYExceedTop;\n\n    if (childOYExeceedBottom) {\n      if (!this.execeedBottomState) {\n        this.emit('execeedbottom', this, oy, bottomChildOY);\n      }\n    }\n\n    this.execeedBottomState = childOYExeceedBottom;\n  }\n\n  setChildOY(oy) {\n    this.childOY = oy;\n    return this;\n  }\n\n  set t(value) {\n    this.childOY = -this.visibleHeight * value;\n  }\n\n  get t() {\n    var visibleHeight = this.visibleHeight;\n\n    if (visibleHeight === 0) {\n      return 0;\n    }\n\n    return this.childOY / -visibleHeight;\n  }\n\n  setChildOYByPercentage(percentage) {\n    this.t = percentage;\n    return this;\n  }\n\n}\n\nObject.assign(ScrollableBlock.prototype, Methods);\nexport default ScrollableBlock;","map":{"version":3,"sources":["/home/jon/code/Projects/Soulys/frontend/node_modules/phaser3-rex-plugins/templates/ui/scrollableblock/ScrollableBlock.js"],"names":["BaseSizer","Methods","SCROLLMODE","GetDisplayWidth","GetDisplayHeight","IsPlainObject","Phaser","Utils","Objects","GetValue","ScrollableBlock","constructor","scene","x","y","minWidth","minHeight","config","undefined","type","child","childrenMask","_childOY","execeedTopState","execeedBottomState","setScrollMode","setClampMode","expand","setChild","destroy","fromScene","maskUpdateMode","game","events","off","maskChildren","mode","toLowerCase","scrollMode","clampChildOYMode","instHeight","height","width","instWidth","childHeight","childWidth","topChildOY","bottomChildOY","visibleHeight","h","childOYExceedTop","oy","childOY","childOYExeceedBottom","resetChildPosition","emit","setChildOY","t","value","setChildOYByPercentage","percentage","Object","assign","prototype"],"mappings":"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","sourcesContent":["import BaseSizer from '../basesizer/BaseSizer.js';\r\nimport Methods from './Methods.js';\r\nimport SCROLLMODE from '../utils/ScrollModeConst.js';\r\nimport { GetDisplayWidth, GetDisplayHeight } from '../../../plugins/utils/size/GetDisplaySize.js';\r\n\r\nconst IsPlainObject = Phaser.Utils.Objects.IsPlainObject;\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\n\r\nclass ScrollableBlock extends BaseSizer {\r\n    constructor(scene, x, y, minWidth, minHeight, config) {\r\n        if (IsPlainObject(x)) {\r\n            config = x;\r\n            x = GetValue(config, 'x', 0);\r\n            y = GetValue(config, 'y', 0);\r\n            minWidth = GetValue(config, 'width', undefined);\r\n            minHeight = GetValue(config, 'height', undefined);\r\n        } else if (IsPlainObject(minWidth)) {\r\n            config = minWidth;\r\n            minWidth = GetValue(config, 'width', undefined);\r\n            minHeight = GetValue(config, 'height', undefined);\r\n        }\r\n        super(scene, x, y, minWidth, minHeight, config);\r\n\r\n        this.type = 'rexScrollableBlock';\r\n        this.child = undefined;\r\n        this.childrenMask = undefined;\r\n        this._childOY = 0;\r\n        this.execeedTopState = false;\r\n        this.execeedBottomState = false;\r\n\r\n        this.setScrollMode(GetValue(config, 'scrollMode', true))\r\n        this.setClampMode(GetValue(config, 'clamplChildOY', true));\r\n\r\n        // Add elements\r\n        // No background object, and child does not have padding\r\n        var child = GetValue(config, 'child', undefined);\r\n        var expand = GetValue(config, 'expand', true);\r\n        var childrenMask = GetValue(config, 'mask', undefined);\r\n\r\n        this.setChild(child, expand, childrenMask);\r\n    }\r\n\r\n    destroy(fromScene) {\r\n        //  This Game Object has already been destroyed\r\n        if (!this.scene) {\r\n            return;\r\n        }\r\n\r\n        if (this.maskUpdateMode === 1) {\r\n            this.scene.game.events.off('poststep', this.maskChildren, this);\r\n        }\r\n\r\n        this.child = undefined;\r\n        if (this.childrenMask) {\r\n            this.childrenMask.destroy();\r\n            this.childrenMask = undefined;\r\n        }\r\n        super.destroy(fromScene);\r\n    }\r\n\r\n    setScrollMode(mode) {\r\n        if (typeof (mode) === 'string') {\r\n            mode = SCROLLMODE[mode.toLowerCase()];\r\n        }\r\n        this.scrollMode = mode;\r\n        return this;\r\n    }\r\n\r\n    setClampMode(mode) {\r\n        this.clampChildOYMode = mode;\r\n        return this;\r\n    }\r\n\r\n    get instHeight() {\r\n        return (this.scrollMode === 0) ? this.height : this.width;\r\n    }\r\n\r\n    get instWidth() {\r\n        return (this.scrollMode === 0) ? this.width : this.height;\r\n    }\r\n\r\n    get childHeight() {\r\n        return (this.scrollMode === 0) ? GetDisplayHeight(this.child) : GetDisplayWidth(this.child);\r\n    }\r\n\r\n    get childWidth() {\r\n        return (this.scrollMode === 0) ? GetDisplayWidth(this.child) : GetDisplayHeight(this.child);\r\n    }\r\n\r\n    get topChildOY() {\r\n        return 0;\r\n    }\r\n\r\n    get bottomChildOY() {\r\n        return -this.visibleHeight;\r\n    }\r\n\r\n    get visibleHeight() {\r\n        var h;\r\n        var childHeight = this.childHeight;\r\n        var instHeight = this.instHeight;\r\n        if (childHeight > instHeight) {\r\n            h = childHeight - instHeight;\r\n        } else {\r\n            h = 0;\r\n        }\r\n\r\n        return h;\r\n    }\r\n\r\n    childOYExceedTop(oy) {\r\n        if (oy === undefined) {\r\n            oy = this.childOY;\r\n        }\r\n        return (oy > this.topChildOY);\r\n    }\r\n\r\n    childOYExeceedBottom(oy) {\r\n        if (oy === undefined) {\r\n            oy = this.childOY;\r\n        }\r\n        return (oy < this.bottomChildOY);\r\n    }\r\n\r\n    get childOY() {\r\n        return this._childOY;\r\n    }\r\n\r\n    set childOY(oy) {\r\n        var topChildOY = this.topChildOY;\r\n        var bottomChildOY = this.bottomChildOY;\r\n        var childOYExceedTop = this.childOYExceedTop(oy);\r\n        var childOYExeceedBottom = this.childOYExeceedBottom(oy);\r\n\r\n        if (this.clampChildOYMode) {\r\n            if (this.instHeight > this.childHeight) {\r\n                oy = 0;\r\n            } else if (childOYExceedTop) {\r\n                oy = topChildOY\r\n            } else if (childOYExeceedBottom) {\r\n                oy = bottomChildOY;\r\n            }\r\n        }\r\n\r\n        if (this._childOY !== oy) {\r\n            this._childOY = oy;\r\n            this.resetChildPosition();\r\n        }\r\n\r\n        if (childOYExceedTop) {\r\n            if (!this.execeedTopState) {\r\n                this.emit('execeedtop', this, oy, topChildOY);\r\n            }\r\n        }\r\n        this.execeedTopState = childOYExceedTop;\r\n\r\n        if (childOYExeceedBottom) {\r\n            if (!this.execeedBottomState) {\r\n                this.emit('execeedbottom', this, oy, bottomChildOY);\r\n            }\r\n        }\r\n        this.execeedBottomState = childOYExeceedBottom;\r\n    }\r\n\r\n    setChildOY(oy) {\r\n        this.childOY = oy;\r\n        return this;\r\n    }\r\n\r\n    set t(value) {\r\n        this.childOY = -this.visibleHeight * value;\r\n    }\r\n\r\n    get t() {\r\n        var visibleHeight = this.visibleHeight;\r\n        if (visibleHeight === 0) {\r\n            return 0;\r\n        }\r\n        return (this.childOY / -visibleHeight);\r\n    }\r\n\r\n    setChildOYByPercentage(percentage) {\r\n        this.t = percentage;\r\n        return this;\r\n    }\r\n}\r\n\r\nObject.assign(\r\n    ScrollableBlock.prototype,\r\n    Methods\r\n);\r\n\r\nexport default ScrollableBlock;"]},"metadata":{},"sourceType":"module"}