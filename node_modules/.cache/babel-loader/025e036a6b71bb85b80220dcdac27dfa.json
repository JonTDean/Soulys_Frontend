{"ast":null,"code":"import OnePointerTracer from \"../onepointertracer/OnePointerTracer.js\";\nimport FSM from '../../../fsm.js';\nconst GetValue = Phaser.Utils.Objects.GetValue;\n\nclass Pan extends OnePointerTracer {\n  constructor(gameObject, config) {\n    super(gameObject, config);\n    var self = this;\n    var stateConfig = {\n      states: {\n        IDLE: {},\n        BEGIN: {\n          enter: function () {\n            var pointer = self.pointer;\n            self.startX = pointer.x;\n            self.startY = pointer.y;\n            self.startWorldX = pointer.worldX;\n            self.startWorldY = pointer.worldY;\n          }\n        },\n        RECOGNIZED: {\n          enter: function () {\n            self.emit('panstart', self, self.gameObject, self.lastPointer);\n          },\n          exit: function () {\n            var pointer = self.lastPointer;\n            self.endX = pointer.x;\n            self.endY = pointer.y;\n            self.endWorldX = pointer.worldX;\n            self.endWorldY = pointer.worldY;\n            self.emit('panend', self, self.gameObject, self.lastPointer);\n          }\n        }\n      },\n      init: function () {\n        this.state = IDLE;\n      },\n      eventEmitter: false\n    };\n    this.setRecongizedStateObject(new FSM(stateConfig));\n  }\n\n  resetFromJSON(o) {\n    super.resetFromJSON(o);\n    this.setDragThreshold(GetValue(o, 'threshold', 10));\n    return this;\n  }\n\n  onDragStart() {\n    this.state = BEGIN;\n\n    if (this.dragThreshold === 0) {\n      this.state = RECOGNIZED;\n    }\n  }\n\n  onDragEnd() {\n    this.state = IDLE;\n  }\n\n  onDrag() {\n    switch (this.state) {\n      case BEGIN:\n        if (this.pointer.getDistance() >= this.dragThreshold) {\n          this.state = RECOGNIZED;\n        }\n\n        break;\n\n      case RECOGNIZED:\n        var p1 = this.pointer.position;\n        var p0 = this.pointer.prevPosition;\n        this.dx = p1.x - p0.x;\n        this.dy = p1.y - p0.y;\n        var pointer = this.pointer;\n        this.x = pointer.x;\n        this.y = pointer.y;\n        this.worldX = pointer.worldX;\n        this.worldY = pointer.worldY;\n        this.emit('pan', this, this.gameObject, this.lastPointer);\n        break;\n    }\n  }\n\n  get isPan() {\n    return this.state === RECOGNIZED;\n  }\n\n  setDragThreshold(distance) {\n    this.dragThreshold = distance;\n    return this;\n  }\n\n}\n\nconst IDLE = 'IDLE';\nconst BEGIN = 'BEGIN';\nconst RECOGNIZED = 'RECOGNIZED';\nexport default Pan;","map":{"version":3,"sources":["/home/jon/code/Projects/Soulys/frontend/node_modules/phaser3-rex-plugins/plugins/input/gestures/pan/Pan.js"],"names":["OnePointerTracer","FSM","GetValue","Phaser","Utils","Objects","Pan","constructor","gameObject","config","self","stateConfig","states","IDLE","BEGIN","enter","pointer","startX","x","startY","y","startWorldX","worldX","startWorldY","worldY","RECOGNIZED","emit","lastPointer","exit","endX","endY","endWorldX","endWorldY","init","state","eventEmitter","setRecongizedStateObject","resetFromJSON","o","setDragThreshold","onDragStart","dragThreshold","onDragEnd","onDrag","getDistance","p1","position","p0","prevPosition","dx","dy","isPan","distance"],"mappings":"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","sourcesContent":["import OnePointerTracer from \"../onepointertracer/OnePointerTracer.js\";\r\nimport FSM from '../../../fsm.js';\r\n\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\n\r\nclass Pan extends OnePointerTracer {\r\n    constructor(gameObject, config) {\r\n        super(gameObject, config);\r\n\r\n        var self = this;\r\n        var stateConfig = {\r\n            states: {\r\n                IDLE: {\r\n                },\r\n                BEGIN: {\r\n                    enter: function () {\r\n                        var pointer = self.pointer;\r\n                        self.startX = pointer.x;\r\n                        self.startY = pointer.y;\r\n                        self.startWorldX = pointer.worldX;\r\n                        self.startWorldY = pointer.worldY;\r\n                    }\r\n                },\r\n                RECOGNIZED: {\r\n                    enter: function () {\r\n                        self.emit('panstart', self, self.gameObject, self.lastPointer);\r\n                    },\r\n                    exit: function () {\r\n                        var pointer = self.lastPointer;\r\n                        self.endX = pointer.x;\r\n                        self.endY = pointer.y;\r\n                        self.endWorldX = pointer.worldX;\r\n                        self.endWorldY = pointer.worldY;\r\n                        self.emit('panend', self, self.gameObject, self.lastPointer);\r\n                    }\r\n                }\r\n            },\r\n            init: function () {\r\n                this.state = IDLE;\r\n            },\r\n            eventEmitter: false,\r\n        }\r\n        this.setRecongizedStateObject(new FSM(stateConfig));\r\n    }\r\n\r\n    resetFromJSON(o) {\r\n        super.resetFromJSON(o);\r\n        this.setDragThreshold(GetValue(o, 'threshold', 10));\r\n        return this;\r\n    }\r\n\r\n    onDragStart() {\r\n        this.state = BEGIN;\r\n        if (this.dragThreshold === 0) {\r\n            this.state = RECOGNIZED;\r\n        }\r\n    }\r\n\r\n    onDragEnd() {\r\n        this.state = IDLE;\r\n    }\r\n\r\n    onDrag() {\r\n        switch (this.state) {\r\n            case BEGIN:\r\n                if (this.pointer.getDistance() >= this.dragThreshold) {\r\n                    this.state = RECOGNIZED;\r\n                }\r\n                break;\r\n\r\n            case RECOGNIZED:\r\n                var p1 = this.pointer.position;\r\n                var p0 = this.pointer.prevPosition;\r\n                this.dx = p1.x - p0.x;\r\n                this.dy = p1.y - p0.y;\r\n                var pointer = this.pointer;\r\n                this.x = pointer.x;\r\n                this.y = pointer.y;\r\n                this.worldX = pointer.worldX;\r\n                this.worldY = pointer.worldY;\r\n                this.emit('pan', this, this.gameObject, this.lastPointer);\r\n                break;\r\n        }\r\n    }\r\n\r\n    get isPan() {\r\n        return (this.state === RECOGNIZED);\r\n    }\r\n\r\n    setDragThreshold(distance) {\r\n        this.dragThreshold = distance;\r\n        return this;\r\n    }\r\n}\r\n\r\nconst IDLE = 'IDLE';\r\nconst BEGIN = 'BEGIN';\r\nconst RECOGNIZED = 'RECOGNIZED';\r\n\r\nexport default Pan;"]},"metadata":{},"sourceType":"module"}