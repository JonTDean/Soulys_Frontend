{"ast":null,"code":"import Buttons from '../buttons/Buttons.js';\nimport Methods from './Methods.js';\nimport CreateBackground from './CreateBackground.js';\nimport CreateButtons from './CreateButtons.js';\nimport GetDefaultBounds from '../../../plugins/utils/bounds/GetDefaultBounds.js';\nimport MenuSetInteractive from './MenuSetInteractive.js';\nimport GetEaseConfig from './GetEaseConfig.js';\nconst GetValue = Phaser.Utils.Objects.GetValue;\n\nclass Menu extends Buttons {\n  constructor(scene, config) {\n    if (config === undefined) {\n      config = {};\n    } // Orientation\n\n\n    if (!config.hasOwnProperty('orientation')) {\n      config.orientation = 1; // y\n    } // Parent\n\n\n    var rootMenu = config._rootMenu;\n    var parentMenu = config._parentMenu;\n    var parentButton = config._parentButton; // Items\n\n    var items = GetValue(config, 'items', undefined); // Background\n\n    var createBackgroundCallback = GetValue(config, 'createBackgroundCallback', undefined);\n    var createBackgroundCallbackScope = GetValue(config, 'createBackgroundCallbackScope', undefined);\n    config.background = CreateBackground(scene, items, createBackgroundCallback, createBackgroundCallbackScope); // Buttons\n\n    var createButtonCallback = GetValue(config, 'createButtonCallback', undefined);\n    var createButtonCallbackScope = GetValue(config, 'createButtonCallbackScope', undefined);\n    config.buttons = CreateButtons(scene, items, createButtonCallback, createButtonCallbackScope);\n    super(scene, config);\n    this.type = 'rexMenu';\n    this.items = items;\n    this.root = rootMenu === undefined ? this : rootMenu;\n    this.parentMenu = parentMenu;\n    this.parentButton = parentButton;\n    var isRootMenu = this.root === this;\n\n    if (isRootMenu) {\n      // Bounds\n      var bounds = config.bounds;\n\n      if (bounds === undefined) {\n        bounds = GetDefaultBounds(scene);\n      }\n\n      this.bounds = bounds; // Expand mode\n\n      this.expandEventName = GetValue(config, 'expandEvent', 'button.click'); // toggleOrientation mode\n\n      this.toggleOrientation = GetValue(config, 'toggleOrientation', false); // Transition\n\n      this.easeIn = GetValue(config, 'easeIn', 0);\n\n      if (typeof this.easeIn === 'number') {\n        this.easeIn = {\n          duration: this.easeIn\n        };\n      }\n\n      this.easeOut = GetValue(config, 'easeOut', 0);\n\n      if (typeof this.easeOut === 'number') {\n        this.easeOut = {\n          duration: this.easeOut\n        };\n      } // Callbacks\n\n\n      this.createBackgroundCallback = createBackgroundCallback;\n      this.createBackgroundCallbackScope = createBackgroundCallbackScope;\n      this.createButtonCallback = createButtonCallback;\n      this.createButtonCallbackScope = createButtonCallbackScope; // Event flag\n\n      this._isPassedEvent = false;\n    }\n\n    this.setOrigin(0).layout();\n    var bounds = this.root.bounds; // Align to parentButton\n\n    if (isRootMenu) {\n      this.expandOrientation = [this.y < bounds.centerY ? 1 : 3, // Expand down(1)/up(3)\n      this.x < bounds.centerX ? 0 : 2 // Expand right(0)/left(2)\n      ];\n    } else {\n      // Sub-menu, align to parent button\n      var expandOrientation = this.root.expandOrientation[parentMenu.orientation];\n\n      switch (expandOrientation) {\n        case 0:\n          //Expand right\n          this.alignTop(parentButton.top).alignLeft(parentButton.right);\n          break;\n\n        case 1:\n          //Expand down\n          this.alignLeft(parentButton.left).alignTop(parentButton.bottom);\n          break;\n\n        case 2:\n          //Expand left\n          this.alignTop(parentButton.top).alignRight(parentButton.left);\n          break;\n\n        case 3:\n          //Expand up\n          this.alignLeft(parentButton.left).alignBottom(parentButton.top);\n          break;\n      }\n    }\n\n    this.pushIntoBounds(bounds);\n    MenuSetInteractive(this); // Ease in menu\n\n    this.popUp(GetEaseConfig(this, this.root.easeIn));\n  }\n\n  isInTouching(pointer) {\n    if (super.isInTouching(pointer)) {\n      return true;\n    } else if (this.childrenMap.subMenu) {\n      return this.childrenMap.subMenu.isInTouching(pointer);\n    } else {\n      return false;\n    }\n  }\n\n}\n\nObject.assign(Menu.prototype, Methods);\nexport default Menu;","map":{"version":3,"sources":["/home/jon/code/Projects/Soulys/frontend/node_modules/phaser3-rex-plugins/templates/ui/menu/Menu.js"],"names":["Buttons","Methods","CreateBackground","CreateButtons","GetDefaultBounds","MenuSetInteractive","GetEaseConfig","GetValue","Phaser","Utils","Objects","Menu","constructor","scene","config","undefined","hasOwnProperty","orientation","rootMenu","_rootMenu","parentMenu","_parentMenu","parentButton","_parentButton","items","createBackgroundCallback","createBackgroundCallbackScope","background","createButtonCallback","createButtonCallbackScope","buttons","type","root","isRootMenu","bounds","expandEventName","toggleOrientation","easeIn","duration","easeOut","_isPassedEvent","setOrigin","layout","expandOrientation","y","centerY","x","centerX","alignTop","top","alignLeft","right","left","bottom","alignRight","alignBottom","pushIntoBounds","popUp","isInTouching","pointer","childrenMap","subMenu","Object","assign","prototype"],"mappings":"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","sourcesContent":["import Buttons from '../buttons/Buttons.js';\r\nimport Methods from './Methods.js';\r\nimport CreateBackground from './CreateBackground.js';\r\nimport CreateButtons from './CreateButtons.js';\r\nimport GetDefaultBounds from '../../../plugins/utils/bounds/GetDefaultBounds.js';\r\nimport MenuSetInteractive from './MenuSetInteractive.js';\r\nimport GetEaseConfig from './GetEaseConfig.js';\r\n\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\n\r\nclass Menu extends Buttons {\r\n    constructor(scene, config) {\r\n        if (config === undefined) {\r\n            config = {};\r\n        }\r\n\r\n        // Orientation\r\n        if (!config.hasOwnProperty('orientation')) {\r\n            config.orientation = 1; // y\r\n        }\r\n\r\n        // Parent\r\n        var rootMenu = config._rootMenu;\r\n        var parentMenu = config._parentMenu;\r\n        var parentButton = config._parentButton;\r\n        // Items\r\n        var items = GetValue(config, 'items', undefined);\r\n        // Background\r\n        var createBackgroundCallback = GetValue(config, 'createBackgroundCallback', undefined);\r\n        var createBackgroundCallbackScope = GetValue(config, 'createBackgroundCallbackScope', undefined);\r\n        config.background = CreateBackground(scene, items, createBackgroundCallback, createBackgroundCallbackScope);\r\n        // Buttons\r\n        var createButtonCallback = GetValue(config, 'createButtonCallback', undefined);\r\n        var createButtonCallbackScope = GetValue(config, 'createButtonCallbackScope', undefined);\r\n        config.buttons = CreateButtons(scene, items, createButtonCallback, createButtonCallbackScope);\r\n\r\n        super(scene, config);\r\n        this.type = 'rexMenu';\r\n\r\n        this.items = items;        \r\n        this.root = (rootMenu === undefined) ? this : rootMenu;\r\n        this.parentMenu = parentMenu;\r\n        this.parentButton = parentButton;\r\n        var isRootMenu = (this.root === this);\r\n        if (isRootMenu) {\r\n            // Bounds\r\n            var bounds = config.bounds;\r\n            if (bounds === undefined) {\r\n                bounds = GetDefaultBounds(scene);\r\n            }\r\n            this.bounds = bounds;\r\n\r\n            // Expand mode\r\n            this.expandEventName = GetValue(config, 'expandEvent', 'button.click');\r\n            // toggleOrientation mode\r\n            this.toggleOrientation = GetValue(config, 'toggleOrientation', false);\r\n            // Transition\r\n            this.easeIn = GetValue(config, 'easeIn', 0);\r\n            if (typeof (this.easeIn) === 'number') {\r\n                this.easeIn = { duration: this.easeIn };\r\n            }\r\n            this.easeOut = GetValue(config, 'easeOut', 0);\r\n            if (typeof (this.easeOut) === 'number') {\r\n                this.easeOut = { duration: this.easeOut };\r\n            }\r\n            // Callbacks\r\n            this.createBackgroundCallback = createBackgroundCallback;\r\n            this.createBackgroundCallbackScope = createBackgroundCallbackScope;\r\n            this.createButtonCallback = createButtonCallback;\r\n            this.createButtonCallbackScope = createButtonCallbackScope;\r\n\r\n            // Event flag\r\n            this._isPassedEvent = false;\r\n        }\r\n        this\r\n            .setOrigin(0)\r\n            .layout();\r\n\r\n        var bounds = this.root.bounds;\r\n        // Align to parentButton\r\n        if (isRootMenu) {\r\n            this.expandOrientation = [\r\n                ((this.y < bounds.centerY) ? 1 : 3), // Expand down(1)/up(3)\r\n                ((this.x < bounds.centerX) ? 0 : 2)  // Expand right(0)/left(2)\r\n            ];\r\n\r\n        } else { // Sub-menu, align to parent button\r\n            var expandOrientation = this.root.expandOrientation[parentMenu.orientation];\r\n            switch (expandOrientation) {\r\n                case 0: //Expand right\r\n                    this.alignTop(parentButton.top).alignLeft(parentButton.right);\r\n                    break;\r\n                case 1: //Expand down\r\n                    this.alignLeft(parentButton.left).alignTop(parentButton.bottom);\r\n                    break;\r\n                case 2: //Expand left\r\n                    this.alignTop(parentButton.top).alignRight(parentButton.left);\r\n                    break;\r\n                case 3: //Expand up\r\n                    this.alignLeft(parentButton.left).alignBottom(parentButton.top);\r\n                    break;\r\n            }\r\n        }\r\n        this.pushIntoBounds(bounds);\r\n\r\n        MenuSetInteractive(this);\r\n\r\n        // Ease in menu\r\n        this.popUp(GetEaseConfig(this, this.root.easeIn));\r\n    }\r\n\r\n    isInTouching(pointer) {\r\n        if (super.isInTouching(pointer)) {\r\n            return true;\r\n        } else if (this.childrenMap.subMenu) {\r\n            return this.childrenMap.subMenu.isInTouching(pointer);\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n}\r\n\r\nObject.assign(\r\n    Menu.prototype,\r\n    Methods\r\n);\r\nexport default Menu;"]},"metadata":{},"sourceType":"module"}