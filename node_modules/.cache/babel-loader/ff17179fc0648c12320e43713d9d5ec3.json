{"ast":null,"code":"import Sizer from '../sizer/Sizer.js';\nimport OnDragThumb from './OnDragThumb.js';\nimport OnTouchTrack from './OnTouchTrack.js';\nimport GetStartPoint from './GetStartPoint.js';\nimport GetEndPoint from './GetEndPoint.js';\nimport UpdateThumb from './UpdateThumb.js';\nimport UpdateIndicator from './UpdateIndicator.js';\nconst GetValue = Phaser.Utils.Objects.GetValue;\nconst Clamp = Phaser.Math.Clamp;\nconst Linear = Phaser.Math.Linear;\nconst Percent = Phaser.Math.Percent;\nconst SnapTo = Phaser.Math.Snap.To;\n\nclass Slider extends Sizer {\n  constructor(scene, config) {\n    // Create sizer\n    super(scene, config);\n    this.type = 'rexSlider';\n    this.eventEmitter = GetValue(config, 'eventEmitter', this); // Add elements\n\n    var background = GetValue(config, 'background', undefined);\n    var track = GetValue(config, 'track', undefined);\n    var indicator = GetValue(config, 'indicator', undefined);\n    var thumb = GetValue(config, 'thumb', undefined);\n\n    if (background) {\n      this.addBackground(background);\n    }\n\n    if (track) {\n      this.add(track, 1, 'center', 0, true);\n    }\n\n    if (indicator) {\n      this.pin(indicator); // Put into container but not layout it\n    }\n\n    if (thumb) {\n      this.pin(thumb); // Put into container but not layout it\n    } // Input\n\n\n    var inputMode = GetValue(config, 'input', 0);\n\n    if (typeof inputMode === 'string') {\n      inputMode = INPUTMODE[inputMode];\n    }\n\n    switch (inputMode) {\n      case 0:\n        // 'drag'\n        if (thumb) {\n          thumb.setInteractive();\n          this.scene.input.setDraggable(thumb);\n          thumb.on('drag', OnDragThumb, this);\n        }\n\n        break;\n\n      case 1:\n        // 'click'\n        this.setInteractive().on('pointerdown', OnTouchTrack, this).on('pointermove', OnTouchTrack, this);\n        break;\n    }\n\n    this.addChildrenMap('background', background);\n    this.addChildrenMap('track', track);\n    this.addChildrenMap('indicator', indicator);\n    this.addChildrenMap('thumb', thumb);\n    var callback = GetValue(config, 'valuechangeCallback', null);\n\n    if (callback !== null) {\n      var scope = GetValue(config, 'valuechangeCallbackScope', undefined);\n      this.eventEmitter.on('valuechange', callback, scope);\n    }\n\n    this.setEnable(GetValue(config, 'enable', undefined));\n    this.setGap(GetValue(config, 'gap', undefined));\n    this.setValue(GetValue(config, 'value', 0));\n  }\n\n  setEnable(enable) {\n    if (enable === undefined) {\n      enable = true;\n    }\n\n    this.enable = enable;\n    return this;\n  }\n\n  setGap(gap) {\n    this.gap = gap;\n    return this;\n  }\n\n  get value() {\n    return this._value;\n  }\n\n  set value(value) {\n    if (this.gap !== undefined) {\n      value = SnapTo(value, this.gap);\n    }\n\n    var oldValue = this._value;\n    this._value = Clamp(value, 0, 1);\n\n    if (oldValue !== this._value) {\n      this.updateThumb(this._value);\n      this.updateIndicator(this._value);\n      this.eventEmitter.emit('valuechange', this._value, oldValue, this.eventEmitter);\n    }\n  }\n\n  setValue(value, min, max) {\n    if (value === undefined || value === null) {\n      return this;\n    }\n\n    if (min !== undefined) {\n      value = Percent(value, min, max);\n    }\n\n    this.value = value;\n    return this;\n  }\n\n  addValue(inc, min, max) {\n    if (min !== undefined) {\n      inc = Percent(inc, min, max);\n    }\n\n    this.value += inc;\n    return this;\n  }\n\n  getValue(min, max) {\n    var value = this.value;\n\n    if (min !== undefined) {\n      value = Linear(min, max, value);\n    }\n\n    return value;\n  }\n\n  layout(parent, newWidth, newHeight) {\n    // Skip hidden or !dirty sizer\n    if (this.rexSizer.hidden || !this.dirty) {\n      return this;\n    }\n\n    super.layout(parent, newWidth, newHeight);\n    this.updateThumb();\n    this.updateIndicator();\n    return this;\n  }\n\n}\n\nconst INPUTMODE = {\n  drag: 0,\n  click: 1,\n  none: -1\n};\nvar methods = {\n  getStartPoint: GetStartPoint,\n  getEndPoint: GetEndPoint,\n  updateThumb: UpdateThumb,\n  updateIndicator: UpdateIndicator\n};\nObject.assign(Slider.prototype, methods);\nexport default Slider;","map":{"version":3,"sources":["/home/jon/code/Projects/Soulys/frontend/node_modules/phaser3-rex-plugins/templates/ui/slider/Slider.js"],"names":["Sizer","OnDragThumb","OnTouchTrack","GetStartPoint","GetEndPoint","UpdateThumb","UpdateIndicator","GetValue","Phaser","Utils","Objects","Clamp","Math","Linear","Percent","SnapTo","Snap","To","Slider","constructor","scene","config","type","eventEmitter","background","undefined","track","indicator","thumb","addBackground","add","pin","inputMode","INPUTMODE","setInteractive","input","setDraggable","on","addChildrenMap","callback","scope","setEnable","setGap","setValue","enable","gap","value","_value","oldValue","updateThumb","updateIndicator","emit","min","max","addValue","inc","getValue","layout","parent","newWidth","newHeight","rexSizer","hidden","dirty","drag","click","none","methods","getStartPoint","getEndPoint","Object","assign","prototype"],"mappings":"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","sourcesContent":["import Sizer from '../sizer/Sizer.js';\r\nimport OnDragThumb from './OnDragThumb.js';\r\nimport OnTouchTrack from './OnTouchTrack.js';\r\nimport GetStartPoint from './GetStartPoint.js';\r\nimport GetEndPoint from './GetEndPoint.js';\r\nimport UpdateThumb from './UpdateThumb.js';\r\nimport UpdateIndicator from './UpdateIndicator.js';\r\n\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\nconst Clamp = Phaser.Math.Clamp;\r\nconst Linear = Phaser.Math.Linear;\r\nconst Percent = Phaser.Math.Percent;\r\nconst SnapTo = Phaser.Math.Snap.To;\r\n\r\nclass Slider extends Sizer {\r\n    constructor(scene, config) {\r\n        // Create sizer\r\n        super(scene, config);\r\n        this.type = 'rexSlider';\r\n        this.eventEmitter = GetValue(config, 'eventEmitter', this);\r\n\r\n        // Add elements\r\n        var background = GetValue(config, 'background', undefined);\r\n        var track = GetValue(config, 'track', undefined);\r\n        var indicator = GetValue(config, 'indicator', undefined);\r\n        var thumb = GetValue(config, 'thumb', undefined);\r\n\r\n        if (background) {\r\n            this.addBackground(background);\r\n        }\r\n\r\n        if (track) {\r\n            this.add(track, 1, 'center', 0, true);\r\n        }\r\n\r\n        if (indicator) {\r\n            this.pin(indicator); // Put into container but not layout it\r\n        }\r\n\r\n        if (thumb) {\r\n            this.pin(thumb); // Put into container but not layout it\r\n\r\n        }\r\n\r\n        // Input\r\n        var inputMode = GetValue(config, 'input', 0);\r\n        if (typeof (inputMode) === 'string') {\r\n            inputMode = INPUTMODE[inputMode];\r\n        }\r\n        switch (inputMode) {\r\n            case 0: // 'drag'\r\n                if (thumb) {\r\n                    thumb.setInteractive();\r\n                    this.scene.input.setDraggable(thumb);\r\n                    thumb.on('drag', OnDragThumb, this);\r\n                }\r\n                break;\r\n            case 1: // 'click'\r\n                this.setInteractive()\r\n                    .on('pointerdown', OnTouchTrack, this)\r\n                    .on('pointermove', OnTouchTrack, this);\r\n                break;\r\n        }\r\n\r\n        this.addChildrenMap('background', background);\r\n        this.addChildrenMap('track', track);\r\n        this.addChildrenMap('indicator', indicator);\r\n        this.addChildrenMap('thumb', thumb);\r\n\r\n        var callback = GetValue(config, 'valuechangeCallback', null);\r\n        if (callback !== null) {\r\n            var scope = GetValue(config, 'valuechangeCallbackScope', undefined);\r\n            this.eventEmitter.on('valuechange', callback, scope);\r\n        }\r\n        this.setEnable(GetValue(config, 'enable', undefined));\r\n        this.setGap(GetValue(config, 'gap', undefined));\r\n        this.setValue(GetValue(config, 'value', 0));\r\n    }\r\n\r\n    setEnable(enable) {\r\n        if (enable === undefined) {\r\n            enable = true;\r\n        }\r\n        this.enable = enable;\r\n        return this;\r\n    }\r\n\r\n    setGap(gap) {\r\n        this.gap = gap;\r\n        return this;\r\n    }\r\n\r\n    get value() {\r\n        return this._value;\r\n    }\r\n\r\n    set value(value) {\r\n        if (this.gap !== undefined) {\r\n            value = SnapTo(value, this.gap);\r\n        }\r\n        var oldValue = this._value;\r\n        this._value = Clamp(value, 0, 1);\r\n\r\n        if (oldValue !== this._value) {\r\n            this.updateThumb(this._value);\r\n            this.updateIndicator(this._value);\r\n            this.eventEmitter.emit('valuechange', this._value, oldValue, this.eventEmitter);\r\n        }\r\n    }\r\n\r\n    setValue(value, min, max) {\r\n        if ((value === undefined) || (value === null)) {\r\n            return this;\r\n        }\r\n\r\n        if (min !== undefined) {\r\n            value = Percent(value, min, max);\r\n        }\r\n        this.value = value;\r\n        return this;\r\n    }\r\n\r\n    addValue(inc, min, max) {\r\n        if (min !== undefined) {\r\n            inc = Percent(inc, min, max);\r\n        }\r\n        this.value += inc;\r\n        return this;\r\n    }\r\n\r\n    getValue(min, max) {\r\n        var value = this.value;\r\n        if (min !== undefined) {\r\n            value = Linear(min, max, value);\r\n        }\r\n        return value;\r\n    }\r\n\r\n    layout(parent, newWidth, newHeight) {\r\n        // Skip hidden or !dirty sizer\r\n        if (this.rexSizer.hidden || (!this.dirty)) {\r\n            return this;\r\n        }\r\n        super.layout(parent, newWidth, newHeight);\r\n        this.updateThumb();\r\n        this.updateIndicator();\r\n        return this;\r\n    }\r\n}\r\n\r\nconst INPUTMODE = {\r\n    drag: 0,\r\n    click: 1,\r\n    none: -1,\r\n}\r\n\r\nvar methods = {\r\n    getStartPoint: GetStartPoint,\r\n    getEndPoint: GetEndPoint,\r\n    updateThumb: UpdateThumb,\r\n    updateIndicator: UpdateIndicator,\r\n}\r\nObject.assign(\r\n    Slider.prototype,\r\n    methods\r\n);\r\n\r\nexport default Slider;"]},"metadata":{},"sourceType":"module"}