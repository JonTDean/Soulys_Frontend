{"ast":null,"code":"/*!\r\n * phaser-input - version 2.0.5 \r\n * Adds input boxes to Phaser like CanvasInput, but also works for WebGL and Mobile, made for Phaser only.\r\n *\r\n * Azerion\r\n * Build at 18-03-2019\r\n * Released under MIT License \r\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar PhaserInput;\n\n(function (PhaserInput) {\n  var InputType;\n\n  (function (InputType) {\n    InputType[InputType[\"text\"] = 0] = \"text\";\n    InputType[InputType[\"password\"] = 1] = \"password\";\n    InputType[InputType[\"number\"] = 2] = \"number\";\n  })(InputType = PhaserInput.InputType || (PhaserInput.InputType = {}));\n\n  var InputElement = function () {\n    function InputElement(game, id, type, value, focusIn, focusOut) {\n      if (type === void 0) {\n        type = InputType.text;\n      }\n\n      if (value === void 0) {\n        value = '';\n      }\n\n      var _this = this;\n\n      this.id = id;\n      this.type = type;\n      this.game = game;\n      this.focusIn = focusIn;\n      this.focusOut = focusOut;\n      var canvasTopX = this.game.canvas.getBoundingClientRect().top + document.body.scrollTop;\n      this.element = document.createElement('input');\n      this.element.id = id;\n      this.element.style.position = 'absolute';\n      this.element.style.top = canvasTopX + 'px';\n      this.element.style.left = (-40).toString() + 'px';\n      this.element.style.width = 10 .toString() + 'px';\n      this.element.style.height = 10 .toString() + 'px';\n      this.element.style.border = '0px';\n      this.element.value = this.value;\n      this.element.type = InputType[type];\n      this.element.addEventListener('focusin', function () {\n        if (_this.focusIn instanceof Phaser.Signal) {\n          _this.focusIn.dispatch();\n        }\n      });\n      this.element.addEventListener('focusout', function () {\n        if (_this.focusOut instanceof Phaser.Signal) {\n          _this.focusOut.dispatch();\n        }\n      });\n      document.body.appendChild(this.element);\n    }\n\n    InputElement.prototype.addKeyUpListener = function (callback) {\n      this.keyUpCallback = callback;\n      document.addEventListener('keyup', this.keyUpCallback);\n      this.element.addEventListener('input', this.keyUpCallback);\n    };\n\n    InputElement.prototype.blockKeyDownEvents = function () {\n      document.addEventListener('keydown', this.preventKeyPropagation);\n    };\n\n    InputElement.prototype.preventKeyPropagation = function (evt) {\n      if (evt.stopPropagation) {\n        evt.stopPropagation();\n      } else {\n        event.cancelBubble = true;\n      }\n    };\n\n    InputElement.prototype.unblockKeyDownEvents = function () {\n      document.removeEventListener('keydown', this.preventKeyPropagation);\n    };\n\n    InputElement.prototype.removeEventListener = function () {\n      document.removeEventListener('keyup', this.keyUpCallback);\n      this.element.removeEventListener('input', this.keyUpCallback);\n    };\n\n    InputElement.prototype.destroy = function () {\n      document.body.removeChild(this.element);\n    };\n\n    InputElement.prototype.setMax = function (max, min) {\n      if (max === undefined) {\n        return;\n      }\n\n      if (this.type === InputType.text || this.type === InputType.password) {\n        this.element.maxLength = parseInt(max, 10);\n      } else if (this.type === InputType.number) {\n        this.element.max = max;\n\n        if (min === undefined) {\n          return;\n        }\n\n        this.element.min = min;\n      }\n    };\n\n    Object.defineProperty(InputElement.prototype, \"value\", {\n      get: function () {\n        return this.element.value;\n      },\n      set: function (value) {\n        this.element.value = value;\n      },\n      enumerable: true,\n      configurable: true\n    });\n\n    InputElement.prototype.focus = function () {\n      var _this = this;\n\n      this.element.focus();\n\n      if (!this.game.device.desktop && this.game.device.chrome) {\n        var originalWidth_1 = window.innerWidth,\n            originalHeight_1 = window.innerHeight;\n        var kbAppeared_1 = false;\n        var interval_1 = setInterval(function () {\n          if (originalWidth_1 > window.innerWidth || originalHeight_1 > window.innerHeight) {\n            kbAppeared_1 = true;\n          }\n\n          if (kbAppeared_1 && originalWidth_1 === window.innerWidth && originalHeight_1 === window.innerHeight) {\n            if (_this.focusOut instanceof Phaser.Signal) {\n              _this.focusOut.dispatch();\n            }\n\n            clearInterval(interval_1);\n          }\n        }, 50);\n      }\n    };\n\n    InputElement.prototype.blur = function () {\n      this.element.blur();\n    };\n\n    Object.defineProperty(InputElement.prototype, \"hasSelection\", {\n      get: function () {\n        if (this.type === InputType.number) {\n          return false;\n        }\n\n        return this.element.selectionStart !== this.element.selectionEnd;\n      },\n      enumerable: true,\n      configurable: true\n    });\n    Object.defineProperty(InputElement.prototype, \"caretStart\", {\n      get: function () {\n        return this.element.selectionEnd;\n      },\n      enumerable: true,\n      configurable: true\n    });\n    Object.defineProperty(InputElement.prototype, \"caretEnd\", {\n      get: function () {\n        return this.element.selectionStart;\n      },\n      enumerable: true,\n      configurable: true\n    });\n\n    InputElement.prototype.getCaretPosition = function () {\n      if (this.type === InputType.number) {\n        return -1;\n      }\n\n      return this.element.selectionStart;\n    };\n\n    InputElement.prototype.setCaretPosition = function (pos) {\n      if (this.type === InputType.number) {\n        return;\n      }\n\n      this.element.setSelectionRange(pos, pos);\n    };\n\n    return InputElement;\n  }();\n\n  PhaserInput.InputElement = InputElement;\n})(PhaserInput || (PhaserInput = {}));\n\nvar PhaserInput;\n\n(function (PhaserInput) {\n  var ForceCase;\n\n  (function (ForceCase) {\n    ForceCase[ForceCase[\"none\"] = 0] = \"none\";\n    ForceCase[ForceCase[\"lower\"] = 1] = \"lower\";\n    ForceCase[ForceCase[\"upper\"] = 2] = \"upper\";\n  })(ForceCase = PhaserInput.ForceCase || (PhaserInput.ForceCase = {}));\n\n  var InputField = function (_super) {\n    __extends(InputField, _super);\n\n    function InputField(game, x, y, inputOptions) {\n      if (inputOptions === void 0) {\n        inputOptions = {};\n      }\n\n      var _this = _super.call(this, game, x, y) || this;\n\n      _this.focusOutOnEnter = true;\n      _this.placeHolder = null;\n      _this.box = null;\n      _this.focus = false;\n      _this.value = '';\n      _this.windowScale = 1;\n      _this.blockInput = true;\n      _this.focusIn = new Phaser.Signal();\n      _this.focusOut = new Phaser.Signal();\n      _this.blink = true;\n      _this.cnt = 0;\n      _this.inputOptions = inputOptions;\n      _this.inputOptions.width = typeof inputOptions.width === 'number' ? inputOptions.width : 150;\n      _this.inputOptions.padding = typeof inputOptions.padding === 'number' ? inputOptions.padding : 0;\n      _this.inputOptions.textAlign = inputOptions.textAlign || 'left';\n      _this.inputOptions.type = inputOptions.type || PhaserInput.InputType.text;\n      _this.inputOptions.forceCase = inputOptions.forceCase ? inputOptions.forceCase : ForceCase.none;\n      _this.inputOptions.borderRadius = typeof inputOptions.borderRadius === 'number' ? inputOptions.borderRadius : 0;\n      _this.inputOptions.height = typeof inputOptions.height === 'number' ? inputOptions.height : 14;\n      _this.inputOptions.fillAlpha = inputOptions.fillAlpha === undefined ? 1 : inputOptions.fillAlpha;\n      _this.inputOptions.selectionColor = inputOptions.selectionColor || 'rgba(179, 212, 253, 0.8)';\n      _this.inputOptions.zoom = !game.device.desktop ? inputOptions.zoom || false : false;\n      _this.box = new PhaserInput.InputBox(_this.game, inputOptions);\n\n      _this.setTexture(_this.box.generateTexture());\n\n      _this.textMask = new PhaserInput.TextMask(_this.game, inputOptions);\n\n      _this.addChild(_this.textMask);\n\n      _this.domElement = new PhaserInput.InputElement(_this.game, 'phaser-input-' + (Math.random() * 10000 | 0).toString(), _this.inputOptions.type, _this.value, _this.focusIn, _this.focusOut);\n\n      _this.domElement.setMax(_this.inputOptions.max, _this.inputOptions.min);\n\n      _this.selection = new PhaserInput.SelectionHighlight(_this.game, _this.inputOptions);\n      _this.selection.mask = _this.textMask;\n\n      _this.addChild(_this.selection);\n\n      if (inputOptions.placeHolder && inputOptions.placeHolder.length > 0) {\n        _this.placeHolder = new Phaser.Text(game, _this.inputOptions.padding, _this.inputOptions.padding, inputOptions.placeHolder, {\n          font: inputOptions.font || '14px Arial',\n          fontWeight: inputOptions.fontWeight || 'normal',\n          fill: inputOptions.placeHolderColor || '#bfbebd'\n        });\n        _this.placeHolder.mask = _this.textMask;\n\n        _this.addChild(_this.placeHolder);\n      }\n\n      _this.cursor = new Phaser.Text(game, _this.inputOptions.padding, _this.inputOptions.padding - 2, '|', {\n        font: inputOptions.font || '14px Arial',\n        fontWeight: inputOptions.fontWeight || 'normal',\n        fill: inputOptions.cursorColor || '#000000'\n      });\n      _this.cursor.visible = false;\n\n      _this.addChild(_this.cursor);\n\n      _this.text = new Phaser.Text(game, _this.inputOptions.padding, _this.inputOptions.padding, '', {\n        font: inputOptions.font || '14px Arial',\n        fontWeight: inputOptions.fontWeight || 'normal',\n        fill: inputOptions.fill || '#000000'\n      });\n      _this.text.mask = _this.textMask;\n\n      _this.addChild(_this.text);\n\n      _this.offscreenText = new Phaser.Text(game, _this.inputOptions.padding, _this.inputOptions.padding, '', {\n        font: inputOptions.font || '14px Arial',\n        fontWeight: inputOptions.fontWeight || 'normal',\n        fill: inputOptions.fill || '#000000'\n      });\n\n      _this.updateTextAlignment();\n\n      _this.inputEnabled = true;\n      _this.input.useHandCursor = true;\n\n      _this.game.input.onDown.add(_this.checkDown, _this);\n\n      _this.focusOut.add(function () {\n        if (PhaserInput.KeyboardOpen) {\n          _this.endFocus();\n\n          if (_this.inputOptions.zoom) {\n            _this.zoomOut();\n          }\n        }\n      });\n\n      return _this;\n    }\n\n    Object.defineProperty(InputField.prototype, \"width\", {\n      get: function () {\n        return this.inputOptions.width;\n      },\n      set: function (width) {\n        this.inputOptions.width = width;\n        this.box.resize(width);\n        this.textMask.resize(width);\n        this.updateTextAlignment();\n      },\n      enumerable: true,\n      configurable: true\n    });\n\n    InputField.prototype.updateTextAlignment = function () {\n      switch (this.inputOptions.textAlign) {\n        case 'left':\n          this.text.anchor.set(0, 0);\n          this.text.x = this.inputOptions.padding;\n\n          if (null !== this.placeHolder) {\n            this.placeHolder.anchor.set(0, 0);\n          }\n\n          this.cursor.x = this.inputOptions.padding + this.getCaretPosition();\n          break;\n\n        case 'center':\n          this.text.anchor.set(0.5, 0);\n          this.text.x = this.inputOptions.padding + this.inputOptions.width / 2;\n\n          if (null !== this.placeHolder) {\n            this.placeHolder.anchor.set(0.5, 0);\n            this.placeHolder.x = this.inputOptions.padding + this.inputOptions.width / 2;\n          }\n\n          this.cursor.x = this.inputOptions.padding + this.inputOptions.width / 2 - this.text.width / 2 + this.getCaretPosition();\n          break;\n\n        case 'right':\n          this.text.anchor.set(1, 0);\n          this.text.x = this.inputOptions.padding + this.inputOptions.width;\n\n          if (null !== this.placeHolder) {\n            this.placeHolder.anchor.set(1, 0);\n            this.placeHolder.x = this.inputOptions.padding + this.inputOptions.width;\n          }\n\n          this.cursor.x = this.inputOptions.padding + this.inputOptions.width;\n          break;\n      }\n    };\n\n    InputField.prototype.checkDown = function (e) {\n      if (!this.value) {\n        this.resetText();\n      }\n\n      if (this.input.checkPointerOver(e)) {\n        if (this.focus) {\n          this.setCaretOnclick(e);\n          return;\n        }\n\n        if (this.inputOptions.zoom && !PhaserInput.Zoomed) {\n          this.zoomIn();\n        }\n\n        this.startFocus();\n      } else {\n        if (this.focus === true) {\n          this.endFocus();\n\n          if (this.inputOptions.zoom) {\n            this.zoomOut();\n          }\n        }\n      }\n    };\n\n    InputField.prototype.update = function () {\n      this.text.update();\n\n      if (this.placeHolder) {\n        this.placeHolder.update();\n      }\n\n      if (!this.focus) {\n        return;\n      }\n\n      if (this.cnt !== 30) {\n        return this.cnt++;\n      }\n\n      this.cursor.visible = this.blink;\n      this.blink = !this.blink;\n      this.cnt = 0;\n    };\n\n    InputField.prototype.endFocus = function () {\n      var _this = this;\n\n      if (!this.focus) {\n        return;\n      }\n\n      this.domElement.removeEventListener();\n\n      if (this.blockInput === true) {\n        this.domElement.unblockKeyDownEvents();\n      }\n\n      this.focus = false;\n\n      if (this.value.length === 0 && null !== this.placeHolder) {\n        this.placeHolder.visible = true;\n      }\n\n      this.cursor.visible = false;\n\n      if (this.game.device.desktop) {\n        setTimeout(function () {\n          _this.domElement.blur();\n        }, 0);\n      } else {\n        this.domElement.blur();\n      }\n\n      if (!this.game.device.desktop) {\n        PhaserInput.KeyboardOpen = false;\n        PhaserInput.onKeyboardClose.dispatch();\n      }\n    };\n\n    InputField.prototype.startFocus = function () {\n      var _this = this;\n\n      this.focus = true;\n\n      if (null !== this.placeHolder) {\n        this.placeHolder.visible = false;\n      }\n\n      if (this.game.device.desktop) {\n        setTimeout(function () {\n          _this.keyUpProcessor();\n        }, 0);\n      } else {\n        this.keyUpProcessor();\n      }\n\n      if (!this.game.device.desktop) {\n        PhaserInput.KeyboardOpen = true;\n        PhaserInput.onKeyboardOpen.dispatch();\n      }\n    };\n\n    InputField.prototype.keyUpProcessor = function () {\n      this.domElement.addKeyUpListener(this.keyListener.bind(this));\n      this.domElement.focus();\n\n      if (this.blockInput === true) {\n        this.domElement.blockKeyDownEvents();\n      }\n    };\n\n    InputField.prototype.updateText = function () {\n      var text = '';\n\n      if (this.inputOptions.type === PhaserInput.InputType.password) {\n        for (var i = 0; i < this.value.length; i++) {\n          text += '*';\n        }\n      } else if (this.inputOptions.type === PhaserInput.InputType.number) {\n        var val = parseInt(this.value);\n\n        if (val < parseInt(this.inputOptions.min)) {\n          text = this.value = this.domElement.value = this.inputOptions.min;\n        } else if (val > parseInt(this.inputOptions.max)) {\n          text = this.value = this.domElement.value = this.inputOptions.max;\n        } else {\n          text = this.value;\n        }\n      } else {\n        text = this.value;\n      }\n\n      this.text.setText(text);\n\n      if (this.text.width > this.inputOptions.width) {\n        this.text.anchor.x = 1;\n        this.text.x = this.inputOptions.padding + this.inputOptions.width;\n      } else {\n        switch (this.inputOptions.textAlign) {\n          case 'left':\n            this.text.anchor.set(0, 0);\n            this.text.x = this.inputOptions.padding;\n            break;\n\n          case 'center':\n            this.text.anchor.set(0.5, 0);\n            this.text.x = this.inputOptions.padding + this.inputOptions.width / 2;\n            break;\n\n          case 'right':\n            this.text.anchor.set(1, 0);\n            this.text.x = this.inputOptions.padding + this.inputOptions.width;\n            break;\n        }\n      }\n    };\n\n    InputField.prototype.updateCursor = function () {\n      if (this.text.width > this.inputOptions.width || this.inputOptions.textAlign === 'right') {\n        this.cursor.x = this.inputOptions.padding + this.inputOptions.width;\n      } else {\n        switch (this.inputOptions.textAlign) {\n          case 'left':\n            this.cursor.x = this.inputOptions.padding + this.getCaretPosition();\n            break;\n\n          case 'center':\n            this.cursor.x = this.inputOptions.padding + this.inputOptions.width / 2 - this.text.width / 2 + this.getCaretPosition();\n            break;\n        }\n      }\n    };\n\n    InputField.prototype.getCaretPosition = function () {\n      var caretPosition = this.domElement.getCaretPosition();\n\n      if (-1 === caretPosition) {\n        return this.text.width;\n      }\n\n      var text = this.value;\n\n      if (this.inputOptions.type === PhaserInput.InputType.password) {\n        text = '';\n\n        for (var i = 0; i < this.value.length; i++) {\n          text += '*';\n        }\n      }\n\n      this.offscreenText.setText(text.slice(0, caretPosition));\n      return this.offscreenText.width;\n    };\n\n    InputField.prototype.setCaretOnclick = function (e) {\n      var localX = this.text.toLocal(new PIXI.Point(e.x, e.y), this.game.world).x;\n\n      if (this.inputOptions.textAlign && this.inputOptions.textAlign === 'center') {\n        localX += this.text.width / 2;\n      }\n\n      var characterWidth = this.text.width / this.value.length;\n      var index = 0;\n\n      for (var i = 0; i < this.value.length; i++) {\n        if (localX >= i * characterWidth && localX <= (i + 1) * characterWidth) {\n          index = i;\n          break;\n        }\n      }\n\n      if (localX > (this.value.length - 1) * characterWidth) {\n        index = this.value.length;\n      }\n\n      this.startFocus();\n      this.domElement.setCaretPosition(index);\n      this.updateCursor();\n    };\n\n    InputField.prototype.updateSelection = function () {\n      if (this.domElement.hasSelection) {\n        var text = this.value;\n\n        if (this.inputOptions.type === PhaserInput.InputType.password) {\n          text = '';\n\n          for (var i = 0; i < this.value.length; i++) {\n            text += '*';\n          }\n        }\n\n        text = text.substring(this.domElement.caretStart, this.domElement.caretEnd);\n        this.offscreenText.setText(text);\n        this.selection.updateSelection(this.offscreenText.getBounds());\n\n        switch (this.inputOptions.textAlign) {\n          case 'left':\n            this.selection.x = this.inputOptions.padding;\n            break;\n\n          case 'center':\n            this.selection.x = this.inputOptions.padding + this.inputOptions.width / 2 - this.text.width / 2;\n            break;\n        }\n      } else {\n        this.selection.clear();\n      }\n    };\n\n    InputField.prototype.zoomIn = function () {\n      if (PhaserInput.Zoomed) {\n        return;\n      }\n\n      var bounds = this.getBounds();\n\n      if (window.innerHeight > window.innerWidth) {\n        this.windowScale = this.game.width / (bounds.width * 1.5);\n      } else {\n        this.windowScale = this.game.width / 2 / (bounds.width * 1.5);\n      }\n\n      var offsetX = (this.game.width - bounds.width * 1.5) / 2 / this.windowScale;\n      this.game.world.scale.set(this.game.world.scale.x * this.windowScale, this.game.world.scale.y * this.windowScale);\n      this.game.world.pivot.set(bounds.x - offsetX, bounds.y - this.inputOptions.padding * 2);\n      PhaserInput.Zoomed = true;\n    };\n\n    InputField.prototype.zoomOut = function () {\n      if (!PhaserInput.Zoomed) {\n        return;\n      }\n\n      this.game.world.scale.set(this.game.world.scale.x / this.windowScale, this.game.world.scale.y / this.windowScale);\n      this.game.world.pivot.set(0, 0);\n      PhaserInput.Zoomed = false;\n    };\n\n    InputField.prototype.keyListener = function (evt) {\n      this.value = this.getFormattedText(this.domElement.value);\n\n      if (evt.keyCode === 13) {\n        if (this.focusOutOnEnter) {\n          this.endFocus();\n        }\n\n        return;\n      }\n\n      this.updateText();\n      this.updateCursor();\n      this.updateSelection();\n      evt.preventDefault();\n    };\n\n    InputField.prototype.destroy = function (destroyChildren) {\n      this.game.input.onDown.remove(this.checkDown, this);\n      this.focusIn.removeAll();\n      this.focusOut.removeAll();\n      this.domElement.destroy();\n\n      _super.prototype.destroy.call(this, destroyChildren);\n    };\n\n    InputField.prototype.resetText = function () {\n      this.setText();\n    };\n\n    InputField.prototype.setText = function (text) {\n      if (text === void 0) {\n        text = '';\n      }\n\n      if (null !== this.placeHolder) {\n        if (text.length > 0) {\n          this.placeHolder.visible = false;\n        } else {\n          this.placeHolder.visible = true;\n        }\n      }\n\n      this.value = this.getFormattedText(text);\n      this.domElement.value = this.value;\n      this.updateText();\n      this.updateCursor();\n      this.endFocus();\n    };\n\n    InputField.prototype.getFormattedText = function (text) {\n      switch (this.inputOptions.forceCase) {\n        default:\n        case ForceCase.none:\n          return text;\n\n        case ForceCase.lower:\n          return text.toLowerCase();\n\n        case ForceCase.upper:\n          return text.toUpperCase();\n      }\n    };\n\n    return InputField;\n  }(Phaser.Sprite);\n\n  PhaserInput.InputField = InputField;\n})(PhaserInput || (PhaserInput = {}));\n\nvar PhaserInput;\n\n(function (PhaserInput) {\n  var InputBox = function (_super) {\n    __extends(InputBox, _super);\n\n    function InputBox(game, inputOptions) {\n      var _this = _super.call(this, game, 0, 0) || this;\n\n      _this.bgColor = inputOptions.backgroundColor ? parseInt(inputOptions.backgroundColor.slice(1), 16) : 0xffffff;\n      _this.borderRadius = inputOptions.borderRadius = typeof inputOptions.borderRadius === 'number' ? inputOptions.borderRadius : 0;\n      _this.borderWidth = inputOptions.borderWidth = typeof inputOptions.borderWidth === 'number' ? inputOptions.borderWidth : 1;\n      _this.borderColor = inputOptions.borderColor ? parseInt(inputOptions.borderColor.slice(1), 16) : 0x959595;\n      _this.boxAlpha = inputOptions.fillAlpha;\n      _this.padding = inputOptions.padding;\n      var height = inputOptions.height;\n      var width = inputOptions.width;\n      var height;\n\n      if (inputOptions.font) {\n        height = Math.max(parseInt(inputOptions.font.substr(0, inputOptions.font.indexOf('px')), 10), height);\n      }\n\n      _this.boxHeight = _this.padding * 2 + height;\n      var width = inputOptions.width;\n      _this.boxWidth = _this.padding * 2 + width;\n\n      _this.drawBox();\n\n      return _this;\n    }\n\n    InputBox.prototype.resize = function (newWidth) {\n      this.boxWidth = this.padding * 2 + newWidth;\n      this.drawBox();\n    };\n\n    InputBox.prototype.drawBox = function () {\n      this.clear().beginFill(this.bgColor, this.boxAlpha).lineStyle(this.borderWidth, this.borderColor, this.boxAlpha);\n\n      if (this.borderRadius > 0) {\n        this.drawRoundedRect(0, 0, this.boxWidth, this.boxHeight, this.borderRadius);\n      } else {\n        this.drawRect(0, 0, this.boxWidth, this.boxHeight);\n      }\n    };\n\n    return InputBox;\n  }(Phaser.Graphics);\n\n  PhaserInput.InputBox = InputBox;\n})(PhaserInput || (PhaserInput = {}));\n\nvar PhaserInput;\n\n(function (PhaserInput) {\n  var SelectionHighlight = function (_super) {\n    __extends(SelectionHighlight, _super);\n\n    function SelectionHighlight(game, inputOptions) {\n      var _this = _super.call(this, game, inputOptions.padding, inputOptions.padding) || this;\n\n      _this.inputOptions = inputOptions;\n      return _this;\n    }\n\n    SelectionHighlight.prototype.updateSelection = function (rect) {\n      var color = Phaser.Color.webToColor(this.inputOptions.selectionColor);\n      this.clear();\n      this.beginFill(SelectionHighlight.rgb2hex(color), color.a);\n      this.drawRect(rect.x, rect.y, rect.width, rect.height - this.inputOptions.padding);\n    };\n\n    SelectionHighlight.rgb2hex = function (color) {\n      return parseInt((\"0\" + color.r.toString(16)).slice(-2) + (\"0\" + color.g.toString(16)).slice(-2) + (\"0\" + color.b.toString(16)).slice(-2), 16);\n    };\n\n    return SelectionHighlight;\n  }(Phaser.Graphics);\n\n  PhaserInput.SelectionHighlight = SelectionHighlight;\n})(PhaserInput || (PhaserInput = {}));\n\nvar PhaserInput;\n\n(function (PhaserInput) {\n  var TextMask = function (_super) {\n    __extends(TextMask, _super);\n\n    function TextMask(game, inputOptions) {\n      var _this = _super.call(this, game, inputOptions.padding, inputOptions.padding) || this;\n\n      var height = inputOptions.height;\n\n      if (inputOptions.font) {\n        height = Math.max(parseInt(inputOptions.font.substr(0, inputOptions.font.indexOf('px')), 10), height);\n      }\n\n      _this.maskWidth = inputOptions.width;\n      _this.maskHeight = height * 1.3;\n\n      _this.drawMask();\n\n      return _this;\n    }\n\n    TextMask.prototype.resize = function (newWidth) {\n      this.maskWidth = newWidth;\n      this.drawMask();\n    };\n\n    TextMask.prototype.drawMask = function () {\n      this.clear().beginFill(0x000000).drawRect(0, 0, this.maskWidth, this.maskHeight).endFill();\n    };\n\n    return TextMask;\n  }(Phaser.Graphics);\n\n  PhaserInput.TextMask = TextMask;\n})(PhaserInput || (PhaserInput = {}));\n\nvar PhaserInput;\n\n(function (PhaserInput) {\n  PhaserInput.Zoomed = false;\n  PhaserInput.KeyboardOpen = false;\n  PhaserInput.onKeyboardOpen = new Phaser.Signal();\n  PhaserInput.onKeyboardClose = new Phaser.Signal();\n\n  var Plugin = function (_super) {\n    __extends(Plugin, _super);\n\n    function Plugin(game, parent) {\n      var _this = _super.call(this, game, parent) || this;\n\n      _this.addInputFieldFactory();\n\n      return _this;\n    }\n\n    Plugin.prototype.addInputFieldFactory = function () {\n      Phaser.GameObjectFactory.prototype.inputField = function (x, y, inputOptions, group) {\n        if (group === undefined) {\n          group = this.world;\n        }\n\n        var nineSliceObject = new PhaserInput.InputField(this.game, x, y, inputOptions);\n        return group.add(nineSliceObject);\n      };\n\n      Phaser.GameObjectCreator.prototype.inputField = function (x, y, inputOptions) {\n        return new PhaserInput.InputField(this.game, x, y, inputOptions);\n      };\n    };\n\n    return Plugin;\n  }(Phaser.Plugin);\n\n  Plugin.Zoomed = false;\n  Plugin.KeyboardOpen = false;\n  Plugin.onKeyboardOpen = new Phaser.Signal();\n  Plugin.onKeyboardClose = new Phaser.Signal();\n  PhaserInput.Plugin = Plugin;\n})(PhaserInput || (PhaserInput = {}));","map":{"version":3,"sources":["../ts/InputElement.ts","../ts/InputField.ts","../ts/Objects/InputBox.ts","../ts/Objects/SelectionHighlight.ts","../ts/Objects/TextMask.ts","../ts/Plugin.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*!\r\n * phaser-input - version 2.0.5 \r\n * Adds input boxes to Phaser like CanvasInput, but also works for WebGL and Mobile, made for Phaser only.\r\n *\r\n * Azerion\r\n * Build at 18-03-2019\r\n * Released under MIT License \r\n */\r\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\nvar PhaserInput;\r\n(function (PhaserInput) {\r\n    var InputType;\r\n    (function (InputType) {\r\n        InputType[InputType[\"text\"] = 0] = \"text\";\r\n        InputType[InputType[\"password\"] = 1] = \"password\";\r\n        InputType[InputType[\"number\"] = 2] = \"number\";\r\n    })(InputType = PhaserInput.InputType || (PhaserInput.InputType = {}));\r\n    var InputElement = (function () {\r\n        function InputElement(game, id, type, value, focusIn, focusOut) {\r\n            if (type === void 0) { type = InputType.text; }\r\n            if (value === void 0) { value = ''; }\r\n            var _this = this;\r\n            this.id = id;\r\n            this.type = type;\r\n            this.game = game;\r\n            this.focusIn = focusIn;\r\n            this.focusOut = focusOut;\r\n            var canvasTopX = this.game.canvas.getBoundingClientRect().top + document.body.scrollTop;\r\n            this.element = document.createElement('input');\r\n            this.element.id = id;\r\n            this.element.style.position = 'absolute';\r\n            this.element.style.top = canvasTopX + 'px';\r\n            this.element.style.left = (-40).toString() + 'px';\r\n            this.element.style.width = (10).toString() + 'px';\r\n            this.element.style.height = (10).toString() + 'px';\r\n            this.element.style.border = '0px';\r\n            this.element.value = this.value;\r\n            this.element.type = InputType[type];\r\n            this.element.addEventListener('focusin', function () {\r\n                if (_this.focusIn instanceof Phaser.Signal) {\r\n                    _this.focusIn.dispatch();\r\n                }\r\n            });\r\n            this.element.addEventListener('focusout', function () {\r\n                if (_this.focusOut instanceof Phaser.Signal) {\r\n                    _this.focusOut.dispatch();\r\n                }\r\n            });\r\n            document.body.appendChild(this.element);\r\n        }\r\n        InputElement.prototype.addKeyUpListener = function (callback) {\r\n            this.keyUpCallback = callback;\r\n            document.addEventListener('keyup', this.keyUpCallback);\r\n            this.element.addEventListener('input', this.keyUpCallback);\r\n        };\r\n        InputElement.prototype.blockKeyDownEvents = function () {\r\n            document.addEventListener('keydown', this.preventKeyPropagation);\r\n        };\r\n        InputElement.prototype.preventKeyPropagation = function (evt) {\r\n            if (evt.stopPropagation) {\r\n                evt.stopPropagation();\r\n            }\r\n            else {\r\n                event.cancelBubble = true;\r\n            }\r\n        };\r\n        InputElement.prototype.unblockKeyDownEvents = function () {\r\n            document.removeEventListener('keydown', this.preventKeyPropagation);\r\n        };\r\n        InputElement.prototype.removeEventListener = function () {\r\n            document.removeEventListener('keyup', this.keyUpCallback);\r\n            this.element.removeEventListener('input', this.keyUpCallback);\r\n        };\r\n        InputElement.prototype.destroy = function () {\r\n            document.body.removeChild(this.element);\r\n        };\r\n        InputElement.prototype.setMax = function (max, min) {\r\n            if (max === undefined) {\r\n                return;\r\n            }\r\n            if (this.type === InputType.text || this.type === InputType.password) {\r\n                this.element.maxLength = parseInt(max, 10);\r\n            }\r\n            else if (this.type === InputType.number) {\r\n                this.element.max = max;\r\n                if (min === undefined) {\r\n                    return;\r\n                }\r\n                this.element.min = min;\r\n            }\r\n        };\r\n        Object.defineProperty(InputElement.prototype, \"value\", {\r\n            get: function () {\r\n                return this.element.value;\r\n            },\r\n            set: function (value) {\r\n                this.element.value = value;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        InputElement.prototype.focus = function () {\r\n            var _this = this;\r\n            this.element.focus();\r\n            if (!this.game.device.desktop && this.game.device.chrome) {\r\n                var originalWidth_1 = window.innerWidth, originalHeight_1 = window.innerHeight;\r\n                var kbAppeared_1 = false;\r\n                var interval_1 = setInterval(function () {\r\n                    if (originalWidth_1 > window.innerWidth || originalHeight_1 > window.innerHeight) {\r\n                        kbAppeared_1 = true;\r\n                    }\r\n                    if (kbAppeared_1 && originalWidth_1 === window.innerWidth && originalHeight_1 === window.innerHeight) {\r\n                        if (_this.focusOut instanceof Phaser.Signal) {\r\n                            _this.focusOut.dispatch();\r\n                        }\r\n                        clearInterval(interval_1);\r\n                    }\r\n                }, 50);\r\n            }\r\n        };\r\n        InputElement.prototype.blur = function () {\r\n            this.element.blur();\r\n        };\r\n        Object.defineProperty(InputElement.prototype, \"hasSelection\", {\r\n            get: function () {\r\n                if (this.type === InputType.number) {\r\n                    return false;\r\n                }\r\n                return this.element.selectionStart !== this.element.selectionEnd;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(InputElement.prototype, \"caretStart\", {\r\n            get: function () {\r\n                return this.element.selectionEnd;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        Object.defineProperty(InputElement.prototype, \"caretEnd\", {\r\n            get: function () {\r\n                return this.element.selectionStart;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        InputElement.prototype.getCaretPosition = function () {\r\n            if (this.type === InputType.number) {\r\n                return -1;\r\n            }\r\n            return this.element.selectionStart;\r\n        };\r\n        InputElement.prototype.setCaretPosition = function (pos) {\r\n            if (this.type === InputType.number) {\r\n                return;\r\n            }\r\n            this.element.setSelectionRange(pos, pos);\r\n        };\r\n        return InputElement;\r\n    }());\r\n    PhaserInput.InputElement = InputElement;\r\n})(PhaserInput || (PhaserInput = {}));\r\nvar PhaserInput;\r\n(function (PhaserInput) {\r\n    var ForceCase;\r\n    (function (ForceCase) {\r\n        ForceCase[ForceCase[\"none\"] = 0] = \"none\";\r\n        ForceCase[ForceCase[\"lower\"] = 1] = \"lower\";\r\n        ForceCase[ForceCase[\"upper\"] = 2] = \"upper\";\r\n    })(ForceCase = PhaserInput.ForceCase || (PhaserInput.ForceCase = {}));\r\n    var InputField = (function (_super) {\r\n        __extends(InputField, _super);\r\n        function InputField(game, x, y, inputOptions) {\r\n            if (inputOptions === void 0) { inputOptions = {}; }\r\n            var _this = _super.call(this, game, x, y) || this;\r\n            _this.focusOutOnEnter = true;\r\n            _this.placeHolder = null;\r\n            _this.box = null;\r\n            _this.focus = false;\r\n            _this.value = '';\r\n            _this.windowScale = 1;\r\n            _this.blockInput = true;\r\n            _this.focusIn = new Phaser.Signal();\r\n            _this.focusOut = new Phaser.Signal();\r\n            _this.blink = true;\r\n            _this.cnt = 0;\r\n            _this.inputOptions = inputOptions;\r\n            _this.inputOptions.width = (typeof inputOptions.width === 'number') ? inputOptions.width : 150;\r\n            _this.inputOptions.padding = (typeof inputOptions.padding === 'number') ? inputOptions.padding : 0;\r\n            _this.inputOptions.textAlign = inputOptions.textAlign || 'left';\r\n            _this.inputOptions.type = inputOptions.type || PhaserInput.InputType.text;\r\n            _this.inputOptions.forceCase = (inputOptions.forceCase) ? inputOptions.forceCase : ForceCase.none;\r\n            _this.inputOptions.borderRadius = (typeof inputOptions.borderRadius === 'number') ? inputOptions.borderRadius : 0;\r\n            _this.inputOptions.height = (typeof inputOptions.height === 'number') ? inputOptions.height : 14;\r\n            _this.inputOptions.fillAlpha = (inputOptions.fillAlpha === undefined) ? 1 : inputOptions.fillAlpha;\r\n            _this.inputOptions.selectionColor = inputOptions.selectionColor || 'rgba(179, 212, 253, 0.8)';\r\n            _this.inputOptions.zoom = (!game.device.desktop) ? inputOptions.zoom || false : false;\r\n            _this.box = new PhaserInput.InputBox(_this.game, inputOptions);\r\n            _this.setTexture(_this.box.generateTexture());\r\n            _this.textMask = new PhaserInput.TextMask(_this.game, inputOptions);\r\n            _this.addChild(_this.textMask);\r\n            _this.domElement = new PhaserInput.InputElement(_this.game, 'phaser-input-' + (Math.random() * 10000 | 0).toString(), _this.inputOptions.type, _this.value, _this.focusIn, _this.focusOut);\r\n            _this.domElement.setMax(_this.inputOptions.max, _this.inputOptions.min);\r\n            _this.selection = new PhaserInput.SelectionHighlight(_this.game, _this.inputOptions);\r\n            _this.selection.mask = _this.textMask;\r\n            _this.addChild(_this.selection);\r\n            if (inputOptions.placeHolder && inputOptions.placeHolder.length > 0) {\r\n                _this.placeHolder = new Phaser.Text(game, _this.inputOptions.padding, _this.inputOptions.padding, inputOptions.placeHolder, {\r\n                    font: inputOptions.font || '14px Arial',\r\n                    fontWeight: inputOptions.fontWeight || 'normal',\r\n                    fill: inputOptions.placeHolderColor || '#bfbebd'\r\n                });\r\n                _this.placeHolder.mask = _this.textMask;\r\n                _this.addChild(_this.placeHolder);\r\n            }\r\n            _this.cursor = new Phaser.Text(game, _this.inputOptions.padding, _this.inputOptions.padding - 2, '|', {\r\n                font: inputOptions.font || '14px Arial',\r\n                fontWeight: inputOptions.fontWeight || 'normal',\r\n                fill: inputOptions.cursorColor || '#000000'\r\n            });\r\n            _this.cursor.visible = false;\r\n            _this.addChild(_this.cursor);\r\n            _this.text = new Phaser.Text(game, _this.inputOptions.padding, _this.inputOptions.padding, '', {\r\n                font: inputOptions.font || '14px Arial',\r\n                fontWeight: inputOptions.fontWeight || 'normal',\r\n                fill: inputOptions.fill || '#000000'\r\n            });\r\n            _this.text.mask = _this.textMask;\r\n            _this.addChild(_this.text);\r\n            _this.offscreenText = new Phaser.Text(game, _this.inputOptions.padding, _this.inputOptions.padding, '', {\r\n                font: inputOptions.font || '14px Arial',\r\n                fontWeight: inputOptions.fontWeight || 'normal',\r\n                fill: inputOptions.fill || '#000000'\r\n            });\r\n            _this.updateTextAlignment();\r\n            _this.inputEnabled = true;\r\n            _this.input.useHandCursor = true;\r\n            _this.game.input.onDown.add(_this.checkDown, _this);\r\n            _this.focusOut.add(function () {\r\n                if (PhaserInput.KeyboardOpen) {\r\n                    _this.endFocus();\r\n                    if (_this.inputOptions.zoom) {\r\n                        _this.zoomOut();\r\n                    }\r\n                }\r\n            });\r\n            return _this;\r\n        }\r\n        Object.defineProperty(InputField.prototype, \"width\", {\r\n            get: function () {\r\n                return this.inputOptions.width;\r\n            },\r\n            set: function (width) {\r\n                this.inputOptions.width = width;\r\n                this.box.resize(width);\r\n                this.textMask.resize(width);\r\n                this.updateTextAlignment();\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        InputField.prototype.updateTextAlignment = function () {\r\n            switch (this.inputOptions.textAlign) {\r\n                case 'left':\r\n                    this.text.anchor.set(0, 0);\r\n                    this.text.x = this.inputOptions.padding;\r\n                    if (null !== this.placeHolder) {\r\n                        this.placeHolder.anchor.set(0, 0);\r\n                    }\r\n                    this.cursor.x = this.inputOptions.padding + this.getCaretPosition();\r\n                    break;\r\n                case 'center':\r\n                    this.text.anchor.set(0.5, 0);\r\n                    this.text.x = this.inputOptions.padding + this.inputOptions.width / 2;\r\n                    if (null !== this.placeHolder) {\r\n                        this.placeHolder.anchor.set(0.5, 0);\r\n                        this.placeHolder.x = this.inputOptions.padding + this.inputOptions.width / 2;\r\n                    }\r\n                    this.cursor.x = this.inputOptions.padding + this.inputOptions.width / 2 - this.text.width / 2 + this.getCaretPosition();\r\n                    break;\r\n                case 'right':\r\n                    this.text.anchor.set(1, 0);\r\n                    this.text.x = this.inputOptions.padding + this.inputOptions.width;\r\n                    if (null !== this.placeHolder) {\r\n                        this.placeHolder.anchor.set(1, 0);\r\n                        this.placeHolder.x = this.inputOptions.padding + this.inputOptions.width;\r\n                    }\r\n                    this.cursor.x = this.inputOptions.padding + this.inputOptions.width;\r\n                    break;\r\n            }\r\n        };\r\n        InputField.prototype.checkDown = function (e) {\r\n            if (!this.value) {\r\n                this.resetText();\r\n            }\r\n            if (this.input.checkPointerOver(e)) {\r\n                if (this.focus) {\r\n                    this.setCaretOnclick(e);\r\n                    return;\r\n                }\r\n                if (this.inputOptions.zoom && !PhaserInput.Zoomed) {\r\n                    this.zoomIn();\r\n                }\r\n                this.startFocus();\r\n            }\r\n            else {\r\n                if (this.focus === true) {\r\n                    this.endFocus();\r\n                    if (this.inputOptions.zoom) {\r\n                        this.zoomOut();\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        InputField.prototype.update = function () {\r\n            this.text.update();\r\n            if (this.placeHolder) {\r\n                this.placeHolder.update();\r\n            }\r\n            if (!this.focus) {\r\n                return;\r\n            }\r\n            if (this.cnt !== 30) {\r\n                return this.cnt++;\r\n            }\r\n            this.cursor.visible = this.blink;\r\n            this.blink = !this.blink;\r\n            this.cnt = 0;\r\n        };\r\n        InputField.prototype.endFocus = function () {\r\n            var _this = this;\r\n            if (!this.focus) {\r\n                return;\r\n            }\r\n            this.domElement.removeEventListener();\r\n            if (this.blockInput === true) {\r\n                this.domElement.unblockKeyDownEvents();\r\n            }\r\n            this.focus = false;\r\n            if (this.value.length === 0 && null !== this.placeHolder) {\r\n                this.placeHolder.visible = true;\r\n            }\r\n            this.cursor.visible = false;\r\n            if (this.game.device.desktop) {\r\n                setTimeout(function () {\r\n                    _this.domElement.blur();\r\n                }, 0);\r\n            }\r\n            else {\r\n                this.domElement.blur();\r\n            }\r\n            if (!this.game.device.desktop) {\r\n                PhaserInput.KeyboardOpen = false;\r\n                PhaserInput.onKeyboardClose.dispatch();\r\n            }\r\n        };\r\n        InputField.prototype.startFocus = function () {\r\n            var _this = this;\r\n            this.focus = true;\r\n            if (null !== this.placeHolder) {\r\n                this.placeHolder.visible = false;\r\n            }\r\n            if (this.game.device.desktop) {\r\n                setTimeout(function () {\r\n                    _this.keyUpProcessor();\r\n                }, 0);\r\n            }\r\n            else {\r\n                this.keyUpProcessor();\r\n            }\r\n            if (!this.game.device.desktop) {\r\n                PhaserInput.KeyboardOpen = true;\r\n                PhaserInput.onKeyboardOpen.dispatch();\r\n            }\r\n        };\r\n        InputField.prototype.keyUpProcessor = function () {\r\n            this.domElement.addKeyUpListener(this.keyListener.bind(this));\r\n            this.domElement.focus();\r\n            if (this.blockInput === true) {\r\n                this.domElement.blockKeyDownEvents();\r\n            }\r\n        };\r\n        InputField.prototype.updateText = function () {\r\n            var text = '';\r\n            if (this.inputOptions.type === PhaserInput.InputType.password) {\r\n                for (var i = 0; i < this.value.length; i++) {\r\n                    text += '*';\r\n                }\r\n            }\r\n            else if (this.inputOptions.type === PhaserInput.InputType.number) {\r\n                var val = parseInt(this.value);\r\n                if (val < parseInt(this.inputOptions.min)) {\r\n                    text = this.value = this.domElement.value = this.inputOptions.min;\r\n                }\r\n                else if (val > parseInt(this.inputOptions.max)) {\r\n                    text = this.value = this.domElement.value = this.inputOptions.max;\r\n                }\r\n                else {\r\n                    text = this.value;\r\n                }\r\n            }\r\n            else {\r\n                text = this.value;\r\n            }\r\n            this.text.setText(text);\r\n            if (this.text.width > this.inputOptions.width) {\r\n                this.text.anchor.x = 1;\r\n                this.text.x = this.inputOptions.padding + this.inputOptions.width;\r\n            }\r\n            else {\r\n                switch (this.inputOptions.textAlign) {\r\n                    case 'left':\r\n                        this.text.anchor.set(0, 0);\r\n                        this.text.x = this.inputOptions.padding;\r\n                        break;\r\n                    case 'center':\r\n                        this.text.anchor.set(0.5, 0);\r\n                        this.text.x = this.inputOptions.padding + this.inputOptions.width / 2;\r\n                        break;\r\n                    case 'right':\r\n                        this.text.anchor.set(1, 0);\r\n                        this.text.x = this.inputOptions.padding + this.inputOptions.width;\r\n                        break;\r\n                }\r\n            }\r\n        };\r\n        InputField.prototype.updateCursor = function () {\r\n            if (this.text.width > this.inputOptions.width || this.inputOptions.textAlign === 'right') {\r\n                this.cursor.x = this.inputOptions.padding + this.inputOptions.width;\r\n            }\r\n            else {\r\n                switch (this.inputOptions.textAlign) {\r\n                    case 'left':\r\n                        this.cursor.x = this.inputOptions.padding + this.getCaretPosition();\r\n                        break;\r\n                    case 'center':\r\n                        this.cursor.x = this.inputOptions.padding + this.inputOptions.width / 2 - this.text.width / 2 + this.getCaretPosition();\r\n                        break;\r\n                }\r\n            }\r\n        };\r\n        InputField.prototype.getCaretPosition = function () {\r\n            var caretPosition = this.domElement.getCaretPosition();\r\n            if (-1 === caretPosition) {\r\n                return this.text.width;\r\n            }\r\n            var text = this.value;\r\n            if (this.inputOptions.type === PhaserInput.InputType.password) {\r\n                text = '';\r\n                for (var i = 0; i < this.value.length; i++) {\r\n                    text += '*';\r\n                }\r\n            }\r\n            this.offscreenText.setText(text.slice(0, caretPosition));\r\n            return this.offscreenText.width;\r\n        };\r\n        InputField.prototype.setCaretOnclick = function (e) {\r\n            var localX = (this.text.toLocal(new PIXI.Point(e.x, e.y), this.game.world)).x;\r\n            if (this.inputOptions.textAlign && this.inputOptions.textAlign === 'center') {\r\n                localX += this.text.width / 2;\r\n            }\r\n            var characterWidth = this.text.width / this.value.length;\r\n            var index = 0;\r\n            for (var i = 0; i < this.value.length; i++) {\r\n                if (localX >= i * characterWidth && localX <= (i + 1) * characterWidth) {\r\n                    index = i;\r\n                    break;\r\n                }\r\n            }\r\n            if (localX > (this.value.length - 1) * characterWidth) {\r\n                index = this.value.length;\r\n            }\r\n            this.startFocus();\r\n            this.domElement.setCaretPosition(index);\r\n            this.updateCursor();\r\n        };\r\n        InputField.prototype.updateSelection = function () {\r\n            if (this.domElement.hasSelection) {\r\n                var text = this.value;\r\n                if (this.inputOptions.type === PhaserInput.InputType.password) {\r\n                    text = '';\r\n                    for (var i = 0; i < this.value.length; i++) {\r\n                        text += '*';\r\n                    }\r\n                }\r\n                text = text.substring(this.domElement.caretStart, this.domElement.caretEnd);\r\n                this.offscreenText.setText(text);\r\n                this.selection.updateSelection(this.offscreenText.getBounds());\r\n                switch (this.inputOptions.textAlign) {\r\n                    case 'left':\r\n                        this.selection.x = this.inputOptions.padding;\r\n                        break;\r\n                    case 'center':\r\n                        this.selection.x = this.inputOptions.padding + this.inputOptions.width / 2 - this.text.width / 2;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                this.selection.clear();\r\n            }\r\n        };\r\n        InputField.prototype.zoomIn = function () {\r\n            if (PhaserInput.Zoomed) {\r\n                return;\r\n            }\r\n            var bounds = this.getBounds();\r\n            if (window.innerHeight > window.innerWidth) {\r\n                this.windowScale = this.game.width / (bounds.width * 1.5);\r\n            }\r\n            else {\r\n                this.windowScale = (this.game.width / 2) / (bounds.width * 1.5);\r\n            }\r\n            var offsetX = ((this.game.width - bounds.width * 1.5) / 2) / this.windowScale;\r\n            this.game.world.scale.set(this.game.world.scale.x * this.windowScale, this.game.world.scale.y * this.windowScale);\r\n            this.game.world.pivot.set(bounds.x - offsetX, bounds.y - this.inputOptions.padding * 2);\r\n            PhaserInput.Zoomed = true;\r\n        };\r\n        InputField.prototype.zoomOut = function () {\r\n            if (!PhaserInput.Zoomed) {\r\n                return;\r\n            }\r\n            this.game.world.scale.set(this.game.world.scale.x / this.windowScale, this.game.world.scale.y / this.windowScale);\r\n            this.game.world.pivot.set(0, 0);\r\n            PhaserInput.Zoomed = false;\r\n        };\r\n        InputField.prototype.keyListener = function (evt) {\r\n            this.value = this.getFormattedText(this.domElement.value);\r\n            if (evt.keyCode === 13) {\r\n                if (this.focusOutOnEnter) {\r\n                    this.endFocus();\r\n                }\r\n                return;\r\n            }\r\n            this.updateText();\r\n            this.updateCursor();\r\n            this.updateSelection();\r\n            evt.preventDefault();\r\n        };\r\n        InputField.prototype.destroy = function (destroyChildren) {\r\n            this.game.input.onDown.remove(this.checkDown, this);\r\n            this.focusIn.removeAll();\r\n            this.focusOut.removeAll();\r\n            this.domElement.destroy();\r\n            _super.prototype.destroy.call(this, destroyChildren);\r\n        };\r\n        InputField.prototype.resetText = function () {\r\n            this.setText();\r\n        };\r\n        InputField.prototype.setText = function (text) {\r\n            if (text === void 0) { text = ''; }\r\n            if (null !== this.placeHolder) {\r\n                if (text.length > 0) {\r\n                    this.placeHolder.visible = false;\r\n                }\r\n                else {\r\n                    this.placeHolder.visible = true;\r\n                }\r\n            }\r\n            this.value = this.getFormattedText(text);\r\n            this.domElement.value = this.value;\r\n            this.updateText();\r\n            this.updateCursor();\r\n            this.endFocus();\r\n        };\r\n        InputField.prototype.getFormattedText = function (text) {\r\n            switch (this.inputOptions.forceCase) {\r\n                default:\r\n                case ForceCase.none:\r\n                    return text;\r\n                case ForceCase.lower:\r\n                    return text.toLowerCase();\r\n                case ForceCase.upper:\r\n                    return text.toUpperCase();\r\n            }\r\n        };\r\n        return InputField;\r\n    }(Phaser.Sprite));\r\n    PhaserInput.InputField = InputField;\r\n})(PhaserInput || (PhaserInput = {}));\r\nvar PhaserInput;\r\n(function (PhaserInput) {\r\n    var InputBox = (function (_super) {\r\n        __extends(InputBox, _super);\r\n        function InputBox(game, inputOptions) {\r\n            var _this = _super.call(this, game, 0, 0) || this;\r\n            _this.bgColor = (inputOptions.backgroundColor) ? parseInt(inputOptions.backgroundColor.slice(1), 16) : 0xffffff;\r\n            _this.borderRadius = inputOptions.borderRadius = (typeof inputOptions.borderRadius === 'number') ? inputOptions.borderRadius : 0;\r\n            _this.borderWidth = inputOptions.borderWidth = (typeof inputOptions.borderWidth === 'number') ? inputOptions.borderWidth : 1;\r\n            _this.borderColor = (inputOptions.borderColor) ? parseInt(inputOptions.borderColor.slice(1), 16) : 0x959595;\r\n            _this.boxAlpha = inputOptions.fillAlpha;\r\n            _this.padding = inputOptions.padding;\r\n            var height = inputOptions.height;\r\n            var width = inputOptions.width;\r\n            var height;\r\n            if (inputOptions.font) {\r\n                height = Math.max(parseInt(inputOptions.font.substr(0, inputOptions.font.indexOf('px')), 10), height);\r\n            }\r\n            _this.boxHeight = _this.padding * 2 + height;\r\n            var width = inputOptions.width;\r\n            _this.boxWidth = _this.padding * 2 + width;\r\n            _this.drawBox();\r\n            return _this;\r\n        }\r\n        InputBox.prototype.resize = function (newWidth) {\r\n            this.boxWidth = this.padding * 2 + newWidth;\r\n            this.drawBox();\r\n        };\r\n        InputBox.prototype.drawBox = function () {\r\n            this.clear()\r\n                .beginFill(this.bgColor, this.boxAlpha)\r\n                .lineStyle(this.borderWidth, this.borderColor, this.boxAlpha);\r\n            if (this.borderRadius > 0) {\r\n                this.drawRoundedRect(0, 0, this.boxWidth, this.boxHeight, this.borderRadius);\r\n            }\r\n            else {\r\n                this.drawRect(0, 0, this.boxWidth, this.boxHeight);\r\n            }\r\n        };\r\n        return InputBox;\r\n    }(Phaser.Graphics));\r\n    PhaserInput.InputBox = InputBox;\r\n})(PhaserInput || (PhaserInput = {}));\r\nvar PhaserInput;\r\n(function (PhaserInput) {\r\n    var SelectionHighlight = (function (_super) {\r\n        __extends(SelectionHighlight, _super);\r\n        function SelectionHighlight(game, inputOptions) {\r\n            var _this = _super.call(this, game, inputOptions.padding, inputOptions.padding) || this;\r\n            _this.inputOptions = inputOptions;\r\n            return _this;\r\n        }\r\n        SelectionHighlight.prototype.updateSelection = function (rect) {\r\n            var color = Phaser.Color.webToColor(this.inputOptions.selectionColor);\r\n            this.clear();\r\n            this.beginFill(SelectionHighlight.rgb2hex(color), color.a);\r\n            this.drawRect(rect.x, rect.y, rect.width, rect.height - this.inputOptions.padding);\r\n        };\r\n        SelectionHighlight.rgb2hex = function (color) {\r\n            return parseInt((\"0\" + color.r.toString(16)).slice(-2) +\r\n                (\"0\" + color.g.toString(16)).slice(-2) +\r\n                (\"0\" + color.b.toString(16)).slice(-2), 16);\r\n        };\r\n        return SelectionHighlight;\r\n    }(Phaser.Graphics));\r\n    PhaserInput.SelectionHighlight = SelectionHighlight;\r\n})(PhaserInput || (PhaserInput = {}));\r\nvar PhaserInput;\r\n(function (PhaserInput) {\r\n    var TextMask = (function (_super) {\r\n        __extends(TextMask, _super);\r\n        function TextMask(game, inputOptions) {\r\n            var _this = _super.call(this, game, inputOptions.padding, inputOptions.padding) || this;\r\n            var height = inputOptions.height;\r\n            if (inputOptions.font) {\r\n                height = Math.max(parseInt(inputOptions.font.substr(0, inputOptions.font.indexOf('px')), 10), height);\r\n            }\r\n            _this.maskWidth = inputOptions.width;\r\n            _this.maskHeight = height * 1.3;\r\n            _this.drawMask();\r\n            return _this;\r\n        }\r\n        TextMask.prototype.resize = function (newWidth) {\r\n            this.maskWidth = newWidth;\r\n            this.drawMask();\r\n        };\r\n        TextMask.prototype.drawMask = function () {\r\n            this.clear()\r\n                .beginFill(0x000000)\r\n                .drawRect(0, 0, this.maskWidth, this.maskHeight)\r\n                .endFill();\r\n        };\r\n        return TextMask;\r\n    }(Phaser.Graphics));\r\n    PhaserInput.TextMask = TextMask;\r\n})(PhaserInput || (PhaserInput = {}));\r\nvar PhaserInput;\r\n(function (PhaserInput) {\r\n    PhaserInput.Zoomed = false;\r\n    PhaserInput.KeyboardOpen = false;\r\n    PhaserInput.onKeyboardOpen = new Phaser.Signal();\r\n    PhaserInput.onKeyboardClose = new Phaser.Signal();\r\n    var Plugin = (function (_super) {\r\n        __extends(Plugin, _super);\r\n        function Plugin(game, parent) {\r\n            var _this = _super.call(this, game, parent) || this;\r\n            _this.addInputFieldFactory();\r\n            return _this;\r\n        }\r\n        Plugin.prototype.addInputFieldFactory = function () {\r\n            Phaser.GameObjectFactory.prototype.inputField = function (x, y, inputOptions, group) {\r\n                if (group === undefined) {\r\n                    group = this.world;\r\n                }\r\n                var nineSliceObject = new PhaserInput.InputField(this.game, x, y, inputOptions);\r\n                return group.add(nineSliceObject);\r\n            };\r\n            Phaser.GameObjectCreator.prototype.inputField = function (x, y, inputOptions) {\r\n                return new PhaserInput.InputField(this.game, x, y, inputOptions);\r\n            };\r\n        };\r\n        return Plugin;\r\n    }(Phaser.Plugin));\r\n    Plugin.Zoomed = false;\r\n    Plugin.KeyboardOpen = false;\r\n    Plugin.onKeyboardOpen = new Phaser.Signal();\r\n    Plugin.onKeyboardClose = new Phaser.Signal();\r\n    PhaserInput.Plugin = Plugin;\r\n})(PhaserInput || (PhaserInput = {}));\r\n//# sourceMappingURL=phaser-input.js.map"]},"metadata":{},"sourceType":"script"}