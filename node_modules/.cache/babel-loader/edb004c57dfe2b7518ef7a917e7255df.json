{"ast":null,"code":"import Render from './render/Render.js';\nimport CanvasMethods from './CanvasMethods.js';\nimport TextureMethods from './TextureMethods.js';\nconst CanvasPool = Phaser.Display.Canvas.CanvasPool;\nconst GameObject = Phaser.GameObjects.GameObject;\n\nclass Canvas extends GameObject {\n  constructor(scene, x, y, width, height) {\n    if (x === undefined) {\n      x = 0;\n    }\n\n    if (y === undefined) {\n      y = 0;\n    }\n\n    if (width === undefined) {\n      width = 1;\n    }\n\n    if (height === undefined) {\n      height = 1;\n    }\n\n    super(scene, 'rexCanvas');\n    this.renderer = scene.sys.game.renderer;\n    this.resolution = scene.sys.game.config.resolution;\n    this.canvas = CanvasPool.create(this, this.resolution * width, this.resolution * height);\n    this.context = this.canvas.getContext('2d');\n    this.dirty = false;\n    this.setPosition(x, y);\n    this.setSize(width, height);\n    this.setOrigin(0.5, 0.5);\n    this.initPipeline();\n    this._crop = this.resetCropObject(); //  Create a Texture for this Text object\n\n    this.texture = scene.sys.textures.addCanvas(null, this.canvas, true); //  Get the frame\n\n    this.frame = this.texture.get(); //  Set the resolution\n\n    this.frame.source.resolution = this.resolution;\n\n    if (this.renderer.gl) {\n      //  Clear the default 1x1 glTexture, as we override it later\n      this.renderer.deleteTexture(this.frame.source.glTexture);\n      this.frame.source.glTexture = null;\n    }\n\n    this.dirty = true;\n    scene.sys.game.events.on('contextrestored', function () {\n      this.dirty = true;\n    }, this);\n  }\n\n  getCanvas(readOnly) {\n    if (!readOnly) {\n      this.dirty = true;\n    }\n\n    return this.canvas;\n  }\n\n  getContext(readOnly) {\n    if (!readOnly) {\n      this.dirty = true;\n    }\n\n    return this.context;\n  }\n\n  needRedraw() {\n    this.dirty = true;\n    return this;\n  }\n\n  preDestroy() {\n    CanvasPool.remove(this.canvas);\n  }\n\n  resize(width, height) {\n    if (this.width === width && this.height === height) {\n      return this;\n    }\n\n    this.setSize(width, height).updateDisplayOrigin();\n    width *= this.resolution;\n    height *= this.resolution;\n    width = Math.max(Math.ceil(width), 1);\n    height = Math.max(Math.ceil(height), 1);\n    this.canvas.width = width;\n    this.canvas.height = height;\n    this.frame.setSize(width, height);\n    this.dirty = true;\n    return this;\n  }\n\n}\n\nconst Components = Phaser.GameObjects.Components;\nPhaser.Class.mixin(Canvas, [Components.Alpha, Components.BlendMode, Components.ComputedSize, Components.Crop, Components.Depth, Components.Flip, Components.GetBounds, Components.Mask, Components.Origin, Components.Pipeline, Components.ScrollFactor, Components.Tint, Components.Transform, Components.Visible, Render, CanvasMethods, TextureMethods]);\nexport default Canvas;","map":{"version":3,"sources":["/home/jon/code/Projects/Soulys/frontend/node_modules/phaser3-rex-plugins/plugins/gameobjects/canvas/Canvas.js"],"names":["Render","CanvasMethods","TextureMethods","CanvasPool","Phaser","Display","Canvas","GameObject","GameObjects","constructor","scene","x","y","width","height","undefined","renderer","sys","game","resolution","config","canvas","create","context","getContext","dirty","setPosition","setSize","setOrigin","initPipeline","_crop","resetCropObject","texture","textures","addCanvas","frame","get","source","gl","deleteTexture","glTexture","events","on","getCanvas","readOnly","needRedraw","preDestroy","remove","resize","updateDisplayOrigin","Math","max","ceil","Components","Class","mixin","Alpha","BlendMode","ComputedSize","Crop","Depth","Flip","GetBounds","Mask","Origin","Pipeline","ScrollFactor","Tint","Transform","Visible"],"mappings":"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","sourcesContent":["import Render from './render/Render.js';\r\nimport CanvasMethods from './CanvasMethods.js';\r\nimport TextureMethods from './TextureMethods.js';\r\n\r\nconst CanvasPool = Phaser.Display.Canvas.CanvasPool;\r\nconst GameObject = Phaser.GameObjects.GameObject;\r\n\r\nclass Canvas extends GameObject {\r\n    constructor(scene, x, y, width, height) {\r\n        if (x === undefined) {\r\n            x = 0;\r\n        }\r\n        if (y === undefined) {\r\n            y = 0;\r\n        }\r\n        if (width === undefined) {\r\n            width = 1;\r\n        }\r\n        if (height === undefined) {\r\n            height = 1;\r\n        }\r\n\r\n        super(scene, 'rexCanvas');\r\n\r\n        this.renderer = scene.sys.game.renderer;\r\n\r\n        this.resolution = scene.sys.game.config.resolution;\r\n        this.canvas = CanvasPool.create(this, this.resolution * width, this.resolution * height);\r\n        this.context = this.canvas.getContext('2d');\r\n        this.dirty = false;\r\n\r\n        this.setPosition(x, y);\r\n        this.setSize(width, height);\r\n        this.setOrigin(0.5, 0.5);\r\n        this.initPipeline();\r\n\r\n        this._crop = this.resetCropObject();\r\n\r\n        //  Create a Texture for this Text object\r\n        this.texture = scene.sys.textures.addCanvas(null, this.canvas, true);\r\n\r\n        //  Get the frame\r\n        this.frame = this.texture.get();\r\n\r\n        //  Set the resolution\r\n        this.frame.source.resolution = this.resolution;\r\n\r\n        if (this.renderer.gl) {\r\n            //  Clear the default 1x1 glTexture, as we override it later\r\n            this.renderer.deleteTexture(this.frame.source.glTexture);\r\n            this.frame.source.glTexture = null;\r\n        }\r\n\r\n        this.dirty = true;\r\n\r\n        scene.sys.game.events.on('contextrestored', function () {\r\n            this.dirty = true;\r\n        }, this);\r\n    }\r\n\r\n    getCanvas(readOnly) {\r\n        if (!readOnly) {\r\n            this.dirty = true;\r\n        }\r\n        return this.canvas;\r\n    }\r\n\r\n    getContext(readOnly) {\r\n        if (!readOnly) {\r\n            this.dirty = true;\r\n        }\r\n        return this.context;\r\n    }\r\n\r\n    needRedraw() {\r\n        this.dirty = true;\r\n        return this;\r\n    }\r\n\r\n    preDestroy() {\r\n        CanvasPool.remove(this.canvas);\r\n    }\r\n\r\n    resize(width, height) {\r\n        if ((this.width === width) && (this.height === height)) {\r\n            return this;\r\n        }\r\n\r\n        this\r\n            .setSize(width, height)\r\n            .updateDisplayOrigin();\r\n\r\n        width *= this.resolution;\r\n        height *= this.resolution;\r\n        width = Math.max(Math.ceil(width), 1);\r\n        height = Math.max(Math.ceil(height), 1);\r\n        this.canvas.width = width;\r\n        this.canvas.height = height;\r\n\r\n        this.frame.setSize(width, height);\r\n\r\n        this.dirty = true;\r\n        return this;\r\n    }\r\n}\r\n\r\nconst Components = Phaser.GameObjects.Components;\r\nPhaser.Class.mixin(Canvas,\r\n    [\r\n        Components.Alpha,\r\n        Components.BlendMode,\r\n        Components.ComputedSize,\r\n        Components.Crop,\r\n        Components.Depth,\r\n        Components.Flip,\r\n        Components.GetBounds,\r\n        Components.Mask,\r\n        Components.Origin,\r\n        Components.Pipeline,\r\n        Components.ScrollFactor,\r\n        Components.Tint,\r\n        Components.Transform,\r\n        Components.Visible,\r\n        Render,\r\n        CanvasMethods,\r\n        TextureMethods,\r\n    ]\r\n);\r\n\r\nexport default Canvas;"]},"metadata":{},"sourceType":"module"}