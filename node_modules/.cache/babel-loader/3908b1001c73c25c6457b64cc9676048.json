{"ast":null,"code":"import RunChildrenWrap from './RunChildrenWrap.js';\nimport GlobZone from '../../../plugins/utils/actions/GlobZone.js';\nimport AlignIn from '../../../plugins/utils/align/align/in/QuickSet.js';\nimport { GetDisplayWidth, GetDisplayHeight } from '../../../plugins/utils/size/GetDisplaySize.js';\n\nvar Layout = function (parent, newWidth, newHeight) {\n  // Skip hidden or !dirty sizer\n  if (this.rexSizer.hidden || !this.dirty) {\n    return this;\n  }\n\n  this.preLayout(parent); // Set size\n\n  if (newWidth === undefined) {\n    newWidth = Math.max(this.maxChildWidth + this.space.left + this.space.right, this.minWidth);\n  }\n\n  if (newHeight === undefined) {\n    newHeight = Math.max(this.maxChildHeight + this.space.top + this.space.bottom, this.minHeight);\n  }\n\n  var innerLineWidth;\n\n  if (this.orientation === 0) {\n    // x\n    innerLineWidth = newWidth - this.space.left - this.space.right;\n  } else {\n    // y\n    innerLineWidth = newHeight - this.space.top - this.space.bottom;\n  }\n\n  var wrapResult = RunChildrenWrap.call(this, innerLineWidth); // Expanded height is less then min-lines-height\n\n  if (this.orientation === 0) {\n    // x\n    newHeight = Math.max(newHeight, wrapResult.height + this.space.top + this.space.bottom);\n  } else {\n    // y\n    newWidth = Math.max(newWidth, wrapResult.height + this.space.left + this.space.right);\n  }\n\n  this.resize(newWidth, newHeight); // Layout children    \n\n  var child,\n      childConfig,\n      padding,\n      justifySpace = 0;\n  var startX = this.innerLeft,\n      startY = this.innerTop;\n  var itemX = startX,\n      itemY = startY;\n  var x, y, width, height; // Align zone\n  // Layout each line\n\n  var lines = wrapResult.lines;\n  var line, lineChlidren, remainderLineWidth;\n\n  for (var i = 0, icnt = lines.length; i < icnt; i++) {\n    line = lines[i];\n    lineChlidren = line.children;\n\n    if (this.rtl) {\n      lineChlidren.reverse();\n    }\n\n    remainderLineWidth = innerLineWidth - line.width;\n\n    switch (this.align) {\n      case 0:\n        // left\n        break;\n\n      case 1:\n        // right\n        if (this.orientation === 0) {\n          // x\n          itemX += remainderLineWidth;\n        } else {\n          itemY += remainderLineWidth;\n        }\n\n        break;\n\n      case 2:\n        // center\n        if (this.orientation === 0) {\n          // x\n          itemX += remainderLineWidth / 2;\n        } else {\n          itemY += remainderLineWidth / 2;\n        }\n\n        break;\n\n      case 3:\n        // justify-left\n        justifySpace = GetJustifySpace(innerLineWidth, remainderLineWidth, lineChlidren.length);\n        break;\n\n      case 4:\n        // justify-right\n        justifySpace = GetJustifySpace(innerLineWidth, remainderLineWidth, lineChlidren.length);\n\n        if (justifySpace === 0) {\n          // Align right\n          if (this.orientation === 0) {\n            // x\n            itemX += remainderLineWidth;\n          } else {\n            itemY += remainderLineWidth;\n          }\n        }\n\n        break;\n\n      case 5:\n        // justify-center\n        justifySpace = GetJustifySpace(innerLineWidth, remainderLineWidth, lineChlidren.length);\n\n        if (justifySpace === 0) {\n          // Align center\n          if (this.orientation === 0) {\n            // x\n            itemX += remainderLineWidth / 2;\n          } else {\n            itemY += remainderLineWidth / 2;\n          }\n        }\n\n        break;\n    }\n\n    for (var j = 0, jcnt = lineChlidren.length; j < jcnt; j++) {\n      child = lineChlidren[j];\n      childConfig = child.rexSizer;\n      padding = childConfig.padding;\n\n      if (this.orientation === 0) {\n        // x\n        x = itemX + padding.left;\n\n        if (j > 0) {\n          x += this.space.item;\n        }\n\n        y = itemY + padding.top;\n        width = GetDisplayWidth(child);\n        height = GetDisplayHeight(child);\n        itemX = x + width + padding.right + justifySpace;\n      } else {\n        // y\n        x = itemX + padding.left;\n        y = itemY + padding.top;\n\n        if (j > 0) {\n          y += this.space.item;\n        }\n\n        width = GetDisplayWidth(child);\n        height = GetDisplayHeight(child);\n        itemY = y + height + padding.bottom + justifySpace;\n      }\n\n      GlobZone.setPosition(x, y).setSize(width, height);\n      AlignIn(child, GlobZone, childConfig.align);\n      this.resetChildPositionState(child);\n    }\n\n    if (this.orientation === 0) {\n      // x\n      itemX = startX;\n      itemY += line.height + this.space.line;\n    } else {\n      // y\n      itemX += line.height + this.space.line;\n      itemY = startY;\n    }\n  } // Layout background children\n\n\n  this.layoutBackgrounds();\n  return this.postLayout();\n};\n\nvar GetJustifySpace = function (total, remainder, childCount) {\n  return remainder / total <= 0.25 ? remainder / (childCount - 1) : 0;\n};\n\nexport default Layout;","map":{"version":3,"sources":["/home/jon/code/Projects/Soulys/frontend/node_modules/phaser3-rex-plugins/templates/ui/fixwidthsizer/Layout.js"],"names":["RunChildrenWrap","GlobZone","AlignIn","GetDisplayWidth","GetDisplayHeight","Layout","parent","newWidth","newHeight","rexSizer","hidden","dirty","preLayout","undefined","Math","max","maxChildWidth","space","left","right","minWidth","maxChildHeight","top","bottom","minHeight","innerLineWidth","orientation","wrapResult","call","height","resize","child","childConfig","padding","justifySpace","startX","innerLeft","startY","innerTop","itemX","itemY","x","y","width","lines","line","lineChlidren","remainderLineWidth","i","icnt","length","children","rtl","reverse","align","GetJustifySpace","j","jcnt","item","setPosition","setSize","resetChildPositionState","layoutBackgrounds","postLayout","total","remainder","childCount"],"mappings":"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","sourcesContent":["import RunChildrenWrap from './RunChildrenWrap.js';\r\nimport GlobZone from '../../../plugins/utils/actions/GlobZone.js';\r\nimport AlignIn from '../../../plugins/utils/align/align/in/QuickSet.js';\r\nimport { GetDisplayWidth, GetDisplayHeight } from '../../../plugins/utils/size/GetDisplaySize.js';\r\n\r\nvar Layout = function (parent, newWidth, newHeight) {\r\n    // Skip hidden or !dirty sizer\r\n    if (this.rexSizer.hidden || (!this.dirty)) {\r\n        return this;\r\n    }\r\n\r\n    this.preLayout(parent);\r\n\r\n    // Set size\r\n    if (newWidth === undefined) {\r\n        newWidth = Math.max((this.maxChildWidth + this.space.left + this.space.right), this.minWidth);\r\n    }\r\n    if (newHeight === undefined) {\r\n        newHeight = Math.max((this.maxChildHeight + this.space.top + this.space.bottom), this.minHeight);\r\n    }\r\n\r\n    var innerLineWidth;\r\n    if (this.orientation === 0) { // x\r\n        innerLineWidth = newWidth - this.space.left - this.space.right;\r\n    } else { // y\r\n        innerLineWidth = newHeight - this.space.top - this.space.bottom;\r\n    }\r\n    var wrapResult = RunChildrenWrap.call(this, innerLineWidth);\r\n    // Expanded height is less then min-lines-height\r\n    if (this.orientation === 0) { // x\r\n        newHeight = Math.max(newHeight, (wrapResult.height + this.space.top + this.space.bottom));\r\n    } else { // y\r\n        newWidth = Math.max(newWidth, (wrapResult.height + this.space.left + this.space.right));\r\n    }\r\n    this.resize(newWidth, newHeight);\r\n\r\n    // Layout children    \r\n    var child, childConfig, padding, justifySpace = 0;\r\n    var startX = this.innerLeft,\r\n        startY = this.innerTop;\r\n    var itemX = startX,\r\n        itemY = startY;\r\n    var x, y, width, height; // Align zone\r\n\r\n    // Layout each line\r\n    var lines = wrapResult.lines;\r\n    var line, lineChlidren, remainderLineWidth;\r\n    for (var i = 0, icnt = lines.length; i < icnt; i++) {\r\n        line = lines[i];\r\n        lineChlidren = line.children;\r\n\r\n        if (this.rtl) {\r\n            lineChlidren.reverse();\r\n        }\r\n\r\n        remainderLineWidth = (innerLineWidth - line.width);\r\n        switch (this.align) {\r\n            case 0: // left\r\n                break;\r\n            case 1: // right\r\n                if (this.orientation === 0) { // x\r\n                    itemX += remainderLineWidth;\r\n                } else {\r\n                    itemY += remainderLineWidth;\r\n                }\r\n                break;\r\n            case 2: // center\r\n                if (this.orientation === 0) { // x\r\n                    itemX += remainderLineWidth / 2;\r\n                } else {\r\n                    itemY += remainderLineWidth / 2;\r\n                }\r\n                break;\r\n            case 3: // justify-left\r\n                justifySpace = GetJustifySpace(innerLineWidth, remainderLineWidth, lineChlidren.length);\r\n                break;\r\n            case 4: // justify-right\r\n                justifySpace = GetJustifySpace(innerLineWidth, remainderLineWidth, lineChlidren.length);\r\n                if (justifySpace === 0) {\r\n                    // Align right\r\n                    if (this.orientation === 0) { // x\r\n                        itemX += remainderLineWidth;\r\n                    } else {\r\n                        itemY += remainderLineWidth;\r\n                    }\r\n                }\r\n                break;\r\n            case 5: // justify-center\r\n                justifySpace = GetJustifySpace(innerLineWidth, remainderLineWidth, lineChlidren.length);\r\n                if (justifySpace === 0) {\r\n                    // Align center\r\n                    if (this.orientation === 0) { // x\r\n                        itemX += remainderLineWidth / 2;\r\n                    } else {\r\n                        itemY += remainderLineWidth / 2;\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n\r\n\r\n        for (var j = 0, jcnt = lineChlidren.length; j < jcnt; j++) {\r\n            child = lineChlidren[j];\r\n            childConfig = child.rexSizer;\r\n            padding = childConfig.padding;\r\n            if (this.orientation === 0) { // x\r\n                x = (itemX + padding.left);\r\n                if (j > 0) {\r\n                    x += this.space.item;\r\n                }\r\n\r\n                y = (itemY + padding.top);\r\n                width = GetDisplayWidth(child);\r\n                height = GetDisplayHeight(child);\r\n                itemX = x + width + padding.right + justifySpace;\r\n            } else { // y\r\n                x = (itemX + padding.left);\r\n\r\n                y = (itemY + padding.top);\r\n                if (j > 0) {\r\n                    y += this.space.item;\r\n                }\r\n\r\n                width = GetDisplayWidth(child);\r\n                height = GetDisplayHeight(child);\r\n                itemY = y + height + padding.bottom + justifySpace;\r\n            }\r\n\r\n            GlobZone.setPosition(x, y).setSize(width, height);\r\n            AlignIn(child, GlobZone, childConfig.align);\r\n            this.resetChildPositionState(child);\r\n        }\r\n\r\n        if (this.orientation === 0) { // x\r\n            itemX = startX;\r\n            itemY += line.height + this.space.line;\r\n        } else { // y\r\n            itemX += line.height + this.space.line;\r\n            itemY = startY;\r\n        }\r\n    }\r\n\r\n    // Layout background children\r\n    this.layoutBackgrounds();\r\n\r\n    return this.postLayout();\r\n}\r\n\r\nvar GetJustifySpace = function (total, remainder, childCount) {\r\n    return ((remainder / total) <= 0.25) ? (remainder / (childCount - 1)) : 0;\r\n}\r\n\r\nexport default Layout;"]},"metadata":{},"sourceType":"module"}