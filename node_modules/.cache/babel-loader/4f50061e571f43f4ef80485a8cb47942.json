{"ast":null,"code":"import Sizer from '../sizer/Sizer.js';\nimport AddChildMask from '../utils/AddChildMask.js';\nimport Slider from '../slider/Slider.js';\nconst GetValue = Phaser.Utils.Objects.GetValue;\nconst Percent = Phaser.Math.Percent;\nconst Linear = Phaser.Math.Linear;\n\nclass NumberBar extends Sizer {\n  constructor(scene, config) {\n    // Create sizer\n    super(scene, config);\n    this.type = 'rexNumberBar'; // Add elements\n\n    var background = GetValue(config, 'background', undefined);\n    var icon = GetValue(config, 'icon', undefined);\n    var iconMask = GetValue(config, 'iconMask', undefined);\n    var sliderConfig = GetValue(config, 'slider', undefined);\n    var text = GetValue(config, 'text', undefined); // Space\n\n    var iconSpace = GetValue(config, 'space.icon', 0);\n    var sliderSpace = GetValue(config, 'space.slider', 0);\n\n    if (background) {\n      this.addBackground(background);\n    }\n\n    if (icon) {\n      var padding;\n\n      if (this.orientation === 0) {\n        if (sliderConfig || text) {\n          padding = {\n            right: iconSpace\n          };\n        }\n      } else {\n        if (sliderConfig || text) {\n          padding = {\n            bottom: iconSpace\n          };\n        }\n      }\n\n      this.add(icon, 0, 'center', padding);\n\n      if (iconMask) {\n        iconMask = this.addChildMask(icon, icon, 1); // Circle mask\n      }\n    }\n\n    var slider;\n\n    if (sliderConfig) {\n      sliderConfig.orientation = this.orientation;\n      sliderConfig.eventEmitter = this;\n      sliderConfig.value = null;\n\n      if (!sliderConfig.hasOwnProperty('input')) {\n        sliderConfig.input = -1;\n      }\n\n      slider = new Slider(scene, sliderConfig);\n      var padding;\n\n      if (this.orientation === 0) {\n        if (text) {\n          padding = {\n            right: sliderSpace\n          };\n        }\n      } else {\n        if (text) {\n          padding = {\n            bottom: sliderSpace\n          };\n        }\n      }\n\n      var proportion;\n\n      if (this.orientation === 0) {\n        var sliderWidth = GetValue(sliderConfig, 'width', undefined);\n        proportion = sliderWidth === undefined ? 1 : 0;\n      } else {\n        var sliderHeight = GetValue(sliderConfig, 'height', undefined);\n        proportion = sliderHeight === undefined ? 1 : 0;\n      }\n\n      this.add(slider, proportion, 'center', padding);\n    }\n\n    if (text) {\n      this.add(text);\n    }\n\n    this.addChildrenMap('background', background);\n    this.addChildrenMap('icon', icon);\n    this.addChildrenMap('iconMask', iconMask);\n    this.addChildrenMap('slider', slider);\n    this.addChildrenMap('text', text);\n    var callback = GetValue(config, 'valuechangeCallback', null);\n\n    if (callback !== null) {\n      var scope = GetValue(config, 'valuechangeCallbackScope', undefined);\n      this.on('valuechange', callback, scope);\n    }\n\n    this.setEnable(GetValue(config, 'enable', undefined));\n    this.setValue(GetValue(config, 'value', 0));\n  }\n\n  setEnable(enable) {\n    if (this.childrenMap.slider) {\n      return this;\n    }\n\n    if (enable === undefined) {\n      enable = true;\n    }\n\n    this.childrenMap.slider.enable = enable;\n    return this;\n  }\n\n  get value() {\n    if (this.childrenMap.slider) {\n      return this.childrenMap.slider.value;\n    }\n\n    return 0;\n  }\n\n  set value(value) {\n    if (!this.childrenMap.slider) {\n      return;\n    }\n\n    this.childrenMap.slider.value = value;\n  }\n\n  setValue(value, min, max) {\n    if (min !== undefined) {\n      value = Percent(value, min, max);\n    }\n\n    this.value = value;\n    return this;\n  }\n\n  addValue(inc, min, max) {\n    if (min !== undefined) {\n      inc = Percent(inc, min, max);\n    }\n\n    this.value += inc;\n    return this;\n  }\n\n  getValue(min, max) {\n    var value = this.value;\n\n    if (min !== undefined) {\n      value = Linear(min, max, value);\n    }\n\n    return value;\n  }\n\n  get text() {\n    var textObject = this.childrenMap.text;\n\n    if (textObject === undefined) {\n      return '';\n    }\n\n    var value;\n\n    if (textObject.text) {\n      value = textObject.text;\n    } else {\n      value = textObject.getData('text');\n    }\n\n    return value;\n  }\n\n  set text(value) {\n    var textObject = this.childrenMap.text;\n\n    if (textObject === undefined) {\n      return;\n    }\n\n    if (textObject.setText) {\n      textObject.setText(value);\n    } else {\n      textObject.setData('text', value);\n    }\n  }\n\n  setText(value) {\n    this.text = value;\n    return this;\n  }\n\n}\n\nvar methods = {\n  addChildMask: AddChildMask\n};\nObject.assign(NumberBar.prototype, methods);\nexport default NumberBar;","map":{"version":3,"sources":["/home/jon/code/Projects/Soulys/frontend/node_modules/phaser3-rex-plugins/templates/ui/numberbar/NumberBar.js"],"names":["Sizer","AddChildMask","Slider","GetValue","Phaser","Utils","Objects","Percent","Math","Linear","NumberBar","constructor","scene","config","type","background","undefined","icon","iconMask","sliderConfig","text","iconSpace","sliderSpace","addBackground","padding","orientation","right","bottom","add","addChildMask","slider","eventEmitter","value","hasOwnProperty","input","proportion","sliderWidth","sliderHeight","addChildrenMap","callback","scope","on","setEnable","setValue","enable","childrenMap","min","max","addValue","inc","getValue","textObject","getData","setText","setData","methods","Object","assign","prototype"],"mappings":"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","sourcesContent":["import Sizer from '../sizer/Sizer.js';\r\nimport AddChildMask from '../utils/AddChildMask.js';\r\nimport Slider from '../slider/Slider.js';\r\n\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\nconst Percent = Phaser.Math.Percent;\r\nconst Linear = Phaser.Math.Linear;\r\n\r\nclass NumberBar extends Sizer {\r\n    constructor(scene, config) {\r\n        // Create sizer\r\n        super(scene, config);\r\n        this.type = 'rexNumberBar';\r\n\r\n        // Add elements\r\n        var background = GetValue(config, 'background', undefined);\r\n        var icon = GetValue(config, 'icon', undefined);\r\n        var iconMask = GetValue(config, 'iconMask', undefined);\r\n        var sliderConfig = GetValue(config, 'slider', undefined);\r\n        var text = GetValue(config, 'text', undefined);\r\n\r\n        // Space\r\n        var iconSpace = GetValue(config, 'space.icon', 0);\r\n        var sliderSpace = GetValue(config, 'space.slider', 0);\r\n\r\n        if (background) {\r\n            this.addBackground(background);\r\n        }\r\n\r\n        if (icon) {\r\n            var padding;\r\n            if (this.orientation === 0) {\r\n                if (sliderConfig || text) {\r\n                    padding = { right: iconSpace };\r\n                }\r\n            } else {\r\n                if (sliderConfig || text) {\r\n                    padding = { bottom: iconSpace };\r\n                }\r\n            }\r\n\r\n            this.add(icon, 0, 'center', padding);\r\n\r\n            if (iconMask) {\r\n                iconMask = this.addChildMask(icon, icon, 1); // Circle mask\r\n            }\r\n        }\r\n\r\n        var slider;\r\n        if (sliderConfig) {\r\n            sliderConfig.orientation = this.orientation;\r\n            sliderConfig.eventEmitter = this;\r\n            sliderConfig.value = null;\r\n            if (!sliderConfig.hasOwnProperty('input')) {\r\n                sliderConfig.input = -1;\r\n            }\r\n            slider = new Slider(scene, sliderConfig);\r\n\r\n            var padding;\r\n            if (this.orientation === 0) {\r\n                if (text) {\r\n                    padding = { right: sliderSpace };\r\n                }\r\n            } else {\r\n                if (text) {\r\n                    padding = { bottom: sliderSpace };\r\n                }\r\n            }\r\n\r\n            var proportion;\r\n            if (this.orientation === 0) {\r\n                var sliderWidth = GetValue(sliderConfig, 'width', undefined);\r\n                proportion = (sliderWidth === undefined) ? 1 : 0;\r\n            } else {\r\n                var sliderHeight = GetValue(sliderConfig, 'height', undefined);\r\n                proportion = (sliderHeight === undefined) ? 1 : 0;\r\n            }\r\n            this.add(slider, proportion, 'center', padding);\r\n        }\r\n\r\n\r\n        if (text) {\r\n            this.add(text);\r\n        }\r\n\r\n        this.addChildrenMap('background', background);\r\n        this.addChildrenMap('icon', icon);\r\n        this.addChildrenMap('iconMask', iconMask);\r\n        this.addChildrenMap('slider', slider);\r\n        this.addChildrenMap('text', text);\r\n\r\n        var callback = GetValue(config, 'valuechangeCallback', null);\r\n        if (callback !== null) {\r\n            var scope = GetValue(config, 'valuechangeCallbackScope', undefined);\r\n            this.on('valuechange', callback, scope);\r\n        }\r\n        this.setEnable(GetValue(config, 'enable', undefined));\r\n        this.setValue(GetValue(config, 'value', 0));\r\n    }\r\n\r\n    setEnable(enable) {\r\n        if (this.childrenMap.slider) {\r\n            return this;\r\n        }\r\n        if (enable === undefined) {\r\n            enable = true;\r\n        }\r\n        this.childrenMap.slider.enable = enable;\r\n        return this;\r\n    }\r\n\r\n    get value() {\r\n        if (this.childrenMap.slider) {\r\n            return this.childrenMap.slider.value;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    set value(value) {\r\n        if (!this.childrenMap.slider) {\r\n            return;\r\n        }\r\n        this.childrenMap.slider.value = value;\r\n    }\r\n\r\n    setValue(value, min, max) {\r\n        if (min !== undefined) {\r\n            value = Percent(value, min, max);\r\n        }\r\n        this.value = value;\r\n        return this;\r\n    }\r\n\r\n    addValue(inc, min, max) {\r\n        if (min !== undefined) {\r\n            inc = Percent(inc, min, max);\r\n        }\r\n        this.value += inc;\r\n        return this;\r\n    }\r\n\r\n    getValue(min, max) {\r\n        var value = this.value;\r\n        if (min !== undefined) {\r\n            value = Linear(min, max, value);\r\n        }\r\n        return value;\r\n    }\r\n\r\n    get text() {\r\n        var textObject = this.childrenMap.text;\r\n        if (textObject === undefined) {\r\n            return '';\r\n        }\r\n        var value;\r\n        if (textObject.text) {\r\n            value = textObject.text;\r\n        } else {\r\n            value = textObject.getData('text');\r\n        }\r\n        return value;\r\n    }\r\n\r\n    set text(value) {\r\n        var textObject = this.childrenMap.text;\r\n        if (textObject === undefined) {\r\n            return;\r\n        }\r\n        if (textObject.setText) {\r\n            textObject.setText(value);\r\n        } else {\r\n            textObject.setData('text', value);\r\n        }\r\n    }\r\n\r\n    setText(value) {\r\n        this.text = value;\r\n        return this;\r\n    }\r\n}\r\n\r\nvar methods = {\r\n    addChildMask: AddChildMask\r\n}\r\n\r\nObject.assign(\r\n    NumberBar.prototype,\r\n    methods\r\n);\r\n\r\nexport default NumberBar;"]},"metadata":{},"sourceType":"module"}